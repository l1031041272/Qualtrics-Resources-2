{"version":3,"sources":["webpack://PIXI.live2d/webpack/universalModuleDefinition","webpack://PIXI.live2d/webpack/bootstrap","webpack://PIXI.live2d/./src/utils/log.ts","webpack://PIXI.live2d/./src/utils/math.ts","webpack://PIXI.live2d/./src/utils/obj.ts","webpack://PIXI.live2d/./src/utils/string.ts","webpack://PIXI.live2d/./src/utils/index.ts","webpack://PIXI.live2d/./src/config.ts","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/math\",\"commonjs2\":\"@pixi/math\",\"amd\":\"@pixi/math\",\"root\":\"PIXI\"}","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/utils\",\"commonjs2\":\"@pixi/utils\",\"amd\":\"@pixi/utils\",\"root\":[\"PIXI\",\"utils\"]}","webpack://PIXI.live2d/./src/factory/Live2DLoader.ts","webpack://PIXI.live2d/./src/factory/texture.ts","webpack://PIXI.live2d/./src/factory/model-middlewares.ts","webpack://PIXI.live2d/./src/factory/Live2DFactory.ts","webpack://PIXI.live2d/./src/cubism-common/index.ts","webpack://PIXI.live2d/./src/cubism-common/SoundManager.ts","webpack://PIXI.live2d/./src/cubism-common/constants.ts","webpack://PIXI.live2d/./node_modules/lodash/_root.js","webpack://PIXI.live2d/./src/cubism-common/MotionState.ts","webpack://PIXI.live2d/./node_modules/lodash/_getNative.js","webpack://PIXI.live2d/./src/cubism-common/ExpressionManager.ts","webpack://PIXI.live2d/./src/cubism-common/ModelSettings.ts","webpack://PIXI.live2d/./src/cubism-common/MotionManager.ts","webpack://PIXI.live2d/./src/cubism-common/InternalModel.ts","webpack://PIXI.live2d/./src/cubism-common/FocusController.ts","webpack://PIXI.live2d/./src/factory/XHRLoader.ts","webpack://PIXI.live2d/./src/utils/middleware.ts","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/core\",\"commonjs2\":\"@pixi/core\",\"amd\":\"@pixi/core\",\"root\":\"PIXI\"}","webpack://PIXI.live2d/./node_modules/lodash/_baseGetTag.js","webpack://PIXI.live2d/./node_modules/lodash/_Symbol.js","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/text\",\"commonjs2\":\"@pixi/text\",\"amd\":\"@pixi/text\",\"root\":\"PIXI\"}","webpack://PIXI.live2d/./node_modules/lodash/identity.js","webpack://PIXI.live2d/./node_modules/lodash/isObject.js","webpack://PIXI.live2d/./src/InteractionMixin.ts","webpack://PIXI.live2d/./src/Live2DTransform.ts","webpack://PIXI.live2d/./src/Live2DModel.ts","webpack://PIXI.live2d/./src/factory/FileLoader.ts","webpack://PIXI.live2d/./src/factory/ZipLoader.ts","webpack://PIXI.live2d/./src/factory/index.ts","webpack://PIXI.live2d/./src/common.ts","webpack://PIXI.live2d/./src/tools/HitAreaFrames.ts","webpack://PIXI.live2d/./src/common-browser.ts","webpack://PIXI.live2d/./node_modules/lodash/pull.js","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/display\",\"commonjs2\":\"@pixi/display\",\"amd\":\"@pixi/display\",\"root\":\"PIXI\"}","webpack://PIXI.live2d/external {\"commonjs\":\"@pixi/graphics\",\"commonjs2\":\"@pixi/graphics\",\"amd\":\"@pixi/graphics\",\"root\":\"PIXI\"}","webpack://PIXI.live2d/./node_modules/lodash/_defineProperty.js","webpack://PIXI.live2d/./node_modules/lodash/isFunction.js","webpack://PIXI.live2d/./node_modules/lodash/_freeGlobal.js","webpack://PIXI.live2d/./node_modules/lodash/_toSource.js","webpack://PIXI.live2d/./node_modules/lodash/_arrayMap.js","webpack://PIXI.live2d/./node_modules/lodash/_baseUnary.js","webpack://PIXI.live2d/./node_modules/lodash/_baseRest.js","webpack://PIXI.live2d/./node_modules/lodash/_overRest.js","webpack://PIXI.live2d/./node_modules/lodash/_apply.js","webpack://PIXI.live2d/./node_modules/lodash/_setToString.js","webpack://PIXI.live2d/./node_modules/lodash/_baseSetToString.js","webpack://PIXI.live2d/./node_modules/lodash/constant.js","webpack://PIXI.live2d/./node_modules/lodash/_baseIsNative.js","webpack://PIXI.live2d/(webpack)/buildin/global.js","webpack://PIXI.live2d/./node_modules/lodash/_getRawTag.js","webpack://PIXI.live2d/./node_modules/lodash/_objectToString.js","webpack://PIXI.live2d/./node_modules/lodash/_isMasked.js","webpack://PIXI.live2d/./node_modules/lodash/_coreJsData.js","webpack://PIXI.live2d/./node_modules/lodash/_getValue.js","webpack://PIXI.live2d/./node_modules/lodash/_shortOut.js","webpack://PIXI.live2d/./node_modules/lodash/pullAll.js","webpack://PIXI.live2d/./node_modules/lodash/_basePullAll.js","webpack://PIXI.live2d/./node_modules/lodash/_baseIndexOf.js","webpack://PIXI.live2d/./node_modules/lodash/_baseFindIndex.js","webpack://PIXI.live2d/./node_modules/lodash/_baseIsNaN.js","webpack://PIXI.live2d/./node_modules/lodash/_strictIndexOf.js","webpack://PIXI.live2d/./node_modules/lodash/_baseIndexOfWith.js","webpack://PIXI.live2d/./node_modules/lodash/_copyArray.js","webpack://PIXI.live2d/./src/cubism2/patch-motion.ts","webpack://PIXI.live2d/./src/cubism2/Live2DExpression.ts","webpack://PIXI.live2d/./src/cubism2/Cubism2ExpressionManager.ts","webpack://PIXI.live2d/./src/cubism2/Cubism2MotionManager.ts","webpack://PIXI.live2d/./src/cubism2/Live2DEyeBlink.ts","webpack://PIXI.live2d/./src/cubism2/Cubism2InternalModel.ts","webpack://PIXI.live2d/./src/cubism2/Cubism2ModelSettings.ts","webpack://PIXI.live2d/./src/cubism2/Live2DPhysics.ts","webpack://PIXI.live2d/./src/cubism2/Live2DPose.ts","webpack://PIXI.live2d/./src/cubism2/factory.ts","webpack://PIXI.live2d/./src/cubism2/index.ts","webpack://PIXI.live2d/./src/cubism2/check-runtime.ts","webpack://PIXI.live2d/./src/csm2.ts"],"names":[],"mappings":"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;AC3FwB;AAEa;;;;;;;ACFtC,eAAe,mBAAO,CAAC,EAAa;AACpC,cAAc,mBAAO,CAAC,EAAW;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,KAAK;AAChB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA,iD;;;;;;ACAA,iD;;;;;;ACAA,gBAAgB,mBAAO,CAAC,EAAc;;AAEtC;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;ACVA,iBAAiB,mBAAO,CAAC,EAAe;AACxC,eAAe,mBAAO,CAAC,EAAY;;AAEnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpCA;AACA;;AAEA;;;;;;;;ACHA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpBA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACbA,eAAe,mBAAO,CAAC,EAAY;AACnC,eAAe,mBAAO,CAAC,EAAa;AACpC,kBAAkB,mBAAO,CAAC,EAAgB;;AAE1C;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;;;;;;;AChBA,YAAY,mBAAO,CAAC,EAAU;;AAE9B;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,MAAM;AACjB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpBA,sBAAsB,mBAAO,CAAC,EAAoB;AAClD,eAAe,mBAAO,CAAC,EAAa;;AAEpC;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;;AAEA;;;;;;;ACbA,eAAe,mBAAO,CAAC,EAAY;AACnC,qBAAqB,mBAAO,CAAC,EAAmB;AAChD,eAAe,mBAAO,CAAC,EAAY;;AAEnC;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,SAAS;AACtB;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,WAAW,SAAS,GAAG,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzBA,iBAAiB,mBAAO,CAAC,EAAc;AACvC,eAAe,mBAAO,CAAC,EAAa;AACpC,eAAe,mBAAO,CAAC,EAAY;AACnC,eAAe,mBAAO,CAAC,EAAa;;AAEpC;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC9CA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACnBA,aAAa,mBAAO,CAAC,EAAW;;AAEhC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;;;;;;;ACrBA,iBAAiB,mBAAO,CAAC,EAAe;;AAExC;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA,WAAW,mBAAO,CAAC,CAAS;;AAE5B;AACA;;AAEA;;;;;;;ACLA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpCA,kBAAkB,mBAAO,CAAC,EAAgB;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5BA,eAAe,mBAAO,CAAC,EAAa;AACpC,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,sBAAsB,mBAAO,CAAC,EAAoB;AAClD,gBAAgB,mBAAO,CAAC,EAAc;AACtC,gBAAgB,mBAAO,CAAC,EAAc;;AAEtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClDA,oBAAoB,mBAAO,CAAC,EAAkB;AAC9C,gBAAgB,mBAAO,CAAC,EAAc;AACtC,oBAAoB,mBAAO,CAAC,EAAkB;;AAE9C;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvBA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,WAAW,SAAS;AAC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","file":"cubism2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@pixi/math\"), require(\"@pixi/utils\"), require(\"@pixi/core\"), require(\"@pixi/text\"), require(\"@pixi/display\"), require(\"@pixi/graphics\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@pixi/math\", \"@pixi/utils\", \"@pixi/core\", \"@pixi/text\", \"@pixi/display\", \"@pixi/graphics\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"live2d\"] = factory(require(\"@pixi/math\"), require(\"@pixi/utils\"), require(\"@pixi/core\"), require(\"@pixi/text\"), require(\"@pixi/display\"), require(\"@pixi/graphics\"));\n\telse\n\t\troot[\"PIXI\"] = root[\"PIXI\"] || {}, root[\"PIXI\"][\"live2d\"] = factory(root[\"PIXI\"], root[\"PIXI\"][\"utils\"], root[\"PIXI\"], root[\"PIXI\"], root[\"PIXI\"], root[\"PIXI\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__20__, __WEBPACK_EXTERNAL_MODULE__24__, __WEBPACK_EXTERNAL_MODULE__34__, __WEBPACK_EXTERNAL_MODULE__35__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 166);\n","import { config } from '@/config';\n\n/**\n * A simple tagged logger.\n *\n * You can replace the methods with your own ones.\n *\n * ```js\n * import { logger } from 'pixi-live2d-display';\n *\n * logger.log = (tag, ...messages) => {\n *     console.log(tag, 'says:', ...messages);\n * };\n * ```\n */\nexport namespace logger {\n    export function log(tag: string, ...messages: any[]) {\n        if (config.logLevel <= config.LOG_LEVEL_VERBOSE) {\n            console.log(`[${tag}]`, ...messages);\n        }\n    }\n\n    export function warn(tag: string, ...messages: any[]) {\n        if (config.logLevel <= config.LOG_LEVEL_WARNING) {\n            console.warn(`[${tag}]`, ...messages);\n        }\n    }\n\n    export function error(tag: string, ...messages: any[]) {\n        if (config.logLevel <= config.LOG_LEVEL_ERROR) {\n            console.error(`[${tag}]`, ...messages);\n        }\n    }\n}\n","/**\n * These functions can be slightly faster than the ones in Lodash.\n * @packageDocumentation\n */\n\nexport function clamp(num: number, lower: number, upper: number) {\n    return num < lower ? lower : num > upper ? upper : num;\n}\n\nexport function rand(min: number, max: number) {\n    return Math.random() * (max - min) + min;\n}\n","/**\n * Copies a property at only if it matches the `type`.\n * @param type - Type expected to match `typeof` on the property.\n * @param from - Source object.\n * @param to - Destination object.\n * @param fromKey - Key of the property in source object.\n * @param toKey - Key of the property in destination object.\n */\n// TODO: lint and fix the formatting!\nexport function copyProperty<From, FromKey extends keyof From, ToKey extends keyof any, To extends Partial<Record<ToKey, From[FromKey]>>>(type: string, from: From, to: To, fromKey: FromKey, toKey: ToKey) {\n    const value = from[fromKey];\n\n    if (value !== null && typeof value === type) {\n        // a type error will occur here, have no idea\n        to[toKey] = value as any;\n    }\n}\n\n/**\n * Copies an array at `key`, filtering the items that match the `type`.\n * @param type - Type expected to match `typeof` on the items.\n * @param from - Source object.\n * @param to - Destination object.\n * @param fromKey - Key of the array property in source object.\n * @param toKey - Key of the array property in destination object.\n */\nexport function copyArray<FromKey extends keyof any, From extends Partial<Record<FromKey, any[]>>, ToKey extends keyof any, To extends Partial<Record<ToKey, any[]>>>(type: string, from: From, to: To, fromKey: FromKey, toKey: ToKey) {\n    const array = from[fromKey];\n\n    if (Array.isArray(array)) {\n        to[toKey] = array.filter(item => item !== null && typeof item === type) as any;\n    }\n}\n\n/**\n * @see {@link https://www.typescriptlang.org/docs/handbook/mixins.html}\n */\nexport function applyMixins(derivedCtor: any, baseCtors: any[]) {\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name)!);\n            }\n        });\n    });\n}\n","/**\n * Gets the name of parent folder in a url.\n * @param url - URL of a file.\n * @return Name of the parent folder, or the file itself if it has no parent folder.\n */\nexport function folderName(url: string) {\n    let lastSlashIndex = url.lastIndexOf('/');\n\n    if (lastSlashIndex != -1) {\n        url = url.slice(0, lastSlashIndex);\n    }\n\n    lastSlashIndex = url.lastIndexOf('/');\n\n    if (lastSlashIndex !== -1) {\n        url = url.slice(lastSlashIndex + 1);\n    }\n\n    return url;\n}\n","export * from './log';\nexport * from './math';\nexport * from './obj';\nexport * from './string';\n","/**\n * Global configs.\n */\nexport namespace config {\n    export const LOG_LEVEL_VERBOSE = 0;\n    export const LOG_LEVEL_WARNING = 1;\n    export const LOG_LEVEL_ERROR = 2;\n    export const LOG_LEVEL_NONE = 999;\n\n    declare const __PRODUCTION__: boolean;\n\n    /**\n     * Global log level.\n     * @default {@link LOG_LEVEL_WARNING}\n     */\n    export let logLevel = __PRODUCTION__ ? LOG_LEVEL_WARNING : LOG_LEVEL_VERBOSE;\n\n    /**\n     * Enabling sound for motions.\n     */\n    export let sound = true;\n\n    /**\n     * Deferring motion and corresponding sound until both are loaded.\n     */\n    export let motionSync = true;\n\n    /**\n     * Default fading duration for motions without such value specified.\n     */\n    export let motionFadingDuration = 500;\n\n    /**\n     * Default fading duration for idle motions without such value specified.\n     */\n    export let idleMotionFadingDuration = 2000;\n\n    /**\n     * Default fading duration for expressions without such value specified.\n     */\n    export let expressionFadingDuration = 500;\n\n    export let cubism4: {\n        /**\n         * Should masks support 4x4 division, which is unofficial and experimental.\n         * See [official manual](https://docs.live2d.com/cubism-sdk-manual/ow-sdk-mask-premake-web/?locale=en_us).\n         * @default true\n         */\n        supportMoreMaskDivisions: boolean;\n    } | undefined;\n}\n\ndeclare const __VERSION__: string;\n\n/**\n * Consistent with the `version` in package.json.\n */\nexport const VERSION = __VERSION__;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","import { ExpressionManager, InternalModel, ModelSettings, MotionManager } from '@/cubism-common';\nimport { XHRLoader } from '@/factory/XHRLoader';\nimport { Live2DModel } from '@/Live2DModel';\nimport { Middleware, runMiddlewares } from '@/utils/middleware';\n\nexport type Live2DLoaderTarget = Live2DModel | InternalModel | MotionManager | ExpressionManager\n\n/**\n * The context transferred through Live2DLoader middlewares.\n */\nexport interface Live2DLoaderContext {\n    /** The XHR's response type. */\n    type: XMLHttpRequestResponseType;\n\n    /** Will be resolved by {@link ModelSettings.resolveURL} if a ModelSettings is provided. */\n    url: string;\n\n    /** If provided, the given URL will be resolved by {@link ModelSettings.resolveURL}. */\n    settings?: ModelSettings;\n\n    /**\n     * Owner of this resource. The load task will be automatically canceled\n     * when receiving an \"destroy\" event from the target.\n     */\n    target?: Live2DLoaderTarget;\n\n    /** Loaded data. */\n    result?: any;\n}\n\nexport class Live2DLoader {\n    static middlewares: Middleware<Live2DLoaderContext>[] = [XHRLoader.loader];\n\n    /**\n     * Loads a resource.\n     * @return Promise that resolves with the loaded data in a format that's consistent with the specified `type`.\n     */\n    static load<T = any>(context: Live2DLoaderContext): Promise<T> {\n        return runMiddlewares(this.middlewares, context).then(() => context.result);\n    }\n}\n","import { Texture } from '@pixi/core';\n\nexport function createTexture(url: string, options: { crossOrigin?: string } = {}): Promise<Texture> {\n    const textureOptions: any = { resourceOptions: { crossorigin: options.crossOrigin } };\n\n    // there's already such a method since Pixi v5.3.0\n    if ((Texture as any).fromURL) {\n        return Texture.fromURL(url, textureOptions).catch(e => {\n            if (e instanceof Error) {\n                throw e;\n            }\n\n            // assume e is an ErrorEvent, let's convert it to an Error\n            const err = new Error('Texture loading error');\n            (err as any).event = e;\n\n            throw err;\n        });\n    }\n\n    // and in order to provide backward compatibility for older Pixi versions,\n    // we have to manually implement this method\n    // see https://github.com/pixijs/pixi.js/pull/6687/files\n\n    textureOptions.resourceOptions.autoLoad = false;\n\n    const texture = Texture.from(url, textureOptions);\n\n    if (texture.baseTexture.valid) {\n        return Promise.resolve(texture);\n    }\n\n    const resource = texture.baseTexture.resource as any;\n\n    // before Pixi v5.2.2, the Promise will not be rejected when loading has failed,\n    // we have to manually handle the \"error\" event\n    // see https://github.com/pixijs/pixi.js/pull/6374\n    resource._live2d_load ??= new Promise<Texture>((resolve, reject) => {\n        const errorHandler = (event: ErrorEvent) => {\n            (resource.source as HTMLImageElement).removeEventListener('error', errorHandler);\n\n            // convert the ErrorEvent to an Error\n            const err = new Error('Texture loading error');\n            (err as any).event = event;\n\n            reject(err);\n        };\n\n        (resource.source as HTMLImageElement).addEventListener('error', errorHandler);\n\n        (resource.load() as Promise<unknown>).then(() => resolve(texture)).catch(errorHandler);\n    });\n\n    return resource._live2d_load;\n}\n","import { Middleware } from '@/utils/middleware';\nimport { Live2DLoader } from '@/factory/Live2DLoader';\nimport { ModelSettings } from '@/cubism-common';\nimport { logger } from '@/utils';\nimport { createTexture } from '@/factory/texture';\nimport { Live2DFactory, Live2DFactoryContext } from '@/factory/Live2DFactory';\n\nconst TAG = 'Live2DFactory';\n\n/**\n * A middleware that converts the source from a URL to a settings JSON object.\n */\nexport const urlToJSON: Middleware<Live2DFactoryContext> = async (context, next) => {\n    if (typeof context.source === 'string') {\n        const data = await Live2DLoader.load({\n            url: context.source,\n            type: 'json',\n            target: context.live2dModel,\n        });\n\n        data.url = context.source;\n\n        context.source = data;\n\n        context.live2dModel.emit('settingsJSONLoaded', data);\n    }\n\n    return next();\n};\n\n/**\n * A middleware that converts the source from a settings JSON object to a ModelSettings instance.\n */\nexport const jsonToSettings: Middleware<Live2DFactoryContext> = async (context, next) => {\n    if (context.source instanceof ModelSettings) {\n        context.settings = context.source;\n\n        return next();\n    } else if (typeof context.source === 'object') {\n        const runtime = Live2DFactory.findRuntime(context.source);\n\n        if (runtime) {\n            const settings = runtime.createModelSettings(context.source);\n\n            context.settings = settings;\n            context.live2dModel.emit('settingsLoaded', settings);\n\n            return next();\n        }\n    }\n\n    throw new TypeError('Unknown settings format.');\n};\n\nexport const waitUntilReady: Middleware<Live2DFactoryContext> = (context, next) => {\n    if (context.settings) {\n        const runtime = Live2DFactory.findRuntime(context.settings);\n\n        if (runtime) {\n            return runtime.ready().then(next);\n        }\n    }\n\n    return next();\n};\n\n/**\n * A middleware that populates the Live2DModel with optional resources.\n * Requires InternalModel in context when all the subsequent middlewares have finished.\n */\nexport const setupOptionals: Middleware<Live2DFactoryContext> = async (context, next) => {\n    // wait until all has finished\n    await next();\n\n    const internalModel = context.internalModel;\n\n    if (internalModel) {\n        const settings = context.settings!;\n        const runtime = Live2DFactory.findRuntime(settings);\n\n        if (runtime) {\n            const tasks: Promise<void>[] = [];\n\n            if (settings.pose) {\n                tasks.push(\n                    Live2DLoader.load({\n                            settings,\n                            url: settings.pose,\n                            type: 'json',\n                            target: internalModel,\n                        })\n                        .then((data: ArrayBuffer) => {\n                            internalModel.pose = runtime.createPose(internalModel.coreModel, data);\n                            context.live2dModel.emit('poseLoaded', internalModel.pose);\n                        })\n                        .catch((e: Error) => logger.warn(TAG, 'Failed to load pose.\\n', e)),\n                );\n            }\n\n            if (settings.physics) {\n                tasks.push(\n                    Live2DLoader.load({\n                            settings,\n                            url: settings.physics,\n                            type: 'json',\n                            target: internalModel,\n                        })\n                        .then((data: ArrayBuffer) => {\n                            internalModel.physics = runtime.createPhysics(internalModel.coreModel, data);\n                            context.live2dModel.emit('physicsLoaded', internalModel.physics);\n                        })\n                        .catch((e: Error) => logger.warn(TAG, 'Failed to load physics.\\n', e)),\n                );\n            }\n\n            if (tasks.length) {\n                await Promise.all(tasks);\n            }\n        }\n    }\n};\n\n/**\n * A middleware that populates the Live2DModel with essential resources.\n * Requires ModelSettings in context immediately, and InternalModel in context\n * when all the subsequent middlewares have finished.\n */\nexport const setupEssentials: Middleware<Live2DFactoryContext> = async (context, next) => {\n    if (context.settings) {\n        const live2DModel = context.live2dModel;\n\n        const textureLoadings = context.settings.textures.map(tex => {\n            const url = context.settings!.resolveURL(tex);\n            return createTexture(url, { crossOrigin: context.options.crossOrigin });\n        });\n\n        // wait for the internal model to be created\n        await next();\n\n        if (context.internalModel) {\n            live2DModel.internalModel = context.internalModel;\n            live2DModel.emit('modelLoaded', context.internalModel);\n        } else {\n            throw new TypeError('Missing internal model.');\n        }\n\n        live2DModel.textures = await Promise.all(textureLoadings);\n        live2DModel.emit('textureLoaded', live2DModel.textures);\n    } else {\n        throw new TypeError('Missing settings.');\n    }\n};\n\n/**\n * A middleware that creates the InternalModel. Requires ModelSettings in context.\n */\nexport const createInternalModel: Middleware<Live2DFactoryContext> = async (context, next) => {\n    const settings = context.settings;\n\n    if (settings instanceof ModelSettings) {\n        const runtime = Live2DFactory.findRuntime(settings);\n\n        if (!runtime) {\n            throw new TypeError('Unknown model settings.');\n        }\n\n        const modelData = await Live2DLoader.load<ArrayBuffer>({\n            settings,\n            url: settings.moc,\n            type: 'arraybuffer',\n            target: context.live2dModel,\n        });\n\n        if (!runtime.isValidMoc(modelData)) {\n            throw new Error('Invalid moc data');\n        }\n\n        const coreModel = runtime.createCoreModel(modelData);\n\n        context.internalModel = runtime.createInternalModel(coreModel, settings, context.options);\n\n        return next();\n    }\n\n    throw new TypeError('Missing settings.');\n};\n","import { ExpressionManager, InternalModel, ModelSettings, MotionManager } from '@/cubism-common';\nimport { Live2DLoader } from '@/factory/Live2DLoader';\nimport { Live2DModel, Live2DModelOptions } from '@/Live2DModel';\nimport { logger } from '@/utils';\nimport { Middleware, runMiddlewares } from '@/utils/middleware';\nimport {\n    createInternalModel,\n    jsonToSettings,\n    setupEssentials,\n    setupOptionals,\n    urlToJSON,\n    waitUntilReady,\n} from '@/factory/model-middlewares';\n\nexport interface Live2DFactoryOptions extends Live2DModelOptions {\n    /**\n     * String to use for crossOrigin properties on `<img>` elements when loading textures.\n     * @default undefined\n     */\n    crossOrigin?: string;\n\n    /**\n     * Callback invokes when the model has been loaded.\n     * @default undefined\n     */\n    onLoad?(): void;\n\n    /**\n     * Callback invokes when error occurs while loading the model.\n     * @default undefined\n     */\n    onError?(e: Error): void;\n}\n\n/**\n * The context transferred through the model creation middlewares.\n */\nexport interface Live2DFactoryContext {\n    source: any,\n    options: Live2DFactoryOptions;\n    live2dModel: Live2DModel;\n    internalModel?: InternalModel;\n    settings?: ModelSettings;\n}\n\n/**\n * Represents a Cubism version.\n */\nexport interface Live2DRuntime {\n    /**\n     * The version number. Higher version takes priority when matching the runtime.\n     */\n    version: number;\n\n    /**\n     * Checks if the source belongs to this runtime.\n     * @param source - Either a settings JSON object or a ModelSettings instance.\n     * @return True if the source belongs to this runtime.\n     */\n    test(source: any): boolean;\n\n    // TODO: remove\n    ready(): Promise<void>;\n\n    /**\n     * Checks if the data is a valid moc to create the core model.\n     * @param modelData - The moc content.\n     * @return True if the data is valid.\n     */\n    isValidMoc(modelData: ArrayBuffer): boolean;\n\n    /**\n     * Creates a ModelSettings.\n     * @param json - The settings JSON object.\n     * @return Created ModelSettings.\n     */\n    createModelSettings(json: JSONObject): ModelSettings;\n\n    /**\n     * Creates a core model.\n     * @param data - Content of the moc file.\n     * @return Created core model.\n     */\n    createCoreModel(data: ArrayBuffer): any;\n\n    /**\n     * Creates an InternalModel.\n     * @param coreModel - Core model that *must* belong to this runtime.\n     * @param settings - ModelSettings of this model.\n     * @param options - Options that will be passed to the InternalModel's constructor.\n     * @return Created InternalModel.\n     */\n    createInternalModel(coreModel: any, settings: ModelSettings, options?: Live2DFactoryOptions): InternalModel;\n\n    /**\n     * Creates a pose.\n     * @param coreModel - Core model that *must* belong to this runtime.\n     * @param data - Content of the pose file.\n     * @return Created pose.\n     */\n    createPose(coreModel: any, data: any): any;\n\n    /**\n     * Creates a physics.\n     * @param coreModel - Core model that *must* belong to this runtime.\n     * @param data - Content of the physics file.\n     * @return Created physics.\n     */\n    createPhysics(coreModel: any, data: any): any;\n}\n\n/**\n * Handles all the network load tasks.\n *\n * - Model creation: requested by {@link Live2DModel.from}.\n * - Motion loading: implements the load method of MotionManager.\n * - Expression loading: implements the load method of ExpressionManager.\n */\nexport class Live2DFactory {\n    /**\n     * All registered runtimes, sorted by versions in descending order.\n     */\n    static runtimes: Live2DRuntime[] = [];\n\n    static urlToJSON = urlToJSON;\n    static jsonToSettings = jsonToSettings;\n    static waitUntilReady = waitUntilReady;\n    static setupOptionals = setupOptionals;\n    static setupEssentials = setupEssentials;\n    static createInternalModel = createInternalModel;\n\n    /**\n     * Middlewares to run through when setting up a Live2DModel.\n     */\n    static live2DModelMiddlewares: Middleware<Live2DFactoryContext>[] = [\n        urlToJSON, jsonToSettings, waitUntilReady, setupOptionals, setupEssentials, createInternalModel,\n    ];\n\n    /**\n     * load tasks of each motion. The structure of each value in this map\n     * is the same as respective {@link MotionManager.definitions}.\n     */\n    static motionTasksMap = new WeakMap<MotionManager, Record<string, (Promise<any> | undefined)[]>>();\n\n    /**\n     * Load tasks of each expression.\n     */\n    static expressionTasksMap = new WeakMap<ExpressionManager, (Promise<any> | undefined)[]>();\n\n    /**\n     * Registers a Live2DRuntime.\n     */\n    static registerRuntime(runtime: Live2DRuntime) {\n        Live2DFactory.runtimes.push(runtime);\n\n        // higher version as higher priority\n        Live2DFactory.runtimes.sort((a, b) => b.version - a.version);\n    }\n\n    /**\n     * Finds a runtime that matches given source.\n     * @param source - Either a settings JSON object or a ModelSettings instance.\n     * @return The Live2DRuntime, or undefined if not found.\n     */\n    static findRuntime(source: any): Live2DRuntime | undefined {\n        for (const runtime of Live2DFactory.runtimes) {\n            if (runtime.test(source)) {\n                return runtime;\n            }\n        }\n    }\n\n    /**\n     * Sets up a Live2DModel, populating it with all defined resources.\n     * @param live2dModel - The Live2DModel instance.\n     * @param source - Can be one of: settings file URL, settings JSON object, ModelSettings instance.\n     * @param options - Options for the process.\n     * @return Promise that resolves when all resources have been loaded, rejects when error occurs.\n     */\n    static async setupLive2DModel<IM extends InternalModel>(live2dModel: Live2DModel<IM>, source: string | object | IM['settings'], options?: Live2DFactoryOptions): Promise<void> {\n        const textureLoaded = new Promise(resolve => live2dModel.once('textureLoaded', resolve));\n        const modelLoaded = new Promise(resolve => live2dModel.once('modelLoaded', resolve));\n\n        // because the \"ready\" event is supposed to be emitted after\n        // both the internal model and textures have been loaded,\n        // we should here wrap the emit() in a then() so it'll\n        // be executed after all the handlers of \"modelLoaded\" and \"textureLoaded\"\n        const readyEventEmitted = Promise.all([textureLoaded, modelLoaded]).then(() => live2dModel.emit('ready'));\n\n        await runMiddlewares(Live2DFactory.live2DModelMiddlewares, {\n            live2dModel,\n            source,\n            options: options || {},\n        });\n\n        // the \"load\" event should never be emitted before \"ready\"\n        await readyEventEmitted;\n\n        live2dModel.emit('load');\n    }\n\n    /**\n     * Loads a Motion and registers the task to {@link motionTasksMap}. The task will be automatically\n     * canceled when its owner - the MotionManager instance - has been destroyed.\n     * @param motionManager - MotionManager that owns this Motion.\n     * @param group - The motion group.\n     * @param index - Index in the motion group.\n     * @return Promise that resolves with the Motion, or with undefined if it can't be loaded.\n     */\n    static loadMotion<Motion, MotionSpec>(motionManager: MotionManager<Motion, MotionSpec>, group: string, index: number): Promise<Motion | undefined> {\n        // errors in this method are always handled\n        const handleError = (e: any) => motionManager.emit('motionLoadError', group, index, e);\n\n        try {\n            const definition = motionManager.definitions[group] ?. [index];\n\n            if (!definition) {\n                return Promise.resolve(undefined);\n            }\n\n            if (!motionManager.listeners('destroy').includes(Live2DFactory.releaseTasks)) {\n                motionManager.once('destroy', Live2DFactory.releaseTasks);\n            }\n\n            let tasks = Live2DFactory.motionTasksMap.get(motionManager);\n\n            if (!tasks) {\n                tasks = {};\n                Live2DFactory.motionTasksMap.set(motionManager, tasks);\n            }\n\n            let taskGroup = tasks[group];\n\n            if (!taskGroup) {\n                taskGroup = [];\n                tasks[group] = taskGroup;\n            }\n\n            const path = motionManager.getMotionFile(definition);\n\n            taskGroup[index] ??= Live2DLoader.load({\n                    url: path,\n                    settings: motionManager.settings,\n                    type: motionManager.motionDataType,\n                    target: motionManager,\n                })\n                .then(data => {\n                    const taskGroup = Live2DFactory.motionTasksMap.get(motionManager)?.[group];\n\n                    if (taskGroup) {\n                        delete taskGroup[index];\n                    }\n\n                    const motion = motionManager.createMotion(data, group, definition);\n\n                    motionManager.emit('motionLoaded', group, index, motion);\n\n                    return motion;\n                })\n                .catch(e => {\n                    logger.warn(motionManager.tag, `Failed to load motion: ${path}\\n`, e);\n                    handleError(e);\n                });\n\n            return taskGroup[index]!;\n        } catch (e) {\n            logger.warn(motionManager.tag, `Failed to load motion at \"${group}\"[${index}]\\n`, e);\n            handleError(e);\n        }\n\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Loads an Expression and registers the task to {@link expressionTasksMap}. The task will be automatically\n     * canceled when its owner - the ExpressionManager instance - has been destroyed.\n     * @param expressionManager - ExpressionManager that owns this Expression.\n     * @param index - Index of the Expression.\n     * @return Promise that resolves with the Expression, or with undefined if it can't be loaded.\n     */\n    static loadExpression<Expression, ExpressionSpec>(expressionManager: ExpressionManager<Expression, ExpressionSpec>, index: number): Promise<Expression | undefined> {\n        // errors in this method are always handled\n        const handleError = (e: any) => expressionManager.emit('expressionLoadError', index, e);\n\n        try {\n            const definition = expressionManager.definitions[index];\n\n            if (!definition) {\n                return Promise.resolve(undefined);\n            }\n\n            if (!expressionManager.listeners('destroy').includes(Live2DFactory.releaseTasks)) {\n                expressionManager.once('destroy', Live2DFactory.releaseTasks);\n            }\n\n            let tasks = Live2DFactory.expressionTasksMap.get(expressionManager);\n\n            if (!tasks) {\n                tasks = [];\n                Live2DFactory.expressionTasksMap.set(expressionManager, tasks);\n            }\n\n            const path = expressionManager.getExpressionFile(definition);\n\n            tasks[index] ??= Live2DLoader.load({\n                    url: path,\n                    settings: expressionManager.settings,\n                    type: 'json',\n                    target: expressionManager,\n                })\n                .then(data => {\n                    const tasks = Live2DFactory.expressionTasksMap.get(expressionManager);\n\n                    if (tasks) {\n                        delete tasks[index];\n                    }\n\n                    const expression = expressionManager.createExpression(data, definition);\n\n                    expressionManager.emit('expressionLoaded', index, expression);\n\n                    return expression;\n                })\n                .catch(e => {\n                    logger.warn(expressionManager.tag, `Failed to load expression: ${path}\\n`, e);\n                    handleError(e);\n                });\n\n            return tasks[index]!;\n        } catch (e) {\n            logger.warn(expressionManager.tag, `Failed to load expression at [${index}]\\n`, e);\n            handleError(e);\n        }\n\n        return Promise.resolve(undefined);\n    }\n\n    static releaseTasks(this: MotionManager | ExpressionManager) {\n        if (this instanceof MotionManager) {\n            Live2DFactory.motionTasksMap.delete(this);\n        } else {\n            Live2DFactory.expressionTasksMap.delete(this);\n        }\n    }\n}\n\n(MotionManager.prototype as any)._loadMotion = function(this: MotionManager, group: string, index: number) {\n    return Live2DFactory.loadMotion(this, group, index);\n};\n\n(ExpressionManager.prototype as any)._loadExpression = function(this: ExpressionManager, index: number) {\n    return Live2DFactory.loadExpression(this, index);\n};\n","export * from './constants';\nexport * from './ExpressionManager';\nexport * from './FocusController';\nexport * from './ModelSettings';\nexport * from './MotionState';\nexport * from './MotionManager';\nexport * from './SoundManager';\nexport * from './InternalModel';\n","import { logger } from '@/utils';\nimport pull from 'lodash/pull';\n\nconst TAG = 'SoundManager';\nconst VOLUME = 0.5;\n\n/**\n * Manages all the sounds.\n */\nexport class SoundManager {\n    /**\n     * Audio elements playing or pending to play. Finished audios will be removed automatically.\n     */\n    static audios: HTMLAudioElement[] = [];\n\n    protected static _volume = VOLUME;\n\n    /**\n     * Global volume that applies to all the sounds.\n     */\n    static get volume(): number {\n        return this._volume;\n    }\n\n    static set volume(value: number) {\n        this._volume = (value > 1 ? 1 : value < 0 ? 0 : value) || 0;\n        this.audios.forEach(audio => (audio.volume = this._volume));\n    }\n\n    // TODO: return an ID?\n    /**\n     * Creates an audio element and adds it to the {@link audios}.\n     * @param file - URL of the sound file.\n     * @param onFinish - Callback invoked when the playback has finished.\n     * @param onError - Callback invoked when error occurs.\n     * @return Created audio element.\n     */\n    static add(file: string, onFinish?: () => void, onError?: (e: Error) => void): HTMLAudioElement {\n        const audio = new Audio(file);\n\n        audio.volume = this._volume;\n        audio.preload = 'auto';\n\n        audio.addEventListener('ended', () => {\n            this.dispose(audio);\n            onFinish?.();\n        });\n\n        audio.addEventListener('error', (e: ErrorEvent) => {\n            this.dispose(audio);\n            logger.warn(TAG, `Error occurred on \"${file}\"`, e.error);\n            onError?.(e.error);\n        });\n\n        this.audios.push(audio);\n\n        return audio;\n    }\n\n    /**\n     * Plays the sound.\n     * @param audio - An audio element.\n     * @return Promise that resolves when the audio is ready to play, rejects when error occurs.\n     */\n    static play(audio: HTMLAudioElement): Promise<void> {\n        return new Promise((resolve, reject) => {\n            // see https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\n            audio.play()?.catch(e => {\n                audio.dispatchEvent(new ErrorEvent('error', { error: e }));\n                reject(e);\n            });\n\n            if (audio.readyState === audio.HAVE_ENOUGH_DATA) {\n                resolve();\n            } else {\n                audio.addEventListener('canplaythrough', resolve as () => void);\n            }\n        });\n    }\n\n    /**\n     * Disposes an audio element and removes it from {@link audios}.\n     * @param audio - An audio element.\n     */\n    static dispose(audio: HTMLAudioElement): void {\n        audio.pause();\n        audio.removeAttribute('src');\n\n        pull(this.audios, audio);\n    }\n\n    /**\n     * Destroys all managed audios.\n     */\n    static destroy(): void {\n        // dispose() removes given audio from the array, so the loop must be backward\n        for (let i = this.audios.length - 1; i >= 0; i--) {\n            this.dispose(this.audios[i]!);\n        }\n    }\n}\n","export const LOGICAL_WIDTH = 2;\nexport const LOGICAL_HEIGHT = 2;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","import { logger } from '@/utils';\n\n/**\n * Indicates the motion priority.\n */\nexport enum MotionPriority {\n    /** States that the model is currently not playing any motion. This priority cannot be applied to a motion. */\n    NONE,\n\n    /** Low priority, used when starting idle motions automatically. */\n    IDLE,\n\n    /** Medium priority. */\n    NORMAL,\n\n    /** High priority. Motions as this priority will always be played regardless of the current priority. */\n    FORCE\n}\n\n/**\n * Handles the state of a MotionManager.\n */\nexport class MotionState {\n    /**\n     * Tag for logging.\n     */\n    tag!: string;\n\n    /**\n     * When enabled, the states will be dumped to the logger when an exception occurs.\n     */\n    debug = false;\n\n    /**\n     * Priority of the current motion. Will be `MotionPriority.NONE` if there's no playing motion.\n     */\n    currentPriority = MotionPriority.NONE;\n\n    /**\n     * Priority of the reserved motion, which is still in loading and will be played once loaded.\n     * Will be `MotionPriority.NONE` if there's no reserved motion.\n     */\n    reservePriority = MotionPriority.NONE;\n\n    /**\n     * Group of current motion.\n     */\n    currentGroup?: string;\n\n    /**\n     * Index of current motion in its group.\n     */\n    currentIndex?: number;\n\n    /**\n     * Group of the reserved motion.\n     */\n    reservedGroup?: string;\n\n    /**\n     * Index of the reserved motion in its group.\n     */\n    reservedIndex?: number;\n\n    /**\n     * Group of the reserved idle motion.\n     */\n    reservedIdleGroup?: string;\n\n    /**\n     * Index of the reserved idle motion in its group.\n     */\n    reservedIdleIndex?: number;\n\n    /**\n     * Reserves the playback for a motion.\n     * @param group - The motion group.\n     * @param index - Index in the motion group.\n     * @param priority - The priority to be applied.\n     * @return True if the reserving has succeeded.\n     */\n    reserve(group: string, index: number, priority: MotionPriority): boolean {\n        if (priority <= MotionPriority.NONE) {\n            logger.log(this.tag, `Cannot start a motion with MotionPriority.NONE.`);\n            return false;\n        }\n\n        if (group === this.currentGroup && index === this.currentIndex) {\n            logger.log(this.tag, `Motion is already playing.`, this.dump(group, index));\n            return false;\n        }\n\n        if ((group === this.reservedGroup && index === this.reservedIndex) || (group === this.reservedIdleGroup && index === this.reservedIdleIndex)) {\n            logger.log(this.tag, `Motion is already reserved.`, this.dump(group, index));\n            return false;\n        }\n\n        if (priority === MotionPriority.IDLE) {\n            if (this.currentPriority !== MotionPriority.NONE) {\n                logger.log(this.tag, `Cannot start idle motion because another motion is playing.`, this.dump(group, index));\n                return false;\n            }\n\n            if (this.reservedIdleGroup !== undefined) {\n                logger.log(this.tag, `Cannot start idle motion because another idle motion has reserved.`, this.dump(group, index));\n                return false;\n            }\n\n            this.setReservedIdle(group, index);\n        } else {\n            if (priority < MotionPriority.FORCE) {\n                if (priority <= this.currentPriority) {\n                    logger.log(this.tag, 'Cannot start motion because another motion is playing as an equivalent or higher priority.', this.dump(group, index));\n                    return false;\n                }\n\n                if (priority <= this.reservePriority) {\n                    logger.log(this.tag, 'Cannot start motion because another motion has reserved as an equivalent or higher priority.', this.dump(group, index));\n                    return false;\n                }\n            }\n\n            this.setReserved(group, index, priority);\n        }\n\n        return true;\n    }\n\n    /**\n     * Requests the playback for a motion.\n     * @param motion - The Motion, can be undefined.\n     * @param group - The motion group.\n     * @param index - Index in the motion group.\n     * @param priority - The priority to be applied.\n     * @return True if the request has been approved, i.e. the motion is allowed to play.\n     */\n    start(motion: any, group: string, index: number, priority: MotionPriority): boolean {\n        if (priority === MotionPriority.IDLE) {\n            this.setReservedIdle(undefined, undefined);\n\n            if (this.currentPriority !== MotionPriority.NONE) {\n                logger.log(this.tag, 'Cannot start idle motion because another motion is playing.', this.dump(group, index));\n                return false;\n            }\n        } else {\n            if (group !== this.reservedGroup || index !== this.reservedIndex) {\n                logger.log(this.tag, 'Cannot start motion because another motion has taken the place.', this.dump(group, index));\n                return false;\n            }\n\n            this.setReserved(undefined, undefined, MotionPriority.NONE);\n        }\n\n        if (!motion) {\n            return false;\n        }\n\n        this.setCurrent(group, index, priority);\n\n        return true;\n    }\n\n    /**\n     * Notifies the motion playback has finished.\n     */\n    complete() {\n        this.setCurrent(undefined, undefined, MotionPriority.NONE);\n    }\n\n    /**\n     * Sets the current motion.\n     */\n    setCurrent(group: string | undefined, index: number | undefined, priority: MotionPriority) {\n        this.currentPriority = priority;\n        this.currentGroup = group;\n        this.currentIndex = index;\n    }\n\n    /**\n     * Sets the reserved motion.\n     */\n    setReserved(group: string | undefined, index: number | undefined, priority: MotionPriority) {\n        this.reservePriority = priority;\n        this.reservedGroup = group;\n        this.reservedIndex = index;\n    }\n\n    /**\n     * Sets the reserved idle motion.\n     */\n    setReservedIdle(group: string | undefined, index: number | undefined) {\n        this.reservedIdleGroup = group;\n        this.reservedIdleIndex = index;\n    }\n\n    /**\n     * Checks if a Motion is currently playing or has reserved.\n     * @return True if active.\n     */\n    isActive(group: string, index: number): boolean {\n        return (group === this.currentGroup && index === this.currentIndex)\n            || (group === this.reservedGroup && index === this.reservedIndex)\n            || (group === this.reservedIdleGroup && index === this.reservedIdleIndex);\n    }\n\n    /**\n     * Resets the state.\n     */\n    reset() {\n        this.setCurrent(undefined, undefined, MotionPriority.NONE);\n\n        // make sure the reserved motions (if existing) won't start when they are loaded\n        this.setReserved(undefined, undefined, MotionPriority.NONE);\n        this.setReservedIdle(undefined, undefined);\n    }\n\n    /**\n     * Checks if an idle motion should be requests to play.\n     */\n    shouldRequestIdleMotion(): boolean {\n        return this.currentGroup === undefined && this.reservedIdleGroup === undefined;\n    }\n\n    /**\n     * Checks if the model's expression should be overridden by the motion.\n     */\n    shouldOverrideExpression(): boolean {\n        return this.currentPriority > MotionPriority.IDLE;\n    }\n\n    /**\n     * Dumps the state for debugging.\n     */\n    dump(requestedGroup?: string, requestedIndex?: number): string {\n        if (this.debug) {\n            const keys: (keyof this)[] = [\n                'currentPriority',\n                'reservePriority',\n                'currentGroup',\n                'currentIndex',\n                'reservedGroup',\n                'reservedIndex',\n                'reservedIdleGroup',\n                'reservedIdleIndex',\n            ];\n            return `\\n<Requested> group = \"${requestedGroup}\", index = ${requestedIndex}\\n` + keys.map(key => '[' + key + '] ' + this[key]).join('\\n');\n        }\n        return '';\n    }\n}\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","import { ModelSettings } from '@/cubism-common/ModelSettings';\nimport { MotionManagerOptions } from '@/cubism-common/MotionManager';\nimport { logger } from '@/utils';\nimport { EventEmitter } from '@pixi/utils';\n\n/**\n * Abstract expression manager.\n * @emits {@link ExpressionManagerEvents}\n */\nexport abstract class ExpressionManager<Expression = any, ExpressionSpec = any> extends EventEmitter {\n    /**\n     * Tag for logging.\n     */\n    tag: string;\n\n    /**\n     * Expression definitions copied from ModelSettings.\n     */\n    abstract readonly definitions: ExpressionSpec[];\n\n    /**\n     * The ModelSettings reference.\n     */\n    readonly settings: ModelSettings;\n\n    /**\n     * The Expressions. The structure is the same as {@link definitions}, initially there's only\n     * an empty array, which means all expressions will be `undefined`. When an Expression has\n     * been loaded, it'll fill the place in which it should be; when it fails to load,\n     * the place will be filled with `null`.\n     */\n    expressions: (Expression | null | undefined)[] = [];\n\n    /**\n     * An empty Expression to reset all the expression parameters.\n     */\n    defaultExpression!: Expression;\n\n    /**\n     * Current Expression. This will not be overwritten by the {@link defaultExpression}.\n     */\n    currentExpression!: Expression;\n\n    /**\n     * The pending Expression.\n     */\n    reserveExpressionIndex = -1;\n\n    /**\n     * Flags the instance has been destroyed.\n     */\n    destroyed = false;\n\n    protected constructor(settings: ModelSettings, options?: MotionManagerOptions) {\n        super();\n        this.settings = settings;\n        this.tag = `ExpressionManager(${settings.name})`;\n    }\n\n    /**\n     * Should be called in the constructor of derived class.\n     */\n    protected init() {\n        this.defaultExpression = this.createExpression({}, undefined);\n        this.currentExpression = this.defaultExpression;\n\n        this.stopAllExpressions();\n    }\n\n    /**\n     * Loads an Expression. Errors in this method will not be thrown,\n     * but be emitted with an \"expressionLoadError\" event.\n     * @param index - Index of the expression in definitions.\n     * @return Promise that resolves with the Expression, or with undefined if it can't be loaded.\n     * @emits {@link ExpressionManagerEvents.expressionLoaded}\n     * @emits {@link ExpressionManagerEvents.expressionLoadError}\n     */\n    protected async loadExpression(index: number): Promise<Expression | undefined> {\n        if (!this.definitions[index]) {\n            logger.warn(this.tag, `Undefined expression at [${index}]`);\n            return undefined;\n        }\n\n        if (this.expressions[index] === null) {\n            logger.warn(this.tag, `Cannot set expression at [${index}] because it's already failed in loading.`);\n            return undefined;\n        }\n\n        if (this.expressions[index]) {\n            return this.expressions[index] as Expression;\n        }\n\n        const expression = await this._loadExpression(index);\n\n        this.expressions[index] = expression;\n\n        return expression;\n    }\n\n    /**\n     * Loads the Expression. Will be implemented by Live2DFactory.\n     * @ignore\n     */\n    private _loadExpression(index: number): Promise<Expression | undefined> {\n        throw new Error('Not implemented.');\n    }\n\n    /**\n     * Sets a random Expression that differs from current one.\n     * @return Promise that resolves with true if succeeded, with false otherwise.\n     */\n    async setRandomExpression(): Promise<boolean> {\n        if (this.definitions.length) {\n            const availableIndices = [];\n\n            for (let i = 0; i < this.definitions.length; i++) {\n                if (\n                    this.expressions[i] !== null\n                    && this.expressions[i] !== this.currentExpression\n                    && i !== this.reserveExpressionIndex\n                ) {\n                    availableIndices.push(i);\n                }\n            }\n\n            if (availableIndices.length) {\n                const index = Math.floor(Math.random() * availableIndices.length);\n\n                return this.setExpression(index);\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Resets model's expression using {@link defaultExpression}.\n     */\n    resetExpression(): void {\n        this._setExpression(this.defaultExpression);\n    }\n\n    /**\n     * Restores model's expression to {@link currentExpression}.\n     */\n    restoreExpression(): void {\n        this._setExpression(this.currentExpression);\n    }\n\n    /**\n     * Sets an Expression.\n     * @param index - Either the index, or the name of the expression.\n     * @return Promise that resolves with true if succeeded, with false otherwise.\n     */\n    async setExpression(index: number | string): Promise<boolean> {\n        if (typeof index !== 'number') {\n            index = this.getExpressionIndex(index);\n        }\n\n        if (!(index > -1 && index < this.definitions.length)) {\n            return false;\n        }\n\n        if (index === this.expressions.indexOf(this.currentExpression)) {\n            return false;\n        }\n\n        this.reserveExpressionIndex = index;\n\n        const expression = await this.loadExpression(index);\n\n        if (!expression || this.reserveExpressionIndex !== index) {\n            return false;\n        }\n\n        this.reserveExpressionIndex = -1;\n        this.currentExpression = expression;\n        this._setExpression(expression);\n\n        return true;\n    }\n\n    /**\n     * Updates parameters of the core model.\n     * @return True if the parameters are actually updated.\n     */\n    update(model: object, now: DOMHighResTimeStamp) {\n        if (!this.isFinished()) {\n            return this.updateParameters(model, now);\n        }\n\n        return false;\n    }\n\n    /**\n     * Destroys the instance.\n     * @emits {@link ExpressionManagerEvents.destroy}\n     */\n    destroy() {\n        this.destroyed = true;\n        this.emit('destroy');\n\n        const self = this as Mutable<Partial<this>>;\n        self.definitions = undefined;\n        self.expressions = undefined;\n    }\n\n    /**\n     * Checks if the expression playback has finished.\n     */\n    abstract isFinished(): boolean;\n\n    /**\n     * Retrieves the expression's index by its name.\n     * @return The index. `-1` if not found.\n     */\n    abstract getExpressionIndex(name: string): number;\n\n    /**\n     * Retrieves the expression's file path by its definition.\n     * @return The file path extracted from given definition. Not resolved.\n     */\n    abstract getExpressionFile(definition: ExpressionSpec): string;\n\n    /**\n     * Creates an Expression from the data.\n     * @param data - Content of the expression file.\n     * @param definition - The expression definition. Can be undefined when creating the {@link defaultExpression}.\n     * @return The created Expression.\n     */\n    abstract createExpression(data: JSONObject, definition: ExpressionSpec | undefined): Expression;\n\n    /**\n     * Applies the Expression to the model.\n     */\n    protected abstract _setExpression(motion: Expression): number;\n\n    /**\n     * Cancels expression playback.\n     */\n    protected abstract stopAllExpressions(): void;\n\n    /**\n     * Updates parameters of the core model.\n     * @return True if the parameters are actually updated.\n     */\n    protected abstract updateParameters(model: object, now: DOMHighResTimeStamp): boolean;\n}\n","import { folderName } from '@/utils';\nimport { url } from '@pixi/utils';\n\n/**\n * Parses, and provides access to the settings JSON.\n */\nexport abstract class ModelSettings {\n    json: JSONObject;\n\n    /**\n     * The model's name, typically used for displaying or logging. By default it's inferred from\n     * the URL by taking the folder name (the second to last component). In Cubism 2 it'll be overwritten\n     * by the `name` field of settings JSON.\n     */\n    name: string;\n\n    /**\n     * URL of the model settings file, used to resolve paths of the resource files defined in settings.\n     * This typically ends with `.model.json` in Cubism 2 and `.model3.json` in Cubism 4.\n     */\n    url: string;\n\n    /**\n     * Relative path of he moc file, typically ends with `.moc` in Cubism 2 and `.moc3` in Cubism 4.\n     */\n    abstract moc: string;\n\n    /**\n     * Relative paths of the texture images.\n     */\n    abstract textures: string[];\n\n    /**\n     * Relative path of the pose file.\n     */\n    pose?: string;\n\n    /**\n     * Relative path of the physics file.\n     */\n    physics?: string;\n\n    /**\n     * @param json - The settings JSON object.\n     * @param json.url - The `url` field must be defined to specify the settings file's URL.\n     */\n    protected constructor(json: JSONObject & { url: string }) {\n        this.json = json;\n\n        let url = (json as any).url;\n\n        if (typeof url !== 'string') {\n            // this is not allowed because it'll typically result in errors, including a\n            // fatal error - an OOM that crashes the browser while initializing this cubism2 model,\n            // I'm not kidding!\n            throw new TypeError('The `url` field in settings JSON must be defined as a string.');\n        }\n\n        this.url = url;\n\n        // set default name to folder's name\n        this.name = folderName(this.url);\n    }\n\n    /**\n     * Resolves a relative path using the {@link url}. This is used to resolve the resource files\n     * defined in the settings.\n     * @param path - Relative path.\n     * @return Resolved path.\n     */\n    resolveURL(path: string): string {\n        return url.resolve(this.url, path);\n    }\n\n    /**\n     * Replaces the resource files by running each file through the `replacer`.\n     * @param replacer - Invoked with two arguments: `(file, path)`, where `file` is the file definition,\n     * and `path` is its property path in the ModelSettings instance. A string must be returned to be the replacement.\n     *\n     * ```js\n     * modelSettings.replaceFiles((file, path) => {\n     *     // file = \"foo.moc\", path = \"moc\"\n     *     // file = \"foo.png\", path = \"textures[0]\"\n     *     // file = \"foo.mtn\", path = \"motions.idle[0].file\"\n     *     // file = \"foo.motion3.json\", path = \"motions.idle[0].File\"\n     *\n     *     return \"bar/\" + file;\n     * });\n     * ```\n     */\n    replaceFiles(replacer: (file: string, path: string) => string) {\n        this.moc = replacer(this.moc, 'moc');\n\n        if (this.pose !== undefined) {\n            (this.pose = replacer(this.pose, 'pose'));\n        }\n\n        if (this.physics !== undefined) {\n            (this.physics = replacer(this.physics, 'physics'));\n        }\n\n        for (let i = 0; i < this.textures.length; i++) {\n            this.textures[i] = replacer(this.textures[i]!, `textures[${i}]`);\n        }\n    };\n\n    /**\n     * Retrieves all resource files defined in the settings.\n     * @return A flat array of the paths of all resource files.\n     *\n     * ```js\n     * modelSettings.getDefinedFiles();\n     * // returns: [\"foo.moc\", \"foo.png\", ...]\n     * ```\n     */\n    getDefinedFiles(): string[] {\n        const files: string[] = [];\n\n        this.replaceFiles((file: string) => {\n            files.push(file);\n\n            return file;\n        });\n\n        return files;\n    }\n\n    /**\n     * Validates that the files defined in the settings exist in given files. Each file will be\n     * resolved by {@link resolveURL} before comparison.\n     * @param files - A flat array of file paths.\n     * @return All the files which are defined in the settings and also exist in given files,\n     * *including the optional files*.\n     * @throws Error if any *essential* file is defined in settings but not included in given files.\n     */\n    validateFiles(files: string[]): string[] {\n        const assertFileExists = (expectedFile: string, shouldThrow: boolean): boolean => {\n            const actualPath = this.resolveURL(expectedFile);\n\n            if (!files.includes(actualPath)) {\n                if (shouldThrow) {\n                    throw new Error(`File \"${expectedFile}\" is defined in settings, but doesn't exist in given files`);\n                }\n\n                return false;\n            }\n\n            return true;\n        };\n\n        const essentialFiles = [this.moc, ...this.textures];\n\n        essentialFiles.forEach(texture => assertFileExists(texture, true));\n\n        const definedFiles = this.getDefinedFiles();\n\n        return definedFiles.filter(file => assertFileExists(file, false));\n    }\n}\n","import { config } from '@/config';\nimport { ExpressionManager } from '@/cubism-common/ExpressionManager';\nimport { ModelSettings } from '@/cubism-common/ModelSettings';\nimport { MotionPriority, MotionState } from '@/cubism-common/MotionState';\nimport { SoundManager } from '@/cubism-common/SoundManager';\nimport { logger } from '@/utils';\nimport { EventEmitter } from '@pixi/utils';\n\nexport interface MotionManagerOptions {\n    /**\n     * How to preload the motions.\n     * @default {@link MotionPreloadStrategy.NONE}\n     */\n    motionPreload?: MotionPreloadStrategy;\n\n    /**\n     * Specifies the idle motion group.\n     * @default \"idle\" in Cubism 2 and \"Idle\" in Cubism 4.\n     */\n    idleMotionGroup?: string;\n}\n\n/**\n * Indicates how the motions will be preloaded.\n */\nexport enum MotionPreloadStrategy {\n    /** Preload all the motions. */\n    ALL = 'ALL',\n\n    /** Preload only the idle motions. */\n    IDLE = 'IDLE',\n\n    /** No preload. */\n    NONE = 'NONE',\n}\n\n/**\n * Handles the motion playback.\n * @emits {@link MotionManagerEvents}\n */\nexport abstract class MotionManager<Motion = any, MotionSpec = any> extends EventEmitter {\n    /**\n     * Tag for logging.\n     */\n    tag: string;\n\n    /**\n     * Motion definitions copied from ModelSettings.\n     */\n    abstract readonly definitions: Partial<Record<string, MotionSpec[]>>;\n\n    /**\n     * Motion groups with particular internal usages. Currently there's only the `idle` field,\n     * which specifies the actual name of the idle motion group, so the idle motions\n     * can be correctly found from the settings JSON of various Cubism versions.\n     */\n    abstract readonly groups: { idle: string };\n\n    /**\n     * Indicates the content type of the motion files, varies in different Cubism versions.\n     * This will be used as `xhr.responseType`.\n     */\n    abstract readonly motionDataType: 'json' | 'arraybuffer';\n\n    /**\n     * Can be undefined if the settings defines no expression.\n     */\n    abstract expressionManager?: ExpressionManager;\n\n    /**\n     * The ModelSettings reference.\n     */\n    readonly settings: ModelSettings;\n\n    /**\n     * The Motions. The structure is the same as {@link definitions}, initially each group contains\n     * an empty array, which means all motions will be `undefined`. When a Motion has been loaded,\n     * it'll fill the place in which it should be; when it fails to load, the place will be filled\n     * with `null`.\n     */\n    motionGroups: Partial<Record<string, (Motion | undefined | null)[]>> = {};\n\n    /**\n     * Maintains the state of this MotionManager.\n     */\n    state = new MotionState();\n\n    /**\n     * Audio element of the current motion if a sound file is defined with it.\n     */\n    currentAudio?: HTMLAudioElement;\n\n    /**\n     * Flags there's a motion playing.\n     */\n    playing = false;\n\n    /**\n     * Flags the instances has been destroyed.\n     */\n    destroyed = false;\n\n    protected constructor(settings: ModelSettings, options?: MotionManagerOptions) {\n        super();\n        this.settings = settings;\n        this.tag = `MotionManager(${settings.name})`;\n        this.state.tag = this.tag;\n    }\n\n    /**\n     * Should be called in the constructor of derived class.\n     */\n    protected init(options?: MotionManagerOptions) {\n        if (options?.idleMotionGroup) {\n            this.groups.idle = options.idleMotionGroup;\n        }\n\n        this.setupMotions(options);\n        this.stopAllMotions();\n    }\n\n    /**\n     * Sets up motions from the definitions, and preloads them according to the preload strategy.\n     */\n    protected setupMotions(options?: MotionManagerOptions): void {\n        for (const group of Object.keys(this.definitions)) {\n            // init with the same structure of definitions\n            this.motionGroups[group] = [];\n        }\n\n        // preload motions\n\n        let groups;\n\n        switch (options?.motionPreload) {\n            case MotionPreloadStrategy.NONE:\n                return;\n\n            case MotionPreloadStrategy.ALL:\n                groups = Object.keys(this.definitions);\n                break;\n\n            case MotionPreloadStrategy.IDLE:\n            default:\n                groups = [this.groups.idle];\n                break;\n        }\n\n        for (const group of groups) {\n            if (this.definitions[group]) {\n                for (let i = 0; i < this.definitions[group]!.length; i++) {\n                    this.loadMotion(group, i).then();\n                }\n            }\n        }\n    }\n\n    /**\n     * Loads a Motion in a motion group. Errors in this method will not be thrown,\n     * but be emitted with a \"motionLoadError\" event.\n     * @param group - The motion group.\n     * @param index - Index in the motion group.\n     * @return Promise that resolves with the Motion, or with undefined if it can't be loaded.\n     * @emits {@link MotionManagerEvents.motionLoaded}\n     * @emits {@link MotionManagerEvents.motionLoadError}\n     */\n    async loadMotion(group: string, index: number): Promise<Motion | undefined> {\n        if (!this.definitions[group] ?. [index]) {\n            logger.warn(this.tag, `Undefined motion at \"${group}\"[${index}]`);\n            return undefined;\n        }\n\n        if (this.motionGroups[group]![index] === null) {\n            logger.warn(this.tag, `Cannot start motion at \"${group}\"[${index}] because it's already failed in loading.`);\n            return undefined;\n        }\n\n        if (this.motionGroups[group]![index]) {\n            return this.motionGroups[group]![index]!;\n        }\n\n        const motion = await this._loadMotion(group, index);\n\n        if (this.destroyed) {\n            return;\n        }\n\n        this.motionGroups[group]![index] = motion ?? null;\n\n        return motion;\n    }\n\n    // TODO: remove\n    /**\n     * Loads the Motion. Will be implemented by Live2DFactory.\n     * @ignore\n     */\n    private _loadMotion(group: string, index: number): Promise<Motion | undefined> {\n        throw new Error('Not implemented.');\n    }\n\n    /**\n     * Starts a motion as given priority.\n     * @param group - The motion group.\n     * @param index - Index in the motion group.\n     * @param priority - The priority to be applied.\n     * @return Promise that resolves with true if the motion is successfully started, with false otherwise.\n     */\n    async startMotion(group: string, index: number, priority = MotionPriority.NORMAL): Promise<boolean> {\n        if (!this.state.reserve(group, index, priority)) {\n            return false;\n        }\n\n        const definition = this.definitions[group]?.[index];\n\n        if (!definition) {\n            return false;\n        }\n\n        if (this.currentAudio) {\n            // TODO: reuse the audio?\n            SoundManager.dispose(this.currentAudio);\n        }\n\n        let audio: HTMLAudioElement | undefined;\n\n        if (config.sound) {\n            const soundURL = this.getSoundFile(definition);\n\n            if (soundURL) {\n                try {\n                    // start to load the audio\n                    audio = SoundManager.add(\n                        this.settings.resolveURL(soundURL),\n                        () => this.currentAudio = undefined,\n                        () => this.currentAudio = undefined,\n                    );\n\n                    this.currentAudio = audio;\n                } catch (e) {\n                    logger.warn(this.tag, 'Failed to create audio', soundURL, e);\n                }\n            }\n        }\n\n        const motion = await this.loadMotion(group, index);\n\n        if (audio) {\n            const readyToPlay = SoundManager.play(audio)\n                .catch(e => logger.warn(this.tag, 'Failed to play audio', audio!.src, e));\n\n            if (config.motionSync) {\n                // wait until the audio is ready\n                await readyToPlay;\n            }\n        }\n\n        if (!this.state.start(motion, group, index, priority)) {\n            if (audio) {\n                SoundManager.dispose(audio);\n                this.currentAudio = undefined;\n            }\n\n            return false;\n        }\n\n        logger.log(this.tag, 'Start motion:', this.getMotionName(definition));\n\n        this.emit('motionStart', group, index, audio);\n\n        if (this.state.shouldOverrideExpression()) {\n            this.expressionManager && this.expressionManager.resetExpression();\n        }\n\n        this.playing = true;\n\n        this._startMotion(motion!);\n\n        return true;\n    }\n\n    /**\n     * Starts a random Motion as given priority.\n     * @param group - The motion group.\n     * @param priority - The priority to be applied.\n     * @return Promise that resolves with true if the motion is successfully started, with false otherwise.\n     */\n    async startRandomMotion(group: string, priority?: MotionPriority): Promise<boolean> {\n        const groupDefs = this.definitions[group];\n\n        if (groupDefs?.length) {\n            const availableIndices = [];\n\n            for (let i = 0; i < groupDefs!.length; i++) {\n                if (this.motionGroups[group]![i] !== null && !this.state.isActive(group, i)) {\n                    availableIndices.push(i);\n                }\n            }\n\n            if (availableIndices.length) {\n                const index = Math.floor(Math.random() * availableIndices.length);\n\n                return this.startMotion(group, availableIndices[index]!, priority);\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Stops all playing motions as well as the sound.\n     */\n    stopAllMotions(): void {\n        this._stopAllMotions();\n\n        this.state.reset();\n\n        if (this.currentAudio) {\n            SoundManager.dispose(this.currentAudio);\n            this.currentAudio = undefined;\n        }\n    }\n\n    /**\n     * Updates parameters of the core model.\n     * @param model - The core model.\n     * @param now - Current time in milliseconds.\n     * @return True if the parameters have been actually updated.\n     */\n    update(model: object, now: DOMHighResTimeStamp): boolean {\n        if (this.isFinished()) {\n            if (this.playing) {\n                this.playing = false;\n                this.emit('motionFinish');\n            }\n\n            if (this.state.shouldOverrideExpression()) {\n                this.expressionManager?.restoreExpression();\n            }\n\n            this.state.complete();\n\n            if (this.state.shouldRequestIdleMotion()) {\n                // noinspection JSIgnoredPromiseFromCall\n                this.startRandomMotion(this.groups.idle, MotionPriority.IDLE);\n            }\n        }\n\n        let updated = this.updateParameters(model, now);\n\n        updated = this.expressionManager?.update(model, now) || updated;\n\n        return updated;\n    }\n\n    /**\n     * Destroys the instance.\n     * @emits {@link MotionManagerEvents.destroy}\n     */\n    destroy() {\n        this.destroyed = true;\n        this.emit('destroy');\n\n        this.stopAllMotions();\n        this.expressionManager?.destroy();\n\n        const self = this as Mutable<Partial<this>>;\n        self.definitions = undefined;\n        self.motionGroups = undefined;\n    }\n\n    /**\n     * Checks if the motion playback has finished.\n     */\n    abstract isFinished(): boolean;\n\n    /**\n     * Creates a Motion from the data.\n     * @param data - Content of the motion file. The format must be consistent with {@link motionDataType}.\n     * @param group - The motion group.\n     * @param definition - The motion definition.\n     * @return The created Motion.\n     */\n    abstract createMotion(data: ArrayBuffer | JSONObject, group: string, definition: MotionSpec): Motion;\n\n    /**\n     * Retrieves the motion's file path by its definition.\n     * @return The file path extracted from given definition. Not resolved.\n     */\n    abstract getMotionFile(definition: MotionSpec): string;\n\n    /**\n     * Retrieves the motion's name by its definition.\n     * @return The motion's name.\n     */\n    protected abstract getMotionName(definition: MotionSpec): string;\n\n    /**\n     * Retrieves the motion's sound file by its definition.\n     * @return The motion's sound file, can be undefined.\n     */\n    protected abstract getSoundFile(definition: MotionSpec): string | undefined;\n\n    /**\n     * Starts the Motion.\n     */\n    protected abstract _startMotion(motion: Motion, onFinish?: (motion: Motion) => void): number;\n\n    /**\n     * Stops all playing motions.\n     */\n    protected abstract _stopAllMotions(): void;\n\n    /**\n     * Updates parameters of the core model.\n     * @param model - The core model.\n     * @param now - Current time in milliseconds.\n     * @return True if the parameters have been actually updated.\n     */\n    protected abstract updateParameters(model: object, now: DOMHighResTimeStamp): boolean;\n}\n","import { LOGICAL_HEIGHT, LOGICAL_WIDTH } from '@/cubism-common/constants';\nimport { FocusController } from '@/cubism-common/FocusController';\nimport { ModelSettings } from '@/cubism-common/ModelSettings';\nimport { MotionManager, MotionManagerOptions } from '@/cubism-common/MotionManager';\nimport { Matrix } from '@pixi/math';\nimport { EventEmitter } from '@pixi/utils';\n\n/**\n * Common layout definition shared between all Cubism versions.\n */\nexport interface CommonLayout {\n    centerX?: number;\n    centerY?: number;\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n}\n\n/**\n * Common hit area definition shared between all Cubism versions.\n */\nexport interface CommonHitArea {\n    id: string;\n    name: string;\n    index: number;\n}\n\nexport interface Bounds {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\nexport interface InternalModelOptions extends MotionManagerOptions {}\n\nconst tempBounds: Bounds = { x: 0, y: 0, width: 0, height: 0 };\n\n/**\n * A wrapper that manages the states of a Live2D core model, and delegates all operations to it.\n * @emits {@link InternalModelEvents}\n */\nexport abstract class InternalModel extends EventEmitter {\n    /**\n     * The managed Live2D core model.\n     */\n    abstract readonly coreModel: object;\n\n    abstract readonly settings: ModelSettings;\n\n    focusController = new FocusController();\n\n    abstract motionManager: MotionManager;\n\n    pose?: any;\n    physics?: any;\n\n    /**\n     * Original canvas width of the model. Note this doesn't represent the model's real size,\n     * as the model can overflow from its canvas.\n     */\n    readonly originalWidth: number = 0;\n\n    /**\n     * Original canvas height of the model. Note this doesn't represent the model's real size,\n     * as the model can overflow from its canvas.\n     */\n    readonly originalHeight: number = 0;\n\n    /**\n     * Canvas width of the model, scaled by the `width` of the model's layout.\n     */\n    readonly width: number = 0;\n\n    /**\n     * Canvas height of the model, scaled by the `height` of the model's layout.\n     */\n    readonly height: number = 0;\n\n    /**\n     * Local transformation, calculated from the model's layout.\n     */\n    localTransform = new Matrix();\n\n    /**\n     * The final matrix to draw the model.\n     */\n    drawingMatrix = new Matrix();\n\n    // TODO: change structure\n    /**\n     * The hit area definitions, keyed by their names.\n     */\n    hitAreas: Record<string, CommonHitArea> = {};\n\n    /**\n     * Flags whether `gl.UNPACK_FLIP_Y_WEBGL` should be enabled when binding the textures.\n     */\n    textureFlipY = false;\n\n    /**\n     * WebGL viewport when drawing the model. The format is `[x, y, width, height]`.\n     */\n    viewport: [number, number, number, number] = [0, 0, 0, 0];\n\n    /**\n     * Flags this instance has been destroyed.\n     */\n    destroyed = false;\n\n    /**\n     * Should be called in the constructor of derived class.\n     */\n    protected init() {\n        this.setupLayout();\n        this.setupHitAreas();\n    }\n\n    /**\n     * Sets up the model's size and local transform by the model's layout.\n     */\n    protected setupLayout() {\n        // cast `this` to be mutable\n        const self = this as Mutable<this>;\n\n        const size = this.getSize();\n\n        self.originalWidth = size[0];\n        self.originalHeight = size[1];\n\n        const layout = Object.assign(\n            {\n                width: LOGICAL_WIDTH,\n                height: LOGICAL_HEIGHT,\n            },\n            this.getLayout(),\n        );\n\n        this.localTransform.scale(layout.width / LOGICAL_WIDTH, layout.height / LOGICAL_HEIGHT);\n\n        self.width = this.originalWidth * this.localTransform.a;\n        self.height = this.originalHeight * this.localTransform.d;\n\n        // this calculation differs from Live2D SDK...\n        const offsetX = (layout.x !== undefined && layout.x - layout.width / 2)\n            || (layout.centerX !== undefined && layout.centerX)\n            || (layout.left !== undefined && layout.left - layout.width / 2)\n            || (layout.right !== undefined && layout.right + layout.width / 2)\n            || 0;\n\n        const offsetY = (layout.y !== undefined && layout.y - layout.height / 2)\n            || (layout.centerY !== undefined && layout.centerY)\n            || (layout.top !== undefined && layout.top - layout.height / 2)\n            || (layout.bottom !== undefined && layout.bottom + layout.height / 2)\n            || 0;\n\n        this.localTransform.translate(this.width * offsetX, -this.height * offsetY);\n    }\n\n    /**\n     * Sets up the hit areas by their definitions in settings.\n     */\n    protected setupHitAreas() {\n        const definitions = this.getHitAreaDefs().filter(hitArea => hitArea.index >= 0);\n\n        for (const def of definitions) {\n            this.hitAreas[def.name] = def;\n        }\n    }\n\n    /**\n     * Hit-test on the model.\n     * @param x - Position in model canvas.\n     * @param y - Position in model canvas.\n     * @return The names of the *hit* hit areas. Can be empty if none is hit.\n     */\n    hitTest(x: number, y: number): string[] {\n        return Object.keys(this.hitAreas).filter(hitAreaName => this.isHit(hitAreaName, x, y));\n    }\n\n    /**\n     * Hit-test for a single hit area.\n     * @param hitAreaName - The hit area's name.\n     * @param x - Position in model canvas.\n     * @param y - Position in model canvas.\n     * @return True if hit.\n     */\n    isHit(hitAreaName: string, x: number, y: number): boolean {\n        if (!this.hitAreas[hitAreaName]) {\n            return false;\n        }\n\n        const drawIndex = this.hitAreas[hitAreaName]!.index;\n\n        const bounds = this.getDrawableBounds(drawIndex, tempBounds);\n\n        return bounds.x <= x && x <= bounds.x + bounds.width && bounds.y <= y && y <= bounds.y + bounds.height;\n    }\n\n    /**\n     * Gets a drawable's bounds.\n     * @param index - Index of the drawable.\n     * @param bounds - Object to store the output values.\n     * @return The bounds in model canvas space.\n     */\n    getDrawableBounds(index: number, bounds?: Bounds): Bounds {\n        const vertices = this.getDrawableVertices(index);\n\n        let left = vertices[0]!;\n        let right = vertices[0]!;\n        let top = vertices[1]!;\n        let bottom = vertices[1]!;\n\n        for (let i = 0; i < vertices.length; i += 2) {\n            const vx = vertices[i]!;\n            const vy = vertices[i + 1]!;\n\n            left = Math.min(vx, left);\n            right = Math.max(vx, right);\n            top = Math.min(vy, top);\n            bottom = Math.max(vy, bottom);\n        }\n\n        bounds ??= {} as Bounds;\n\n        bounds.x = left;\n        bounds.y = top;\n        bounds.width = right - left;\n        bounds.height = bottom - top;\n\n        return bounds;\n    }\n\n    /**\n     * Updates the model's transform.\n     * @param transform - The world transform.\n     */\n    updateTransform(transform: Matrix) {\n        this.drawingMatrix.copyFrom(transform).append(this.localTransform);\n    }\n\n    /**\n     * Updates the model's parameters.\n     * @param dt - Elapsed time in milliseconds from last frame.\n     * @param now - Current time in milliseconds.\n     */\n    update(dt: DOMHighResTimeStamp, now: DOMHighResTimeStamp): void {\n        this.focusController.update(dt);\n    };\n\n    /**\n     * Destroys the model and all related resources.\n     * @emits {@link InternalModelEvents.destroy | destroy}\n     */\n    destroy() {\n        this.destroyed = true;\n        this.emit('destroy');\n\n        this.motionManager.destroy();\n        (this as Partial<this>).motionManager = undefined;\n    }\n\n    /**\n     * Gets all the hit area definitions.\n     * @return Normalized definitions.\n     */\n    protected abstract getHitAreaDefs(): CommonHitArea[];\n\n    /**\n     * Gets the model's original canvas size.\n     * @return `[width, height]`\n     */\n    protected abstract getSize(): [number, number];\n\n    /**\n     * Gets the layout definition.\n     * @return Normalized definition.\n     */\n    protected abstract getLayout(): CommonLayout;\n\n    /**\n     * Gets all the drawables' IDs.\n     * @return IDs.\n     */\n    abstract getDrawableIDs(): string[];\n\n    /**\n     * Finds the index of a drawable by its ID.\n     * @return The index.\n     */\n    abstract getDrawableIndex(id: string): number;\n\n    /**\n     * Gets a drawable's vertices.\n     * @param index - Either the index or the ID of the drawable.\n     * @throws Error when the drawable cannot be found.\n     */\n    abstract getDrawableVertices(index: number | string): Float32Array;\n\n    /**\n     * Updates WebGL context bound to this model.\n     * @param gl - WebGL context.\n     * @param glContextID - Unique ID for given WebGL context.\n     */\n    abstract updateWebGLContext(gl: WebGLRenderingContext, glContextID: number): void;\n\n    /**\n     * Binds a texture to the model. The index must be the same as that of this texture\n     * in the {@link ModelSettings.textures} array.\n     */\n    abstract bindTexture(index: number, texture: WebGLTexture): void;\n\n    /**\n     * Draws the model.\n     */\n    abstract draw(gl: WebGLRenderingContext): void;\n}\n","import { clamp } from '@/utils';\n\n// Minimum distance to respond\nconst EPSILON = 0.01;\n\nconst MAX_SPEED = 40 / 7.5;\n\n// the time to accelerate to max speed\nconst ACCELERATION_TIME = 1 / (0.15 * 1000);\n\n/**\n * Interpolates the transition of focus position.\n */\nexport class FocusController {\n    /** The focus position. */\n    targetX = 0;\n\n    /** The focus position. */\n    targetY = 0;\n\n    /** Current position. */\n    x = 0;\n\n    /** Current position. */\n    y = 0;\n\n    /** Current velocity. */\n    vx = 0;\n\n    /** Current velocity. */\n    vy = 0;\n\n    /**\n     * Sets the focus position.\n     * @param x - X position in range `[-1, 1]`.\n     * @param y - Y position in range `[-1, 1]`.\n     * @param instant - Should the focus position be instantly applied.\n     */\n    focus(x: number, y: number, instant: boolean = false) {\n        this.targetX = clamp(x, -1, 1);\n        this.targetY = clamp(y, -1, 1);\n\n        if (instant) {\n            this.x = this.targetX;\n            this.y = this.targetY;\n        }\n    }\n\n    /**\n     * Updates the interpolation.\n     * @param dt - Delta time in milliseconds.\n     */\n    update(dt: DOMHighResTimeStamp) {\n        const dx = this.targetX - this.x;\n        const dy = this.targetY - this.y;\n\n        if (Math.abs(dx) < EPSILON && Math.abs(dy) < EPSILON) return;\n\n        const d = Math.sqrt(dx ** 2 + dy ** 2);\n        const maxSpeed = MAX_SPEED / (1000 / dt);\n\n        let ax = maxSpeed * (dx / d) - this.vx;\n        let ay = maxSpeed * (dy / d) - this.vy;\n\n        const a = Math.sqrt(ax ** 2 + ay ** 2);\n        const maxA = maxSpeed * ACCELERATION_TIME * dt;\n\n        if (a > maxA) {\n            ax *= maxA / a;\n            ay *= maxA / a;\n        }\n\n        this.vx += ax;\n        this.vy += ay;\n\n        const v = Math.sqrt(this.vx ** 2 + this.vy ** 2);\n        const maxV = 0.5 * (Math.sqrt(maxA ** 2 + 8 * maxA * d) - maxA);\n\n        if (v > maxV) {\n            this.vx *= maxV / v;\n            this.vy *= maxV / v;\n        }\n\n        this.x += this.vx;\n        this.y += this.vy;\n    }\n}\n","import { Live2DLoaderContext, Live2DLoaderTarget } from '@/factory/Live2DLoader';\nimport { logger } from '@/utils';\nimport { Middleware } from '@/utils/middleware';\n\nconst TAG = 'XHRLoader';\n\nclass NetworkError extends Error {\n    constructor(message: string, public url: string, public status: number, public aborted = false) {\n        super(message);\n    }\n}\n\n/**\n * The basic XHR loader.\n *\n * A network error will be thrown with the following properties:\n * - `url` - The request URL.\n * - `status` - The HTTP status.\n * - `aborted` - True if the error is caused by aborting the XHR.\n */\nexport class XHRLoader {\n    /**\n     * All the created XHRs, keyed by their owners respectively.\n     */\n    static xhrMap = new WeakMap<Live2DLoaderTarget, Set<XMLHttpRequest>>();\n\n    /**\n     * All the created XHRs as a flat array.\n     */\n    static allXhrSet = new Set<XMLHttpRequest>();\n\n    /**\n     * Middleware for Live2DLoader.\n     */\n    static loader: Middleware<Live2DLoaderContext> = (context, next) => {\n        return new Promise<void>((resolve, reject) => {\n            const xhr = XHRLoader.createXHR(\n                context.target,\n                context.settings ? context.settings.resolveURL(context.url) : context.url,\n                context.type,\n                data => {\n                    context.result = data;\n                    resolve();\n                },\n                reject,\n            );\n            xhr.send();\n        });\n    };\n\n    /**\n     * Creates a managed XHR.\n     * @param target - If provided, the XHR will be canceled when receiving an \"destroy\" event from the target.\n     * @param url - The URL.\n     * @param type - The XHR response type.\n     * @param onload - Load listener.\n     * @param onerror - Error handler.\n     */\n    static createXHR<T = any>(\n        target: Live2DLoaderTarget | undefined,\n        url: string,\n        type: XMLHttpRequestResponseType,\n        onload: (data: T) => void,\n        onerror: (e: Error) => void,\n    ): XMLHttpRequest {\n        const xhr = new XMLHttpRequest();\n\n        XHRLoader.allXhrSet.add(xhr);\n\n        if (target) {\n            let xhrSet = XHRLoader.xhrMap.get(target);\n\n            if (!xhrSet) {\n                xhrSet = new Set([xhr]);\n                XHRLoader.xhrMap.set(target, xhrSet);\n            } else {\n                xhrSet.add(xhr);\n            }\n\n            if (!target.listeners('destroy').includes(XHRLoader.cancelXHRs)) {\n                target.once('destroy', XHRLoader.cancelXHRs);\n            }\n        }\n\n        xhr.open('GET', url);\n        xhr.responseType = type;\n        xhr.onload = () => {\n            if ((xhr.status === 200 || xhr.status === 0) && xhr.response) {\n                onload(xhr.response);\n            } else {\n                (xhr.onerror as any)();\n            }\n        };\n        xhr.onerror = () => {\n            logger.warn(TAG, `Failed to load resource as ${xhr.responseType} (Status ${xhr.status}): ${url}`);\n            onerror(new NetworkError('Network error.', url, xhr.status));\n        };\n        xhr.onabort = () => onerror(new NetworkError('Aborted.', url, xhr.status, true));\n        xhr.onloadend = () => {\n            XHRLoader.allXhrSet.delete(xhr);\n\n            if (target) {\n                XHRLoader.xhrMap.get(target)?.delete(xhr);\n            }\n        };\n\n        return xhr;\n    }\n\n    /**\n     * Cancels all XHRs related to this target.\n     */\n    static cancelXHRs(this: Live2DLoaderTarget) {\n        XHRLoader.xhrMap.get(this)?.forEach(xhr => {\n            xhr.abort();\n            XHRLoader.allXhrSet.delete(xhr);\n        });\n        XHRLoader.xhrMap.delete(this);\n    }\n\n    /**\n     * Release all XHRs.\n     */\n    static release() {\n        XHRLoader.allXhrSet.forEach(xhr => xhr.abort());\n        XHRLoader.allXhrSet.clear();\n        XHRLoader.xhrMap = new WeakMap();\n    }\n}\n","export type Middleware<T> = (context: T, next: (err?: any) => Promise<void>) => Promise<void>\n\n/**\n * Run middlewares with given context.\n * @see https://github.com/koajs/compose/blob/master/index.js\n *\n * @param middleware\n * @param context\n */\nexport function runMiddlewares<T>(middleware: Middleware<T>[], context: T): Promise<void> {\n    // last called middleware #\n    let index = -1;\n    return dispatch(0);\n\n    function dispatch(i: number, err?: Error): Promise<void> {\n        if (err) return Promise.reject(err);\n        if (i <= index) return Promise.reject(new Error('next() called multiple times'));\n        index = i;\n        const fn = middleware[i];\n        if (!fn) return Promise.resolve();\n        try {\n            return Promise.resolve(fn(context, dispatch.bind(null, i + 1)));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__24__;","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","import { InteractionEvent, InteractionManager } from '@pixi/interaction';\nimport { Live2DModel } from './Live2DModel';\n\n/**\n * The interaction control split from Live2DModel class for code clarity. This mixin should *only*\n * be used on the Live2DModel.\n */\nexport class InteractionMixin {\n    private _autoInteract = false;\n\n    /**\n     * Enables automatic interaction. Only takes effect if Pixi's interaction\n     * feature has been enabled (by registering the `PIXI.InteractionManager` into `PIXI.Renderer`).\n     */\n    get autoInteract(): boolean {\n        return this._autoInteract;\n    }\n\n    set autoInteract(autoInteract: boolean) {\n        if (autoInteract !== this._autoInteract) {\n            if (autoInteract) {\n                (this as any as Live2DModel).on('pointertap', onTap, this);\n            } else {\n                (this as any as Live2DModel).off('pointertap', onTap, this);\n            }\n\n            this._autoInteract = autoInteract;\n        }\n    }\n\n    /**\n     * Local reference used to clean up the event listeners when destroying the model.\n     */\n    interactionManager?: InteractionManager;\n\n    /**\n     * Registers interaction by subscribing to the `PIXI.InteractionManager`.\n     */\n    registerInteraction(this: Live2DModel, manager?: InteractionManager): void {\n        if (manager !== this.interactionManager) {\n            this.unregisterInteraction();\n\n            if (this._autoInteract && manager) {\n                this.interactionManager = manager;\n\n                manager.on('pointermove', onPointerMove, this);\n            }\n        }\n    }\n\n    /**\n     * Unregisters interaction.\n     */\n    unregisterInteraction(this: Live2DModel): void {\n        if (this.interactionManager) {\n            this.interactionManager?.off('pointermove', onPointerMove, this);\n            this.interactionManager = undefined;\n        }\n    }\n}\n\nfunction onTap(this: Live2DModel, event: InteractionEvent): void {\n    this.tap(event.data.global.x, event.data.global.y);\n}\n\nfunction onPointerMove(this: Live2DModel, event: InteractionEvent) {\n    this.focus(event.data.global.x, event.data.global.y);\n}\n","import { Transform } from '@pixi/math';\n\n/**\n * Useless class. May be useful in the future.\n */\nexport class Live2DTransform extends Transform {\n}\n","import { InternalModel, ModelSettings, MotionPriority } from '@/cubism-common';\nimport { MotionManagerOptions } from '@/cubism-common/MotionManager';\nimport type { Live2DFactoryOptions } from '@/factory/Live2DFactory';\nimport { Live2DFactory } from '@/factory/Live2DFactory';\nimport { Renderer, Texture } from '@pixi/core';\nimport { Container } from '@pixi/display';\nimport { Matrix, ObservablePoint, Point, Rectangle } from '@pixi/math';\nimport { Ticker } from '@pixi/ticker';\nimport { InteractionMixin } from './InteractionMixin';\nimport { Live2DTransform } from './Live2DTransform';\nimport { applyMixins, logger } from './utils';\n\nexport interface Live2DModelOptions extends MotionManagerOptions {\n    /**\n     * Should the internal model be automatically updated by `PIXI.Ticker.shared`.\n     * @default ture\n     */\n    autoUpdate?: boolean;\n\n    /**\n     * Should the internal model automatically reacts to interactions by listening for pointer events.\n     * @see {@link InteractionMixin}\n     * @default true\n     */\n    autoInteract?: boolean;\n}\n\nconst tempPoint = new Point();\nconst tempMatrix = new Matrix();\n\n// a reference to Ticker class, defaults to window.PIXI.Ticker (when loaded by a <script> tag)\nlet TickerClass: typeof Ticker | undefined = (window as any).PIXI?.Ticker;\n\nexport interface Live2DModel<IM extends InternalModel = InternalModel> extends InteractionMixin {}\n\nexport type Live2DConstructor = { new(options?: Live2DModelOptions): Live2DModel }\n\n/**\n * A wrapper that allows the Live2D model to be used as a DisplayObject in PixiJS.\n *\n * ```js\n * const model = await Live2DModel.from('shizuku.model.json');\n * container.add(model);\n * ```\n * @emits {@link Live2DModelEvents}\n */\nexport class Live2DModel<IM extends InternalModel = InternalModel> extends Container {\n    /**\n     * Creates a Live2DModel from given source.\n     * @param source - Can be one of: settings file URL, settings JSON object, ModelSettings instance.\n     * @param options - Options for the creation.\n     * @return Promise that resolves with the Live2DModel.\n     */\n    static from<M extends Live2DConstructor = typeof Live2DModel>(this: M, source: string | JSONObject | ModelSettings, options?: Live2DFactoryOptions): Promise<InstanceType<M>> {\n        const model = new this(options) as InstanceType<M>;\n\n        return Live2DFactory.setupLive2DModel(model, source, options).then(() => model);\n    }\n\n    /**\n     * Synchronous version of `Live2DModel.from()`. This method immediately returns a Live2DModel instance,\n     * whose resources have not been loaded. Therefore this model can't be manipulated or rendered\n     * until the \"load\" event has been emitted.\n     *\n     * ```js\n     * // no `await` here as it's not a Promise\n     * const model = Live2DModel.fromSync('shizuku.model.json');\n     *\n     * // these will cause errors!\n     * // app.stage.addChild(model);\n     * // model.motion('tap_body');\n     *\n     * model.once('load', () => {\n     *     // now it's safe\n     *     app.stage.addChild(model);\n     *     model.motion('tap_body');\n     * });\n     * ```\n     */\n    static fromSync<M extends Live2DConstructor = typeof Live2DModel>(this: M, source: string | JSONObject | ModelSettings, options?: Live2DFactoryOptions): InstanceType<M> {\n        const model = new this(options) as InstanceType<M>;\n\n        Live2DFactory.setupLive2DModel(model, source, options).then(options?.onLoad).catch(options?.onError);\n\n        return model;\n    }\n\n    /**\n     * Registers the class of `PIXI.Ticker` for auto updating.\n     */\n    static registerTicker(tickerClass: typeof Ticker): void {\n        TickerClass = tickerClass;\n    }\n\n    /**\n     * Tag for logging.\n     */\n    tag = 'Live2DModel(uninitialized)';\n\n    /**\n     * The internal model. Though typed as non-nullable, it'll be undefined until the \"ready\" event is emitted.\n     */\n    internalModel!: IM;\n\n    /**\n     * Pixi textures.\n     */\n    textures: Texture[] = [];\n\n    /** @override */\n    transform = new Live2DTransform();\n\n    /**\n     * The anchor behaves like the one in `PIXI.Sprite`, where `(0, 0)` means the top left\n     * and `(1, 1)` means the bottom right.\n     */\n    anchor = new ObservablePoint(this.onAnchorChange, this, 0, 0);\n\n    /**\n     * An ID of Gl context that syncs with `renderer.CONTEXT_UID`. Used to check if the GL context has changed.\n     */\n    protected glContextID = -1;\n\n    /**\n     * Elapsed time in milliseconds since created.\n     */\n    elapsedTime: DOMHighResTimeStamp = performance.now();\n\n    /**\n     * Elapsed time in milliseconds from last frame to this frame.\n     */\n    deltaTime: DOMHighResTimeStamp = 0;\n\n    protected _autoUpdate = false;\n\n    /**\n     * Enables automatic updating. Requires {@link Live2DModel.registerTicker} or the global `window.PIXI.Ticker`.\n     */\n    get autoUpdate() {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(autoUpdate: boolean) {\n        if (autoUpdate) {\n            if (!this._destroyed) {\n                if (TickerClass) {\n                    TickerClass.shared.add(this.onTickerUpdate, this);\n\n                    this._autoUpdate = true;\n                } else {\n                    logger.warn(this.tag, 'No Ticker registered, please call Live2DModel.registerTicker(Ticker).');\n                }\n            }\n        } else {\n            TickerClass?.shared.remove(this.onTickerUpdate, this);\n\n            this._autoUpdate = false;\n        }\n    }\n\n    constructor(options?: Live2DModelOptions) {\n        super();\n\n        this.once('modelLoaded', () => this.init(options));\n    }\n\n    // TODO: rename\n    /**\n     * A handler of the \"modelLoaded\" event, invoked when the internal model has been loaded.\n     */\n    protected init(options?: Live2DModelOptions) {\n        this.tag = `Live2DModel(${this.internalModel.settings.name})`;\n\n        const _options = Object.assign({\n            autoUpdate: true,\n            autoInteract: true,\n        }, options);\n\n        if (_options.autoInteract) {\n            this.interactive = true;\n        }\n\n        this.autoInteract = _options.autoInteract;\n        this.autoUpdate = _options.autoUpdate;\n    }\n\n    /**\n     * A callback that observes {@link anchor}, invoked when the anchor's values have been changed.\n     */\n    protected onAnchorChange(): void {\n        this.pivot.set(this.anchor.x * this.internalModel.width, this.anchor.y * this.internalModel.height);\n    }\n\n    /**\n     * Shorthand to start a motion.\n     * @param group - The motion group.\n     * @param index - The index in this group. If not presented, a random motion will be started.\n     * @param priority - The motion priority. Defaults to `MotionPriority.NORMAL`.\n     * @return Promise that resolves with true if the motion is successfully started, with false otherwise.\n     */\n    motion(group: string, index?: number, priority?: MotionPriority): Promise<boolean> {\n        return index === undefined\n            ? this.internalModel.motionManager.startRandomMotion(group, priority)\n            : this.internalModel.motionManager.startMotion(group, index, priority);\n    }\n\n    /**\n     * Shorthand to set an expression.\n     * @param id - Either the index, or the name of the expression. If not presented, a random expression will be set.\n     * @return Promise that resolves with true if succeeded, with false otherwise.\n     */\n    expression(id?: number | string): Promise<boolean> {\n        if (this.internalModel.motionManager.expressionManager) {\n            return id === undefined\n                ? this.internalModel.motionManager.expressionManager.setRandomExpression()\n                : this.internalModel.motionManager.expressionManager.setExpression(id);\n        }\n        return Promise.resolve(false);\n    }\n\n    /**\n     * Updates the focus position. This will not cause the model to immediately look at the position,\n     * instead the movement will be interpolated.\n     * @param x - Position in world space.\n     * @param y - Position in world space.\n     * @param instant - Should the focus position be instantly applied.\n     */\n    focus(x: number, y: number, instant: boolean = false): void {\n        tempPoint.x = x;\n        tempPoint.y = y;\n\n        // we can pass `true` as the third argument to skip the update transform\n        // because focus won't take effect until the model is rendered,\n        // and a model being rendered will always get transform updated\n        this.toModelPosition(tempPoint, tempPoint, true);\n\n        this.internalModel.focusController.focus(\n            (tempPoint.x / this.internalModel.originalWidth) * 2 - 1,\n            -((tempPoint.y / this.internalModel.originalHeight) * 2 - 1),\n            instant,\n        );\n    }\n\n    /**\n     * Tap on the model. This will perform a hit-testing, and emit a \"hit\" event\n     * if at least one of the hit areas is hit.\n     * @param x - Position in world space.\n     * @param y - Position in world space.\n     * @emits {@link Live2DModelEvents.hit}\n     */\n    tap(x: number, y: number): void {\n        const hitAreaNames = this.hitTest(x, y);\n\n        if (hitAreaNames.length) {\n            logger.log(this.tag, `Hit`, hitAreaNames);\n\n            this.emit('hit', hitAreaNames);\n        }\n    }\n\n    /**\n     * Hit-test on the model.\n     * @param x - Position in world space.\n     * @param y - Position in world space.\n     * @return The names of the *hit* hit areas. Can be empty if none is hit.\n     */\n    hitTest(x: number, y: number): string[] {\n        tempPoint.x = x;\n        tempPoint.y = y;\n        this.toModelPosition(tempPoint, tempPoint);\n\n        return this.internalModel.hitTest(tempPoint.x, tempPoint.y);\n    }\n\n    /**\n     * Calculates the position in the canvas of original, unscaled Live2D model.\n     * @param position - A Point in world space.\n     * @param result - A Point to store the new value. Defaults to a new Point.\n     * @param skipUpdate - True to skip the update transform.\n     * @return The Point in model canvas space.\n     */\n    toModelPosition(position: Point, result: Point = position.clone(), skipUpdate?: boolean): Point {\n        if (!skipUpdate) {\n            this._recursivePostUpdateTransform();\n\n            if (!this.parent) {\n                (this.parent as any) = this._tempDisplayObjectParent;\n                this.displayObjectUpdateTransform();\n                (this.parent as any) = null;\n            } else {\n                this.displayObjectUpdateTransform();\n            }\n        }\n\n        this.transform.worldTransform.applyInverse(position, result);\n        this.internalModel.localTransform.applyInverse(result, result);\n\n        return result;\n    }\n\n    /**\n     * A method required by `PIXI.InteractionManager` to perform hit-testing.\n     * @param point - A Point in world space.\n     * @return True if the point is inside this model.\n     */\n    containsPoint(point: Point): boolean {\n        return this.getBounds(true).contains(point.x, point.y);\n    }\n\n    /** @override */\n    protected _calculateBounds(): void {\n        this._bounds.addFrame(this.transform, 0, 0, this.internalModel.width, this.internalModel.height);\n    }\n\n    /**\n     * An update callback to be added to `PIXI.Ticker` and invoked every tick.\n     */\n    onTickerUpdate(): void {\n        this.update(TickerClass!.shared.deltaMS);\n    }\n\n    /**\n     * Updates the model. Note this method just updates the timer,\n     * and the actual update will be done right before rendering the model.\n     * @param dt - The elapsed time in milliseconds since last frame.\n     */\n    update(dt: DOMHighResTimeStamp): void {\n        this.deltaTime += dt;\n        this.elapsedTime += dt;\n\n        // don't call `this.internalModel.update()` here, because it requires WebGL context\n    }\n\n    /** @override */\n    protected _render(renderer: Renderer): void {\n        this.registerInteraction(renderer.plugins.interaction);\n\n        // reset certain systems in renderer to make Live2D's drawing system compatible with Pixi\n        renderer.batch.reset();\n        renderer.geometry.reset();\n        renderer.shader.reset();\n        renderer.state.reset();\n\n        let shouldUpdateTexture = false;\n\n        // when the WebGL context has changed\n        if (this.glContextID !== (renderer as any).CONTEXT_UID) {\n            this.glContextID = (renderer as any).CONTEXT_UID;\n\n            this.internalModel.updateWebGLContext(renderer.gl, this.glContextID);\n\n            shouldUpdateTexture = true;\n        }\n\n        for (let i = 0; i < this.textures.length; i++) {\n            const texture = this.textures[i]!;\n\n            if (!texture.valid) {\n                continue;\n            }\n\n            if (shouldUpdateTexture || !(texture.baseTexture as any)._glTextures[this.glContextID]) {\n                renderer.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL, this.internalModel.textureFlipY);\n\n                // let the TextureSystem generate corresponding WebGLTexture, and bind to an arbitrary location\n                renderer.texture.bind(texture.baseTexture, 0);\n            }\n\n            // bind the WebGLTexture into Live2D core.\n            // because the Texture in Pixi can be shared between multiple DisplayObjects,\n            // it's unable to know if the WebGLTexture in this Texture has been destroyed (GCed) and regenerated,\n            // and therefore we always bind the texture at this moment no matter what\n            this.internalModel.bindTexture(i, (texture.baseTexture as any)._glTextures[this.glContextID].texture);\n\n            // manually update the GC counter so they won't be GCed while using this model\n            (texture.baseTexture as any).touched = renderer.textureGC.count;\n        }\n\n        const viewport = (renderer.framebuffer as any).viewport as Rectangle;\n        this.internalModel.viewport = [viewport.x, viewport.y, viewport.width, viewport.height];\n\n        // update only if the time has changed, as the model will possibly be updated once but rendered multiple times\n        if (this.deltaTime) {\n            this.internalModel.update(this.deltaTime, this.elapsedTime);\n            this.deltaTime = 0;\n        }\n\n        const internalTransform = tempMatrix\n            .copyFrom(renderer.globalUniforms.uniforms.projectionMatrix)\n            .append(this.worldTransform);\n\n        this.internalModel.updateTransform(internalTransform);\n        this.internalModel.draw(renderer.gl);\n\n        // reset WebGL state and texture bindings\n        renderer.state.reset();\n        renderer.texture.reset();\n    }\n\n    /**\n     * Destroys the model and all related resources. This takes the same options and also\n     * behaves the same as `PIXI.Container#destroy`.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param [options.children=false] - if set to true, all the children will have their destroy\n     *  method called as well. 'options' will be passed on to those calls.\n     * @param [options.texture=false] - Only used for child Sprites if options.children is set to true\n     *  Should it destroy the texture of the child sprite\n     * @param [options.baseTexture=false] - Only used for child Sprites if options.children is set to true\n     *  Should it destroy the base texture of the child sprite\n     */\n    destroy(options?: { children?: boolean, texture?: boolean, baseTexture?: boolean }): void {\n        this.emit('destroy');\n\n        // the setters will do the cleanup\n        this.autoUpdate = false;\n\n        this.unregisterInteraction();\n\n        if (options?.texture) {\n            this.textures.forEach(texture => texture.destroy(options.baseTexture));\n        }\n\n        this.internalModel.destroy();\n\n        super.destroy(options);\n    }\n}\n\napplyMixins(Live2DModel, [InteractionMixin]);\n","import { InternalModel, ModelSettings } from '@/cubism-common';\nimport { Live2DFactory, Live2DFactoryContext } from '@/factory';\nimport { Middleware } from '@/utils/middleware';\nimport { url as urlUtils } from '@pixi/utils';\n\ndeclare global {\n    interface File {\n        webkitRelativePath: string;\n    }\n}\n\ndeclare module '@/cubism-common/ModelSettings' {\n    interface ModelSettings {\n        /** @ignore */\n        _objectURL?: string;\n    }\n}\n\nexport type ExtendedFileList = File[] & { settings?: ModelSettings }\n\n/**\n * Experimental loader to load resources from uploaded files.\n *\n * This loader relies on\n * [webkitRelativePath](https://developer.mozilla.org/en-US/docs/Web/API/File/webkitRelativePath)\n * to recognize the file path.\n *\n * Though named as a \"Loader\", this class has nothing to do with Live2DLoader,\n * it only contains a middleware for the Live2DFactory.\n */\nexport class FileLoader {\n    /**\n     * Stores all the object URLs of uploaded files.\n     */\n    static filesMap: {\n        [settingsFileURL: string]: {\n            [resourceFileURL: string]: string\n        }\n    } = {};\n\n    /**\n     * Resolves the path of a resource file to the object URL.\n     * @param settingsURL - Object URL of the settings file.\n     * @param filePath - Resource file path.\n     * @return Resolved object URL.\n     */\n    static resolveURL(settingsURL: string, filePath: string): string {\n        const resolved = FileLoader.filesMap[settingsURL]?.[filePath];\n\n        if (resolved === undefined) {\n            throw new Error('Cannot find this file from uploaded files: ' + filePath);\n        }\n\n        return resolved;\n    }\n\n    /**\n     * Middleware for Live2DFactory.\n     */\n    static factory: Middleware<Live2DFactoryContext> = async (context, next) => {\n        if (Array.isArray(context.source) && context.source[0] instanceof File) {\n            const files = context.source as File[];\n\n            let settings = (files as ExtendedFileList).settings;\n\n            if (!settings) {\n                settings = await FileLoader.createSettings(files);\n            } else if (!settings._objectURL) {\n                throw  new Error('\"_objectURL\" must be specified in ModelSettings');\n            }\n\n            settings.validateFiles(files.map(file => encodeURI(file.webkitRelativePath)));\n\n            await FileLoader.upload(files, settings);\n\n            // override the default method to resolve URL from uploaded files\n            settings.resolveURL = function(url) {\n                return FileLoader.resolveURL(this._objectURL!, url);\n            };\n\n            context.source = settings;\n\n            // clean up when destroying the model\n            context.live2dModel.once('modelLoaded', (internalModel: InternalModel) => {\n                internalModel.once('destroy', function(this: InternalModel) {\n                    const objectURL = this.settings._objectURL!;\n\n                    URL.revokeObjectURL(objectURL);\n\n                    if (FileLoader.filesMap[objectURL]) {\n                        for (const resourceObjectURL of Object.values(FileLoader.filesMap[objectURL]!)) {\n                            URL.revokeObjectURL(resourceObjectURL);\n                        }\n                    }\n\n                    delete FileLoader.filesMap[objectURL];\n                });\n            });\n        }\n\n        return next();\n    };\n\n    /**\n     * Consumes the files by storing their object URLs. Files not defined in the settings will be ignored.\n     */\n    static async upload(files: File[], settings: ModelSettings): Promise<void> {\n        const fileMap: Record<string, string> = {};\n\n        // only consume the files defined in settings\n        for (const definedFile of settings.getDefinedFiles()) {\n            const actualPath = decodeURI(urlUtils.resolve(settings.url, definedFile));\n\n            const actualFile = files.find(file => file.webkitRelativePath === actualPath);\n\n            if (actualFile) {\n                fileMap[definedFile] = URL.createObjectURL(actualFile);\n            }\n        }\n\n        FileLoader.filesMap[settings._objectURL!] = fileMap;\n    }\n\n    /**\n     * Creates a ModelSettings by given files.\n     * @return Promise that resolves with the created ModelSettings.\n     */\n    static async createSettings(files: File[]): Promise<ModelSettings> {\n        const settingsFile = files.find(file => file.name.endsWith('model.json') || file.name.endsWith('model3.json'));\n\n        if (!settingsFile) {\n            throw new TypeError('Settings file not found');\n        }\n\n        const settingsText = await FileLoader.readText(settingsFile);\n        const settingsJSON = JSON.parse(settingsText);\n\n        settingsJSON.url = settingsFile.webkitRelativePath;\n\n        const runtime = Live2DFactory.findRuntime(settingsJSON);\n\n        if (!runtime) {\n            throw new Error('Unknown settings JSON');\n        }\n\n        const settings = runtime.createModelSettings(settingsJSON);\n\n        settings._objectURL = URL.createObjectURL(settingsFile);\n\n        return settings;\n    }\n\n    /**\n     * Reads a file as text in UTF-8.\n     */\n    static async readText(file: File): Promise<string> {\n        return new Promise<string>((resolve, reject) => {\n            const reader = new FileReader();\n\n            reader.onload = () => resolve(reader.result as string);\n            reader.onerror = reject;\n            reader.readAsText(file, 'utf8');\n        });\n    }\n}\n\nLive2DFactory.live2DModelMiddlewares.unshift(FileLoader.factory);\n","import { url as urlUtils } from '@pixi/utils';\nimport { Middleware } from '@/utils/middleware';\nimport { InternalModel, ModelSettings } from '@/cubism-common';\nimport { ExtendedFileList } from './FileLoader';\nimport { Live2DFactory, Live2DFactoryContext } from '@/factory/Live2DFactory';\nimport { Live2DLoader } from '@/factory/Live2DLoader';\n\ntype ZipReader = any;\n\n/**\n * Experimental loader to load resources from a zip file.\n *\n * Though named as a \"Loader\", this class has nothing to do with Live2DLoader,\n * it only contains a middleware for the Live2DFactory.\n */\nexport class ZipLoader {\n    static ZIP_PROTOCOL = 'zip://';\n    static uid = 0;\n\n    static factory: Middleware<Live2DFactoryContext> = async (context, next) => {\n        const source = context.source;\n\n        let sourceURL: string;\n        let zipBlob: Blob | undefined;\n        let settings: ModelSettings | undefined;\n\n        if (typeof source === 'string' && (source.endsWith('.zip') || source.startsWith(ZipLoader.ZIP_PROTOCOL))) {\n            if (source.startsWith(ZipLoader.ZIP_PROTOCOL)) {\n                sourceURL = source.slice(ZipLoader.ZIP_PROTOCOL.length);\n            } else {\n                sourceURL = source;\n            }\n\n            zipBlob = await Live2DLoader.load({\n                url: sourceURL,\n                type: 'blob',\n                target: context.live2dModel,\n            });\n        } else if (\n            Array.isArray(source)\n            && source.length === 1\n            && source[0] instanceof File\n            && source[0].name.endsWith('.zip')\n        ) {\n            zipBlob = source[0];\n\n            sourceURL = URL.createObjectURL(zipBlob);\n\n            settings = (source as ExtendedFileList).settings;\n        }\n\n        if (zipBlob) {\n            if (!zipBlob.size) {\n                throw new Error('Empty zip file');\n            }\n\n            const reader = await ZipLoader.zipReader(zipBlob, sourceURL!);\n\n            if (!settings) {\n                settings = await ZipLoader.createSettings(reader);\n            }\n\n            // a fake URL, the only requirement is it should be unique,\n            // as FileLoader will use it as the ID of all uploaded files\n            settings._objectURL = ZipLoader.ZIP_PROTOCOL + ZipLoader.uid + '/' + settings.url;\n\n            const files = await ZipLoader.unzip(reader, settings);\n\n            (files as ExtendedFileList).settings = settings;\n\n            // pass files to the FileLoader\n            context.source = files;\n\n            // clean up when destroying the model\n            if (sourceURL!.startsWith('blob:')) {\n                context.live2dModel.once('modelLoaded', (internalModel: InternalModel) => {\n                    internalModel.once('destroy', function(this: InternalModel) {\n                        URL.revokeObjectURL(sourceURL);\n\n                    });\n                });\n            }\n\n            ZipLoader.releaseReader(reader);\n        }\n\n        return next();\n    };\n\n    static async unzip(reader: ZipReader, settings: ModelSettings): Promise<File[]> {\n        const filePaths = await ZipLoader.getFilePaths(reader);\n\n        const requiredFilePaths: string[] = [];\n\n        // only consume the files defined in settings\n        for (const definedFile of settings.getDefinedFiles()) {\n            const actualPath = decodeURI(urlUtils.resolve(settings.url, definedFile));\n\n            if (filePaths.includes(actualPath)) {\n                requiredFilePaths.push(actualPath);\n            }\n        }\n\n        const files = await ZipLoader.getFiles(reader, requiredFilePaths);\n\n        for (let i = 0; i < files.length; i++) {\n            const path = requiredFilePaths[i]!;\n            const file = files[i]!;\n\n            // let's borrow this property...\n            Object.defineProperty(file, 'webkitRelativePath', {\n                value: path,\n            });\n        }\n\n        return files;\n    }\n\n    static async createSettings(reader: ZipReader): Promise<ModelSettings> {\n        const filePaths = await ZipLoader.getFilePaths(reader);\n\n        const settingsFilePath = filePaths.find(path => path.endsWith('model.json') || path.endsWith('model3.json'));\n\n        if (!settingsFilePath) {\n            throw  new Error('Settings file not found');\n        }\n\n        const settingsText = await ZipLoader.readText(reader, settingsFilePath);\n\n        if (!settingsText) {\n            throw new Error('Empty settings file: ' + settingsFilePath);\n        }\n\n        const settingsJSON = JSON.parse(settingsText);\n\n        settingsJSON.url = settingsFilePath;\n\n        const runtime = Live2DFactory.findRuntime(settingsJSON);\n\n        if (!runtime) {\n            throw new Error('Unknown settings JSON');\n        }\n\n        return runtime.createModelSettings(settingsJSON);\n    }\n\n    static async zipReader(data: Blob, url: string): Promise<ZipReader> {\n        throw new Error('Not implemented');\n    }\n\n    static async getFilePaths(reader: ZipReader): Promise<string[]> {\n        throw new Error('Not implemented');\n    }\n\n    static async getFiles(reader: ZipReader, paths: string[]): Promise<File[]> {\n        throw new Error('Not implemented');\n    }\n\n    static async readText(reader: ZipReader, path: string): Promise<string> {\n        throw new Error('Not implemented');\n    }\n\n    static releaseReader(reader: ZipReader) {\n        // this method is optional\n    }\n}\n\nLive2DFactory.live2DModelMiddlewares.unshift(ZipLoader.factory);\n","export * from './Live2DFactory';\nexport * from './Live2DLoader';\nexport * from './XHRLoader';\nexport * from './FileLoader';\nexport * from './ZipLoader';\n","/// <reference path=\"../core/live2d.d.ts\"/>\n/// <reference path=\"../core/live2dcubismcore.d.ts\"/>\n/// <reference path=\"../cubism/src/CubismSpec.d.ts\"/>\n/// <reference path=\"types/Cubism2Spec.d.ts\"/>\n/// <reference path=\"types/helpers.d.ts\"/>\n/// <reference path=\"types/shim.d.ts\"/>\n\nexport * from './cubism-common';\nexport * from './Live2DModel';\nexport * from './Live2DTransform';\nexport * from './InteractionMixin';\nexport * from './config';\nexport * from './factory';\nexport * from './utils';\n","import { Live2DModel } from '@/Live2DModel';\nimport { Renderer } from '@pixi/core';\nimport { Graphics } from '@pixi/graphics';\nimport { InteractionEvent } from '@pixi/interaction';\nimport { Text, TextStyle } from '@pixi/text';\nimport { Rectangle } from '@pixi/math';\n\nconst tempBounds = new Rectangle();\n\nexport class HitAreaFrames extends Graphics {\n    initialized = false;\n\n    texts: Text[] = [];\n\n    strokeWidth = 4;\n    normalColor = 0xE31A1A;\n    activeColor = 0x1EC832;\n\n    constructor() {\n        super();\n\n        this.interactive = true;\n\n        this.on('added', this.init).on('pointermove', this.onPointerMove);\n    }\n\n    init() {\n        const internalModel = (this.parent as Live2DModel).internalModel;\n\n        const textStyle = new TextStyle({\n            fontSize: 24,\n            fill: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 4,\n        });\n\n        this.texts = Object.keys(internalModel.hitAreas).map(hitAreaName => {\n            const text = new Text(hitAreaName, textStyle);\n\n            text.visible = false;\n\n            this.addChild(text);\n\n            return text;\n        });\n    }\n\n    onPointerMove(e: InteractionEvent) {\n        const hitAreaNames = (this.parent as Live2DModel).hitTest(e.data.global.x, e.data.global.y);\n\n        this.texts.forEach(text => {\n            text.visible = hitAreaNames.includes(text.text);\n        });\n    }\n\n    /** @override */\n    protected _render(renderer: Renderer): void {\n        const internalModel = (this.parent as Live2DModel).internalModel;\n\n        // extract scale from the transform matrix, and invert it to ease following calculation\n        // https://math.stackexchange.com/a/13165\n        const scale = 1 / Math.sqrt(this.transform.worldTransform.a ** 2 + this.transform.worldTransform.b ** 2);\n\n        this.texts.forEach(text => {\n            (\n                // correct the type definition of this method, the official definition is wrong!\n                this.lineStyle as any as (options: { width?: number, color?: number }) => void\n            )({\n                width: this.strokeWidth * scale,\n                color: text.visible ? this.activeColor : this.normalColor,\n            });\n\n            const bounds = internalModel.getDrawableBounds(internalModel.hitAreas[text.text]!.index, tempBounds);\n            const transform = internalModel.localTransform;\n\n            bounds.x = bounds.x * transform.a + transform.tx;\n            bounds.y = bounds.y * transform.d + transform.ty;\n            bounds.width = bounds.width * transform.a;\n            bounds.height = bounds.height * transform.d;\n\n            this.drawRect(bounds.x, bounds.y, bounds.width, bounds.height);\n\n            text.x = bounds.x + this.strokeWidth * scale;\n            text.y = bounds.y + this.strokeWidth * scale;\n            text.scale.set(scale);\n        });\n\n        super._render(renderer);\n\n        this.clear();\n    }\n}\n","export * from './common';\n\nexport * from './tools/HitAreaFrames';\n","var baseRest = require('./_baseRest'),\n    pullAll = require('./pullAll');\n\n/**\n * Removes all given values from `array` using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n * to remove elements from an array by predicate.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...*} [values] The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pull(array, 'a', 'c');\n * console.log(array);\n * // => ['b', 'b']\n */\nvar pull = baseRest(pullAll);\n\nmodule.exports = pull;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__34__;","module.exports = __WEBPACK_EXTERNAL_MODULE__35__;","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var basePullAll = require('./_basePullAll');\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nmodule.exports = pullAll;\n","var arrayMap = require('./_arrayMap'),\n    baseIndexOf = require('./_baseIndexOf'),\n    baseIndexOfWith = require('./_baseIndexOfWith'),\n    baseUnary = require('./_baseUnary'),\n    copyArray = require('./_copyArray');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAll;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseIndexOfWith;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","// subclassing is impossible because it will be instantiated by `Live2DMotion.create()`\ndeclare interface Live2DMotion {\n    onFinishHandler?(motion: this): void\n}\n\nconst originalUpdateParam = Live2DMotion.prototype.updateParam;\n\nLive2DMotion.prototype.updateParam = function(model: Live2DModelWebGL, entry: Live2DObfuscated.MotionQueueEnt) {\n    originalUpdateParam.call(this, model, entry);\n\n    if (entry.isFinished() && this.onFinishHandler) {\n        this.onFinishHandler(this);\n\n        delete this.onFinishHandler;\n    }\n};\n","import { config } from '@/config';\n\nexport class Live2DExpression extends AMotion {\n    readonly params: NonNullable<Cubism2Spec.ExpressionJSON['params']> = [];\n\n    constructor(json: Cubism2Spec.ExpressionJSON) {\n        super();\n\n        this.setFadeIn(json.fade_in! > 0 ? json.fade_in! : config.expressionFadingDuration);\n        this.setFadeOut(json.fade_out! > 0 ? json.fade_out! : config.expressionFadingDuration);\n\n        if (Array.isArray(json.params)) {\n            json.params.forEach(param => {\n                const calc = param.calc || 'add';\n\n                if (calc === 'add') {\n                    const defaultValue = param.def || 0;\n                    param.val -= defaultValue;\n                } else if (calc === 'mult') {\n                    const defaultValue = param.def || 1;\n                    param.val /= defaultValue;\n                }\n\n                this.params.push({\n                    calc,\n                    val: param.val,\n                    id: param.id,\n                });\n            });\n        }\n    }\n\n    /** @override */\n    updateParamExe(model: Live2DModelWebGL, time: DOMTimeStamp, weight: number, motionQueueEnt: unknown) {\n        this.params.forEach(param => {\n            // this algorithm seems to be broken for newer Neptunia series models, have no idea\n            //\n            // switch (param.type) {\n            //     case ParamCalcType.Set:\n            //         model.setParamFloat(param.id, param.value, weight);\n            //         break;\n            //     case ParamCalcType.Add:\n            //         model.addToParamFloat(param.id, param.value * weight);\n            //         break;\n            //     case ParamCalcType.Mult:\n            //         model.multParamFloat(param.id, param.value, weight);\n            //         break;\n            // }\n\n            // this works fine for any model\n            model.setParamFloat(param.id, param.val * weight);\n        });\n    }\n}\n","import { MotionManagerOptions } from '@/cubism-common';\nimport { ExpressionManager } from '@/cubism-common/ExpressionManager';\nimport { Cubism2ModelSettings } from '@/cubism2/Cubism2ModelSettings';\nimport { Live2DExpression } from './Live2DExpression';\n\nexport class Cubism2ExpressionManager extends ExpressionManager<Live2DExpression> {\n    readonly queueManager = new MotionQueueManager();\n\n    readonly definitions: Cubism2Spec.Expression[];\n\n    readonly settings!: Cubism2ModelSettings;\n\n    constructor(settings: Cubism2ModelSettings, options?: MotionManagerOptions) {\n        super(settings, options);\n\n        this.definitions = this.settings.expressions ?? [];\n\n        this.init();\n    }\n\n    isFinished(): boolean {\n        return this.queueManager.isFinished();\n    }\n\n    getExpressionIndex(name: string): number {\n        return this.definitions.findIndex(def => def.name === name);\n    }\n\n    getExpressionFile(definition: Cubism2Spec.Expression): string {\n        return definition.file;\n    }\n\n    createExpression(data: object, definition: Cubism2Spec.Expression | undefined): Live2DExpression {\n        return new Live2DExpression(data);\n    }\n\n    protected _setExpression(motion: Live2DExpression): number {\n        return this.queueManager.startMotion(motion);\n    }\n\n    protected stopAllExpressions(): void {\n        this.queueManager.stopAllMotions();\n    }\n\n    protected updateParameters(model: Live2DModelWebGL, dt: number): boolean {\n        return this.queueManager.updateParam(model);\n    }\n}\n","import { MotionManager, MotionManagerOptions } from '@/cubism-common/MotionManager';\nimport { Cubism2ExpressionManager } from '@/cubism2/Cubism2ExpressionManager';\nimport { Cubism2ModelSettings } from '@/cubism2/Cubism2ModelSettings';\nimport './patch-motion';\nimport { config } from '@/config';\n\nexport class Cubism2MotionManager extends MotionManager<Live2DMotion, Cubism2Spec.Motion> {\n    readonly definitions: Partial<Record<string, Cubism2Spec.Motion[]>>;\n\n    readonly groups = { idle: 'idle' } as const;\n\n    readonly motionDataType = 'arraybuffer';\n\n    readonly queueManager = new MotionQueueManager();\n\n    readonly settings!: Cubism2ModelSettings;\n\n    expressionManager?: Cubism2ExpressionManager;\n\n    constructor(settings: Cubism2ModelSettings, options?: MotionManagerOptions) {\n        super(settings, options);\n\n        this.definitions = this.settings.motions;\n\n        this.init(options);\n    }\n\n    protected init(options?: MotionManagerOptions) {\n        super.init(options);\n\n        if (this.settings.expressions) {\n            this.expressionManager = new Cubism2ExpressionManager(this.settings, options);\n        }\n    }\n\n    isFinished(): boolean {\n        return this.queueManager.isFinished();\n    }\n\n    createMotion(data: ArrayBuffer, group: string, definition: Cubism2Spec.Motion): Live2DMotion {\n        const motion = Live2DMotion.loadMotion(data);\n\n        const defaultFadingDuration =\n            group === this.groups.idle\n                ? config.idleMotionFadingDuration\n                : config.motionFadingDuration;\n\n        motion.setFadeIn(definition.fade_in! > 0 ? definition.fade_in! : defaultFadingDuration);\n        motion.setFadeOut(definition.fade_out! > 0 ? definition.fade_out! : defaultFadingDuration);\n\n        return motion;\n    }\n\n    getMotionFile(definition: Cubism2Spec.Motion): string {\n        return definition.file;\n    }\n\n    protected getMotionName(definition: Cubism2Spec.Motion): string {\n        return definition.file;\n    }\n\n    protected getSoundFile(definition: Cubism2Spec.Motion): string | undefined {\n        return definition.sound;\n    }\n\n    protected _startMotion(motion: Live2DMotion, onFinish?: (motion: Live2DMotion) => void): number {\n        motion.onFinishHandler = onFinish;\n\n        this.queueManager.stopAllMotions();\n\n        return this.queueManager.startMotion(motion);\n    }\n\n    protected _stopAllMotions(): void {\n        this.queueManager.stopAllMotions();\n    }\n\n    protected updateParameters(model: Live2DModelWebGL, now: DOMHighResTimeStamp): boolean {\n        return this.queueManager.updateParam(model);\n    }\n\n    destroy() {\n        super.destroy();\n\n        (this as Partial<Mutable<this>>).queueManager = undefined;\n    }\n}\n","import { clamp, rand } from '@/utils';\n\nconst enum EyeState {\n    Idle,\n    Closing,\n    Closed,\n    Opening,\n}\n\nexport class Live2DEyeBlink {\n    leftParam: number;\n    rightParam: number;\n\n    blinkInterval: DOMHighResTimeStamp = 4000;\n    closingDuration: DOMHighResTimeStamp = 100;\n    closedDuration: DOMHighResTimeStamp = 50;\n    openingDuration: DOMHighResTimeStamp = 150;\n\n    eyeState = EyeState.Idle;\n    eyeParamValue = 1;\n    closedTimer = 0;\n    nextBlinkTimeLeft = this.blinkInterval;\n\n    constructor(readonly coreModel: Live2DModelWebGL) {\n        this.leftParam = coreModel.getParamIndex('PARAM_EYE_L_OPEN');\n        this.rightParam = coreModel.getParamIndex('PARAM_EYE_R_OPEN');\n    }\n\n    setEyeParams(value: number) {\n        this.eyeParamValue = clamp(value, 0, 1);\n        this.coreModel.setParamFloat(this.leftParam, this.eyeParamValue);\n        this.coreModel.setParamFloat(this.rightParam, this.eyeParamValue);\n    }\n\n    update(dt: DOMHighResTimeStamp) {\n        switch (this.eyeState) {\n            case EyeState.Idle:\n                this.nextBlinkTimeLeft -= dt;\n\n                if (this.nextBlinkTimeLeft < 0) {\n                    this.eyeState = EyeState.Closing;\n                    this.nextBlinkTimeLeft =\n                        this.blinkInterval +\n                        this.closingDuration +\n                        this.closedDuration +\n                        this.openingDuration +\n                        rand(0, 2000);\n                }\n                break;\n\n            case EyeState.Closing:\n                this.setEyeParams(this.eyeParamValue + dt / this.closingDuration);\n\n                if (this.eyeParamValue <= 0) {\n                    this.eyeState = EyeState.Closed;\n                    this.closedTimer = 0;\n                }\n                break;\n\n            case EyeState.Closed:\n                this.closedTimer += dt;\n\n                if (this.closedTimer >= this.closedDuration) {\n                    this.eyeState = EyeState.Opening;\n                }\n                break;\n\n            case EyeState.Opening:\n                this.setEyeParams(this.eyeParamValue + dt / this.openingDuration);\n\n                if (this.eyeParamValue >= 1) {\n                    this.eyeState = EyeState.Idle;\n                }\n        }\n    }\n}\n","import { InternalModelOptions } from '@/cubism-common';\nimport { CommonHitArea, CommonLayout, InternalModel } from '@/cubism-common/InternalModel';\nimport { Cubism2ModelSettings } from './Cubism2ModelSettings';\nimport { Cubism2MotionManager } from './Cubism2MotionManager';\nimport { Live2DEyeBlink } from './Live2DEyeBlink';\nimport { Live2DPhysics } from './Live2DPhysics';\nimport { Live2DPose } from './Live2DPose';\n\n// prettier-ignore\nconst tempMatrixArray = new Float32Array([\n    1, 0, 0, 0,\n    0, 1, 0, 0,\n    0, 0, 1, 0,\n    0, 0, 0, 1,\n]);\n\nexport class Cubism2InternalModel extends InternalModel {\n    settings: Cubism2ModelSettings;\n\n    coreModel: Live2DModelWebGL;\n    motionManager: Cubism2MotionManager;\n\n    eyeBlink?: Live2DEyeBlink;\n    physics?: Live2DPhysics;\n    pose?: Live2DPose;\n\n    // parameter indices, cached for better performance\n    eyeballXParamIndex: number;\n    eyeballYParamIndex: number;\n    angleXParamIndex: number;\n    angleYParamIndex: number;\n    angleZParamIndex: number;\n    bodyAngleXParamIndex: number;\n    breathParamIndex: number;\n\n    textureFlipY = true;\n\n    /**\n     * Number of the drawables in this model.\n     */\n    drawDataCount = 0;\n\n    /**\n     * If true, the face culling will always be disabled when drawing the model,\n     * regardless of the model's internal flags.\n     */\n    disableCulling = false;\n\n    constructor(coreModel: Live2DModelWebGL, settings: Cubism2ModelSettings, options?: InternalModelOptions) {\n        super();\n\n        this.coreModel = coreModel;\n        this.settings = settings;\n        this.motionManager = new Cubism2MotionManager(settings, options);\n        this.eyeBlink = new Live2DEyeBlink(coreModel);\n\n        this.eyeballXParamIndex = coreModel.getParamIndex('PARAM_EYE_BALL_X');\n        this.eyeballYParamIndex = coreModel.getParamIndex('PARAM_EYE_BALL_Y');\n        this.angleXParamIndex = coreModel.getParamIndex('PARAM_ANGLE_X');\n        this.angleYParamIndex = coreModel.getParamIndex('PARAM_ANGLE_Y');\n        this.angleZParamIndex = coreModel.getParamIndex('PARAM_ANGLE_Z');\n        this.bodyAngleXParamIndex = coreModel.getParamIndex('PARAM_BODY_ANGLE_X');\n        this.breathParamIndex = coreModel.getParamIndex('PARAM_BREATH');\n\n        this.init();\n    }\n\n    protected init() {\n        super.init();\n\n        if (this.settings.initParams) {\n            this.settings.initParams.forEach(({ id, value }) => this.coreModel.setParamFloat(id, value));\n        }\n        if (this.settings.initOpacities) {\n            this.settings.initOpacities.forEach(({ id, value }) => this.coreModel.setPartsOpacity(id, value));\n        }\n\n        this.coreModel.saveParam();\n\n        const arr: any = this.coreModel.getModelContext()._$aS;\n\n        if (arr?.length) {\n            this.drawDataCount = arr.length;\n        }\n\n        let culling = this.coreModel.drawParamWebGL.culling;\n\n        Object.defineProperty(this.coreModel.drawParamWebGL, 'culling', {\n            set: (v: boolean) => culling = v,\n\n            // always return false when disabled\n            get: () => this.disableCulling ? false : culling,\n        });\n\n        const clipManager = this.coreModel.getModelContext().clipManager;\n        const originalSetupClip = clipManager.setupClip;\n\n        // after setupClip(), the GL viewport will be set to [0, 0, canvas.width, canvas.height],\n        // so we have to set it back\n        clipManager.setupClip = (modelContext, drawParam) => {\n            originalSetupClip.call(clipManager, modelContext, drawParam);\n\n            drawParam.gl.viewport(...this.viewport);\n        };\n    }\n\n    protected getSize(): [number, number] {\n        return [this.coreModel.getCanvasWidth(), this.coreModel.getCanvasHeight()];\n    }\n\n    protected getLayout(): CommonLayout {\n        const layout = this.settings.layout || {};\n\n        return {\n            ...layout,\n            centerX: layout.center_x,\n            centerY: layout.center_y,\n        };\n    }\n\n    updateWebGLContext(gl: WebGLRenderingContext, glContextID: number): void {\n        const drawParamWebGL = this.coreModel.drawParamWebGL;\n\n        drawParamWebGL.firstDraw = true;\n        drawParamWebGL.setGL(gl);\n        drawParamWebGL.glno = glContextID;\n\n        // reset WebGL buffers\n        for (const prop in drawParamWebGL) {\n            if (drawParamWebGL.hasOwnProperty(prop) && (drawParamWebGL as any)[prop] instanceof WebGLBuffer) {\n                (drawParamWebGL as any)[prop] = null;\n            }\n        }\n\n        const clipManager = this.coreModel.getModelContext().clipManager;\n        clipManager.curFrameNo = glContextID;\n\n        const framebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n        // force Live2D to re-create the framebuffer\n        clipManager.getMaskRenderTexture();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    }\n\n    bindTexture(index: number, texture: WebGLTexture): void {\n        this.coreModel.setTexture(index, texture);\n    }\n\n    protected getHitAreaDefs(): CommonHitArea[] {\n        return this.settings.hitAreas?.map(hitArea => ({\n            id: hitArea.id,\n            name: hitArea.name,\n            index: this.coreModel.getDrawDataIndex(hitArea.id),\n        })) || [];\n    }\n\n    getDrawableIDs(): string[] {\n        const modelContext = this.coreModel.getModelContext();\n        const ids = [];\n\n        for (let i = 0; i < this.drawDataCount; i++) {\n            const drawData = modelContext.getDrawData(i);\n\n            if (drawData) {\n                ids.push(drawData.getDrawDataID().id);\n            }\n        }\n\n        return ids;\n    }\n\n    getDrawableIndex(id: string): number {\n        return this.coreModel.getDrawDataIndex(id);\n    }\n\n    getDrawableVertices(drawIndex: number | string): Float32Array {\n        if (typeof drawIndex === 'string') {\n            drawIndex = this.coreModel.getDrawDataIndex(drawIndex);\n\n            if (drawIndex === -1) throw new TypeError('Unable to find drawable ID: ' + drawIndex);\n        }\n\n        return this.coreModel.getTransformedPoints(drawIndex).slice();\n    }\n\n    update(dt: DOMHighResTimeStamp, now: DOMHighResTimeStamp): void {\n        super.update(dt, now);\n\n        const model = this.coreModel;\n\n        this.emit('beforeMotionUpdate');\n\n        const motionUpdated = this.motionManager.update(this.coreModel, now);\n\n        this.emit('afterMotionUpdate');\n\n        model.saveParam();\n\n        if (!motionUpdated) {\n            this.eyeBlink?.update(dt);\n        }\n\n        this.updateFocus();\n        this.updateNaturalMovements(dt, now);\n\n        this.physics?.update(now);\n        this.pose?.update(dt);\n\n        this.emit('beforeModelUpdate');\n\n        model.update();\n        model.loadParam();\n    }\n\n    updateFocus() {\n        this.coreModel.addToParamFloat(this.eyeballXParamIndex, this.focusController.x);\n        this.coreModel.addToParamFloat(this.eyeballYParamIndex, this.focusController.y);\n        this.coreModel.addToParamFloat(this.angleXParamIndex, this.focusController.x * 30);\n        this.coreModel.addToParamFloat(this.angleYParamIndex, this.focusController.y * 30);\n        this.coreModel.addToParamFloat(this.angleZParamIndex, this.focusController.x * this.focusController.y * -30);\n        this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, this.focusController.x * 10);\n    }\n\n    updateNaturalMovements(dt: DOMHighResTimeStamp, now: DOMHighResTimeStamp) {\n        const t = (now / 1000) * 2 * Math.PI;\n\n        this.coreModel.addToParamFloat(this.angleXParamIndex, 15 * Math.sin(t / 6.5345) * 0.5);\n        this.coreModel.addToParamFloat(this.angleYParamIndex, 8 * Math.sin(t / 3.5345) * 0.5);\n        this.coreModel.addToParamFloat(this.angleZParamIndex, 10 * Math.sin(t / 5.5345) * 0.5);\n        this.coreModel.addToParamFloat(this.bodyAngleXParamIndex, 4 * Math.sin(t / 15.5345) * 0.5);\n\n        this.coreModel.setParamFloat(this.breathParamIndex, 0.5 + 0.5 * Math.sin(t / 3.2345));\n    }\n\n    draw(gl: WebGLRenderingContext): void {\n        const disableCulling = this.disableCulling;\n\n        // culling must be disabled to get this cubism2 model drawn properly on a framebuffer\n        if (gl.getParameter(gl.FRAMEBUFFER_BINDING)) {\n            this.disableCulling = true;\n        }\n\n        const matrix = this.drawingMatrix;\n\n        // set given 3x3 matrix into a 4x4 matrix\n        tempMatrixArray[0] = matrix.a;\n        tempMatrixArray[1] = matrix.b;\n        tempMatrixArray[4] = matrix.c;\n        tempMatrixArray[5] = matrix.d;\n        tempMatrixArray[12] = matrix.tx;\n        tempMatrixArray[13] = matrix.ty;\n\n        this.coreModel.setMatrix(tempMatrixArray);\n        this.coreModel.draw();\n\n        this.disableCulling = disableCulling;\n    }\n\n    destroy() {\n        super.destroy();\n\n        // cubism2 core has a super dumb memory management so there's basically nothing much to do to release the model\n        (this as Partial<this>).coreModel = undefined;\n    }\n}\n","import { ModelSettings } from '@/cubism-common/ModelSettings';\nimport { copyArray, copyProperty } from '../utils';\n\nexport class Cubism2ModelSettings extends ModelSettings {\n    json!: Cubism2Spec.ModelJSON;\n\n    // files\n    moc: string;\n    textures!: string[];\n    pose?: string;\n    physics?: string;\n\n    // metadata\n    layout?: Cubism2Spec.Layout;\n    hitAreas?: Cubism2Spec.HitArea[];\n    initParams?: Cubism2Spec.InitParam[];\n    initOpacities?: Cubism2Spec.InitOpacity[];\n\n    // motions\n    expressions?: Cubism2Spec.Expression[];\n    motions: Record<string, Cubism2Spec.Motion[]> = {};\n\n    /**\n     * Checks if a JSON object is valid model settings.\n     * @param json\n     */\n    static isValidJSON(json: any): json is Cubism2Spec.ModelJSON {\n        // should always return a boolean\n        return !!json\n            && typeof json.model === 'string'\n            && json.textures?.length > 0\n\n            // textures must be an array of strings\n            && json.textures.every((item: any) => typeof item === 'string');\n    }\n\n    constructor(json: Cubism2Spec.ModelJSON & { url: string }) {\n        super(json);\n\n        if (!Cubism2ModelSettings.isValidJSON(json)) {\n            throw new TypeError('Invalid JSON.');\n        }\n\n        this.moc = json.model;\n\n        // copy textures array\n        copyArray('string', json, this, 'textures', 'textures');\n\n        this.copy(json);\n    }\n\n    /**\n     * Validates and copies *optional* properties from raw JSON.\n     */\n    protected copy(json: Cubism2Spec.ModelJSON): void {\n        copyProperty('string', json, this, 'name', 'name');\n        copyProperty('string', json, this, 'pose', 'pose');\n        copyProperty('string', json, this, 'physics', 'physics');\n\n        copyProperty('object', json, this, 'layout', 'layout');\n        copyProperty('object', json, this, 'motions', 'motions');\n\n        copyArray('object', json, this, 'hit_areas', 'hitAreas');\n        copyArray('object', json, this, 'expressions', 'expressions');\n        copyArray('object', json, this, 'init_params', 'initParams');\n        copyArray('object', json, this, 'init_opacities', 'initOpacities');\n    }\n\n    replaceFiles(replace: (file: string, path: string) => string) {\n        super.replaceFiles(replace);\n\n        for (const [group, motions] of Object.entries(this.motions)) {\n            for (let i = 0; i < motions.length; i++) {\n                motions[i]!.file = replace(motions[i]!.file, `motions.${group}[${i}].file`);\n\n                if (motions[i]!.sound !== undefined) {\n                    motions[i]!.sound = replace(motions[i]!.sound!, `motions.${group}[${i}].sound`);\n                }\n            }\n        }\n\n        if (this.expressions) {\n            for (let i = 0; i < this.expressions.length; i++) {\n                this.expressions[i]!.file = replace(this.expressions[i]!.file, `expressions[${i}].file`);\n            }\n        }\n    }\n}\n","const SRC_TYPE_MAP = {\n    x: PhysicsHair.Src.SRC_TO_X,\n    y: PhysicsHair.Src.SRC_TO_Y,\n    angle: PhysicsHair.Src.SRC_TO_G_ANGLE,\n};\n\nconst TARGET_TYPE_MAP = {\n    x: PhysicsHair.Src.SRC_TO_X,\n    y: PhysicsHair.Src.SRC_TO_Y,\n    angle: PhysicsHair.Src.SRC_TO_G_ANGLE,\n};\n\nexport class Live2DPhysics {\n    physicsHairs: PhysicsHair[] = [];\n\n    constructor(readonly coreModel: Live2DModelWebGL, json: Cubism2Spec.PhysicsJSON) {\n        if (json.physics_hair) {\n            this.physicsHairs = json.physics_hair.map(definition => {\n                const physicsHair = new PhysicsHair();\n\n                physicsHair.setup(definition.setup.length, definition.setup.regist, definition.setup.mass);\n\n                definition.src.forEach(({ id, ptype, scale, weight }) => {\n                    const type = SRC_TYPE_MAP[ptype];\n\n                    if (type) {\n                        physicsHair.addSrcParam(type, id, scale, weight);\n                    }\n                });\n\n                definition.targets.forEach(({ id, ptype, scale, weight }) => {\n                    const type = TARGET_TYPE_MAP[ptype];\n\n                    if (type) {\n                        physicsHair.addTargetParam(type, id, scale, weight);\n                    }\n                });\n\n                return physicsHair;\n            });\n        }\n    }\n\n    update(elapsed: DOMHighResTimeStamp) {\n        this.physicsHairs.forEach(physicsHair => physicsHair.update(this.coreModel, elapsed));\n    }\n}\n","import { clamp } from '@/utils';\n\nclass Live2DPartsParam {\n    paramIndex = -1;\n    partsIndex = -1;\n    link: Live2DPartsParam[] = [];\n\n    constructor(readonly id: string) {}\n\n    initIndex(model: Live2DModelWebGL) {\n        this.paramIndex = model.getParamIndex('VISIBLE:' + this.id);\n        this.partsIndex = model.getPartsDataIndex(PartsDataID.getID(this.id));\n        model.setParamFloat(this.paramIndex, 1);\n    }\n}\n\nexport class Live2DPose {\n    opacityAnimDuration: DOMHighResTimeStamp = 500;\n\n    partsGroups: Live2DPartsParam[][] = [];\n\n    constructor(readonly coreModel: Live2DModelWebGL, json: Cubism2Spec.PoseJSON) {\n        if (json.parts_visible) {\n            this.partsGroups = json.parts_visible.map(({ group }) =>\n                group.map(({ id, link }) => {\n                    const parts = new Live2DPartsParam(id);\n\n                    if (link) {\n                        parts.link = link.map(l => new Live2DPartsParam(l));\n                    }\n\n                    return parts;\n                }),\n            );\n\n            this.init();\n        }\n    }\n\n    init() {\n        this.partsGroups.forEach(group => {\n            group.forEach(parts => {\n                parts.initIndex(this.coreModel);\n\n                if (parts.paramIndex >= 0) {\n                    const visible = this.coreModel.getParamFloat(parts.paramIndex) !== 0;\n                    this.coreModel.setPartsOpacity(parts.partsIndex, visible ? 1 : 0);\n                    this.coreModel.setParamFloat(parts.paramIndex, visible ? 1 : 0);\n\n                    if (parts.link.length > 0) {\n                        parts.link.forEach(p => p.initIndex(this.coreModel));\n                    }\n                }\n            });\n        });\n    }\n\n    normalizePartsOpacityGroup(partsGroup: Live2DPartsParam[], dt: DOMHighResTimeStamp) {\n        const model = this.coreModel;\n        const phi = 0.5;\n        const maxBackOpacity = 0.15;\n        let visibleOpacity = 1;\n\n        let visibleIndex = partsGroup.findIndex(\n            ({ paramIndex, partsIndex }) => partsIndex >= 0 && model.getParamFloat(paramIndex) !== 0,\n        );\n\n        if (visibleIndex >= 0) {\n            const originalOpacity = model.getPartsOpacity(partsGroup[visibleIndex]!.partsIndex);\n\n            visibleOpacity = clamp(originalOpacity + dt / this.opacityAnimDuration, 0, 1);\n        } else {\n            visibleIndex = 0;\n            visibleOpacity = 1;\n        }\n\n        partsGroup.forEach(({ partsIndex }, index) => {\n            if (partsIndex >= 0) {\n                if (visibleIndex == index) {\n                    model.setPartsOpacity(partsIndex, visibleOpacity);\n                } else {\n                    let opacity = model.getPartsOpacity(partsIndex);\n\n                    // I can't understand this part, so just leave it original\n                    let a1;\n                    if (visibleOpacity < phi) {\n                        a1 = (visibleOpacity * (phi - 1)) / phi + 1;\n                    } else {\n                        a1 = ((1 - visibleOpacity) * phi) / (1 - phi);\n                    }\n                    let backOp = (1 - a1) * (1 - visibleOpacity);\n                    if (backOp > maxBackOpacity) {\n                        a1 = 1 - maxBackOpacity / (1 - visibleOpacity);\n                    }\n                    if (opacity > a1) {\n                        opacity = a1;\n                    }\n\n                    model.setPartsOpacity(partsIndex, opacity);\n                }\n            }\n        });\n    }\n\n    copyOpacity(partsGroup: Live2DPartsParam[]) {\n        const model = this.coreModel;\n\n        partsGroup.forEach(({ partsIndex, link }) => {\n            if (partsIndex >= 0 && link) {\n                const opacity = model.getPartsOpacity(partsIndex);\n\n                link.forEach(({ partsIndex }) => {\n                    if (partsIndex >= 0) {\n                        model.setPartsOpacity(partsIndex, opacity);\n                    }\n                });\n            }\n        });\n    }\n\n    update(dt: DOMHighResTimeStamp) {\n        this.partsGroups.forEach(partGroup => {\n            this.normalizePartsOpacityGroup(partGroup, dt);\n            this.copyOpacity(partGroup);\n        });\n    }\n}\n","import { Cubism2InternalModel } from '@/cubism2/Cubism2InternalModel';\nimport { Cubism2ModelSettings } from '@/cubism2/Cubism2ModelSettings';\nimport { Live2DPhysics } from '@/cubism2/Live2DPhysics';\nimport { Live2DPose } from '@/cubism2/Live2DPose';\nimport { Live2DFactory, Live2DFactoryOptions } from '@/factory/Live2DFactory';\n\nLive2DFactory.registerRuntime({\n    version: 2,\n\n    test(source: any): boolean {\n        return source instanceof Cubism2ModelSettings || Cubism2ModelSettings.isValidJSON(source);\n    },\n\n    ready(): Promise<void> {\n        return Promise.resolve();\n    },\n\n    isValidMoc(modelData: ArrayBuffer): boolean {\n        if (modelData.byteLength < 3) {\n            return false;\n        }\n\n        const view = new Int8Array(modelData, 0, 3);\n\n        return String.fromCharCode(...view) === 'moc';\n    },\n\n    createModelSettings(json: object): Cubism2ModelSettings {\n        return new Cubism2ModelSettings(json as Cubism2Spec.ModelJSON & { url: string });\n    },\n\n    createCoreModel(data: ArrayBuffer): Live2DModelWebGL {\n        const model = Live2DModelWebGL.loadModel(data);\n\n        const error = Live2D.getError();\n        if (error) throw error;\n\n        return model;\n    },\n\n    createInternalModel(coreModel: Live2DModelWebGL, settings: Cubism2ModelSettings, options?: Live2DFactoryOptions): Cubism2InternalModel {\n        return new Cubism2InternalModel(coreModel, settings, options);\n    },\n\n    createPose(coreModel: Live2DModelWebGL, data: any): Live2DPose {\n        return new Live2DPose(coreModel, data);\n    },\n\n    createPhysics(coreModel: Live2DModelWebGL, data: any): Live2DPhysics {\n        return new Live2DPhysics(coreModel, data);\n    },\n});\n","import './check-runtime';\nimport './patch-motion';\n\nexport * from './Cubism2ExpressionManager';\nexport * from './Cubism2InternalModel';\nexport * from './Cubism2ModelSettings';\nexport * from './Cubism2MotionManager';\nexport * from './Live2DExpression';\nexport * from './Live2DEyeBlink';\nexport * from './Live2DPhysics';\nexport * from './Live2DPose';\nexport * from './factory';\n\n","if (!(window as any).Live2D) {\n    throw new Error('Cannot find Cubism 2 runtime. Did you forget to include the live2d.min.js?');\n}\n","export * from './common';\nexport * from './cubism2';\n"],"sourceRoot":""}