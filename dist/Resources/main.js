const serverURL="http://localhost:50021",debug=!1,modelPath="/Resources/AModel/AModel/amodel.model3.json",position={boxWidth:360,boxHeight:700,modelScale:.13,modelX:0,modelY:300};let indexLibrary=null,next_flag=4;const agentFlag=document.getElementById("agent_visible_flag"),loader=document.querySelector(".loader"),overlayContents=document.getElementById("overlay_contents"),startButton=document.getElementById("start_button"),overlay=document.getElementById("overlay"),overlayWindow=document.getElementById("overlayWindow");function updateTopbar(e,t){const n=document.getElementById("topbar-right");n&&(n.textContent=`当前${e}　残り${t}個`)}agentFlag&&new MutationObserver((function(e){e.forEach((function(e){"1"===e.target.textContent&&(loader&&(loader.style.display="none"),overlayContents&&(overlayContents.style.visibility="visible"))}))})).observe(agentFlag,{characterData:!0,childList:!0,subtree:!0}),startButton?.addEventListener("click",(function(){next_flag-=1,overlay&&(overlay.style.display="none"),overlayWindow&&(overlayWindow.style.display="none"),indexLibrary.chatgpt_init("放射性廃棄物の長期管理が将来の世代に大きな負担を残す可能性が増す"),updateTopbar("ABCABCABC",next_flag)})),window.addEventListener("load",(()=>{console.log("ロード"),indexLibrary=new IndexLibrary(!1,serverURL,modelPath,position),indexLibrary.onload(),console.log("main.js")}),!1),window.addEventListener("beforeunload",(()=>{console.log("アンロード"),indexLibrary.onUnload()}));const img=document.querySelector(".chat-input img"),sysTime=document.querySelector(".topbar-left"),currentTime=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});sysTime.innerHTML=currentTime;const btn=document.querySelector("#btn"),txt=document.querySelector("#txt");function copyConversationToClipboard(){const e=document.querySelectorAll("p.copy-msg-USER, p.copy-msg-GPT");let t="";e.forEach((e=>{e.classList.contains("copy-msg-USER")?t+=`user: ${e.innerText}\n`:e.classList.contains("copy-msg-GPT")&&(t+=`assistant: ${e.innerText}\n`)})),console.log(t)}btn?.addEventListener("click",(()=>{if(!txt.value.trim())return txt.style.border="2px solid red",void setTimeout((()=>{txt.style.border=""}),300);indexLibrary.handleChat(1,"放射性廃棄物の長期管理が将来の世代に大きな負担を残す可能性が増す"),next_flag>0?(next.style.visibility="visible",next.style.pointerEvents="auto"):(next.style.visibility="hidden",next.style.pointerEvents="none")}));const copy=document.getElementById("git_copy");copy.addEventListener("click",(e=>{copyConversationToClipboard()}));const next=document.getElementById("next1");next.style.visibility="hidden",next.style.pointerEvents="none",next.addEventListener("click",(e=>{next.style.visibility="hidden",next.style.pointerEvents="none",next_flag-=1,next_flag>0?(indexLibrary.chatgpt_init("事故発生時に壊滅的な影響を及ぼすリスクが高まる"),console.log("12312312312",next_flag),updateTopbar("CDECDECDE",next_flag)):updateTopbar("当前对话结束后，前往下一页",next_flag)}));let startTime=(new Date).getTime();function timingTime(){let e=(new Date).getTime()-startTime,t=Math.floor(e/1e3),n=t%60,o=Math.floor(t/60),i=o%60;return"経過時間："+Math.floor(o/60)%24+":"+i+":"+n}setInterval((()=>{document.getElementById("topbar-left").innerHTML=timingTime()}),1e3);