var items={issue1:{name_JA:"${e://Field/issue1_name}",img_url:"${e://Field/issue1_img}"},issue2:{name_JA:"${e://Field/issue2_name}",img_url:"${e://Field/issue2_img}"},issue3:{name_JA:"${e://Field/issue3_name}",img_url:"${e://Field/issue3_img}"},issue4:{name_JA:"${e://Field/issue4_name}",img_url:"${e://Field/issue4_img}"}};Qualtrics.SurveyEngine.addOnload((function(){jQuery(".QuestionBody").css({width:"1200px "}),jQuery("#"+this.questionId+"Separator.Separator").css({margin:"0px ",height:"0px",border:"0px"}),this.questionclick=function(e,t){console.log("Element="+t),t.type},this.hideNextButton(),function(e,t,i){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=function(e,t){return i(e,t)}:i(e,t)}("undefined"!=typeof window?window.jQuery:{},"undefined"!=typeof window?window:this,(function(e,t){"use strict";function i(e){var t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this[t]=e[t]);return this}function n(){pe(this,n.baseDefaults)}function r(e){return"string"===ve(e)}function a(e){return"function"===ve(e)}function o(e){return!isNaN(me(e))&&!isNaN(he(e))}function s(e){return e&&e.getContext?e.getContext("2d"):null}function l(e){var t,i;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i=e[t],"string"===ve(i)&&o(i)&&"text"!==t&&(e[t]=he(i)));void 0!==e.text&&(e.text=String(e.text))}function _(e){return(e=pe({},e)).masks=e.masks.slice(0),e}function d(e,t){var i;e.save(),i=_(t.transforms),t.savedTransforms.push(i)}function u(e,t){0===t.savedTransforms.length?t.transforms=_(je):(e.restore(),t.transforms=t.savedTransforms.pop())}function c(e,t,i,n){i[n]&&(a(i[n])?t[n]=i[n].call(e,i):t[n]=i[n])}function g(e,t,i){c(e,t,i,"fillStyle"),c(e,t,i,"strokeStyle"),t.lineWidth=i.strokeWidth,i.rounded?t.lineCap=t.lineJoin="round":(t.lineCap=i.strokeCap,t.lineJoin=i.strokeJoin,t.miterLimit=i.miterLimit),i.strokeDash||(i.strokeDash=[]),t.setLineDash&&t.setLineDash(i.strokeDash),t.webkitLineDash=i.strokeDash,t.lineDashOffset=t.webkitLineDashOffset=t.mozDashOffset=i.strokeDashOffset,t.shadowOffsetX=i.shadowX,t.shadowOffsetY=i.shadowY,t.shadowBlur=i.shadowBlur,t.shadowColor=i.shadowColor,t.globalAlpha=i.opacity,t.globalCompositeOperation=i.compositing,i.imageSmoothing&&(t.imageSmoothingEnabled=i.imageSmoothing)}function m(e,t,i){i.mask&&(i.autosave&&d(e,t),e.clip(),t.transforms.masks.push(i._args))}function h(e,t){t._transformed&&e.restore()}function p(e,t,i){i.closed&&t.closePath(),i.shadowStroke&&0!==i.strokeWidth?(t.stroke(),t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.stroke()):(t.fill(),"transparent"!==i.fillStyle&&(t.shadowColor="transparent"),0!==i.strokeWidth&&t.stroke()),i.closed||t.closePath(),h(t,i),i.mask&&m(t,v(e),i)}function f(e,t,i,n,r){i._toRad=i.inDegrees?xe/180:1,i._transformed=!0,t.save(),i.fromCenter||i._centered||void 0===n||(void 0===r&&(r=n),i.x+=n/2,i.y+=r/2,i._centered=!0),i.rotate&&W(t,i,null),1===i.scale&&1===i.scaleX&&1===i.scaleY||B(t,i,null),(i.translate||i.translateX||i.translateY)&&H(t,i,null)}function v(t){var i,n=Te.dataCache;return n._canvas===t&&n._data?i=n._data:((i=e.data(t,"jCanvas"))||(i={canvas:t,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:null,cursor:e(t).css("cursor"),drag:{layer:null,dragging:!1},event:{type:null,x:null,y:null},events:{},transforms:_(je),savedTransforms:[],animating:!1,animated:null,pixelRatio:1,scaled:!1,redrawOnMousemove:!1},e.data(t,"jCanvas",i)),n._canvas=t,n._data=i),i}function y(e,t,i){var n;for(n in Oe.events)Object.prototype.hasOwnProperty.call(Oe.events,n)&&(i[n]||i.cursors&&i.cursors[n])&&b(e,t,i,n);t.events.mouseout||(e.bind("mouseout.jCanvas",(function(){var i,n=t.drag.layer;for(n&&(t.drag={},R(e,t,n,"dragcancel")),i=0;i<t.layers.length;i+=1)(n=t.layers[i])._hovered&&e.triggerLayerEvent(t.layers[i],"mouseout");e.drawLayers()})),t.events.mouseout=!0)}function x(e,t,i,n){Oe.events[n](e,t),i._event=!0}function b(e,t,i,n){x(e,t,i,n),"mouseover"!==n&&"mouseout"!==n&&"mousemove"!==n||(t.redrawOnMousemove=!0)}function w(e,t,i){var n,r;if(i.draggable||i.cursors){for(n=["mousedown","mousemove","mouseup"],r=0;r<n.length;r+=1)x(e,t,i,n[r]);i._event=!0}}function k(e,t,i,n){var a=t.layer.names;n?void 0!==n.name&&r(i.name)&&i.name!==n.name&&delete a[i.name]:n=i,r(n.name)&&(a[n.name]=i)}function $(e,t,i,n){var r,a,o,s,l,_=t.layer.groups;if(n){if(void 0!==n.groups&&null!==i.groups)for(o=0;o<i.groups.length;o+=1)if(r=_[a=i.groups[o]]){for(l=0;l<r.length;l+=1)if(r[l]===i){s=l,r.splice(l,1);break}0===r.length&&delete _[a]}}else n=i;if(void 0!==n.groups&&null!==n.groups)for(o=0;o<n.groups.length;o+=1)(r=_[a=n.groups[o]])||((r=_[a]=[]).name=a),void 0===s&&(s=r.length),r.splice(s,0,i)}function L(e){var t,i,n;for(t=null,i=e.intersecting.length-1;i>=0;i-=1)if((t=e.intersecting[i])._masks){for(n=t._masks.length-1;n>=0;n-=1)if(!t._masks[n].intersects){t.intersects=!1;break}if(t.intersects&&!t.intangible)break}return t&&t.intangible&&(t=null),t}function C(e,t,i,n){i&&i.visible&&i._method&&(i._next=n||null,i._method&&i._method.call(e,i))}function S(e,t,i){var n,r,a,o,s,l,_,d,u,c;if(s=(r=(o=t.drag).layer)&&r.dragGroups||[],n=t.layers,"mousemove"===i||"touchmove"===i){if(o.dragging||(o.dragging=!0,r.dragging=!0,r.bringToFront&&(n.splice(r.index,1),r.index=n.push(r)),r._startX=r.x,r._startY=r.y,r._endX=r._eventX,r._endY=r._eventY,R(e,t,r,"dragstart")),o.dragging)for(u=r._eventX-(r._endX-r._startX),c=r._eventY-(r._endY-r._startY),r.updateDragX&&(u=r.updateDragX.call(e[0],r,u)),r.updateDragY&&(c=r.updateDragY.call(e[0],r,c)),r.dx=u-r.x,r.dy=c-r.y,"y"!==r.restrictDragToAxis&&(r.x=u),"x"!==r.restrictDragToAxis&&(r.y=c),R(e,t,r,"drag"),d=0;d<s.length;d+=1)if(_=s[d],l=t.layer.groups[_],r.groups&&l)for(a=0;a<l.length;a+=1)l[a]!==r&&("y"!==r.restrictDragToAxis&&"y"!==l[a].restrictDragToAxis&&(l[a].x+=r.dx),"x"!==r.restrictDragToAxis&&"x"!==l[a].restrictDragToAxis&&(l[a].y+=r.dy))}else"mouseup"!==i&&"touchend"!==i||(o.dragging&&(r.dragging=!1,o.dragging=!1,t.redrawOnMousemove=t.originalRedrawOnMousemove,R(e,t,r,"dragstop")),t.drag={})}function E(t,i,n){var r;i.cursors&&(r=i.cursors[n]),-1!==e.inArray(r,De.cursors)&&(r=De.prefix+r),r&&t.css({cursor:r})}function T(e,t){e.css({cursor:t.cursor})}function j(e,t,i,n,r){n[i]&&t._running&&!t._running[i]&&(t._running[i]=!0,n[i].call(e[0],t,r),t._running[i]=!1)}function D(t,i){return!(t.disableEvents||t.intangible&&-1!==e.inArray(i,Re))}function R(e,t,i,n,r){D(i,n)&&("mouseout"!==n&&E(e,i,n),j(e,i,n,i,r),j(e,i,n,t.eventHooks,r),j(e,i,n,Oe.eventHooks,r))}function O(t,n,a,o){var s,_,d,u=n._layer?a:n;return n._args=a,(n.draggable||n.dragGroups)&&(n.layer=!0,n.draggable=!0),n._method||(o?n._method=o:n.method?n._method=e.fn[n.method]:n.type&&(n._method=e.fn[Ee.drawings[n.type]])),n.layer&&!n._layer?(s=e(t),d=(_=v(t)).layers,(null===u.name||r(u.name)&&void 0===_.layer.names[u.name])&&(l(n),(u=new i(n)).canvas=t,u.layer=!0,u._layer=!0,u._running={},null!==u.data?u.data=pe({},u.data):u.data={},null!==u.groups?u.groups=u.groups.slice(0):u.groups=[],k(0,_,u),$(0,_,u),y(s,_,u),w(s,_,u),n._event=u._event,u._method===e.fn.drawText&&s.measureText(u),null===u.index&&(u.index=d.length),d.splice(u.index,0,u),n._args=u,R(s,_,u,"add"))):n.layer||l(n),u}function P(e){var t,i;for(i=0;i<De.props.length;i+=1)e[t=De.props[i]]=e["_"+t]}function z(e,t){var i,n;for(n=0;n<De.props.length;n+=1)void 0!==e[i=De.props[n]]&&(e["_"+i]=e[i],De.propsObj[i]=!0,t&&delete e[i])}function A(e,t,i){var n,r,o,s;for(n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&(a(r=i[n])&&(i[n]=r.call(e,t,n)),"object"===ve(r)&&ye(r))){for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s=r[o],void 0!==t[n]&&(t[n+"."+o]=t[n][o],i[n+"."+o]=s));delete i[n]}return i}function F(e){var t;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1!==t.indexOf(".")&&delete e[t]}function I(t){var i,n,r=[],a=1;return"transparent"===t?t="rgba(0, 0, 0, 0)":t.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&(i=(n=_e.head).style.color,n.style.color=t,t=e.css(n,"color"),n.style.color=i),t.match(/^rgb/gi)&&(r=t.match(/(\d+(\.\d+)?)/gi),t.match(/%/gi)&&(a=2.55),r[0]*=a,r[1]*=a,r[2]*=a,void 0!==r[3]?r[3]=he(r[3]):r[3]=1),r}function X(e){var t,i=3;for("array"!==ve(e.start)&&(e.start=I(e.start),e.end=I(e.end)),e.now=[],1===e.start[3]&&1===e.end[3]||(i=4),t=0;t<i;t+=1)e.now[t]=e.start[t]+(e.end[t]-e.start[t])*e.pos,t<3&&(e.now[t]=be(e.now[t]));1!==e.start[3]||1!==e.end[3]?e.now="rgba("+e.now.join(",")+")":(e.now.slice(0,3),e.now="rgb("+e.now.join(",")+")"),e.elem.nodeName?e.elem.style[e.prop]=e.now:e.elem[e.prop]=e.now}function Y(e){return Ee.mouseEvents[e]&&(e=Ee.mouseEvents[e]),e}function Q(e){Oe.events[e]=function(t,i){function n(e){o.x=e.offsetX,o.y=e.offsetY,o.type=r,o.event=e,("mousemove"!==e.type||i.redrawOnMousemove||i.drag.dragging)&&t.drawLayers({resetFire:!0}),e.preventDefault()}var r,a,o;o=i.event,a=function(e){return Ee.touchEvents[e]&&(e=Ee.touchEvents[e]),e}(r="mouseover"===e||"mouseout"===e?"mousemove":e),i.events[r]||(a!==r?t.bind(r+".jCanvas "+a+".jCanvas",n):t.bind(r+".jCanvas",n),i.events[r]=!0)}}function N(e,t,i){var n,r,a,o,s,l,_,d;(n=i._args)&&(null!==(a=(r=v(e)).event).x&&null!==a.y&&(l=a.x*r.pixelRatio,_=a.y*r.pixelRatio,o=t.isPointInPath(l,_)||t.isPointInStroke&&t.isPointInStroke(l,_)),s=r.transforms,n.eventX=a.x,n.eventY=a.y,n.event=a.event,d=r.transforms.rotate,l=n.eventX,_=n.eventY,0!==d?(n._eventX=l*$e(-d)-_*ke(-d),n._eventY=_*$e(-d)+l*ke(-d)):(n._eventX=l,n._eventY=_),n._eventX/=s.scaleX,n._eventY/=s.scaleY,o&&r.intersecting.push(n),n.intersects=Boolean(o))}function W(e,t,i){t._toRad=t.inDegrees?xe/180:1,e.translate(t.x,t.y),e.rotate(t.rotate*t._toRad),e.translate(-t.x,-t.y),i&&(i.rotate+=t.rotate*t._toRad)}function B(e,t,i){1!==t.scale&&(t.scaleX=t.scaleY=t.scale),e.translate(t.x,t.y),e.scale(t.scaleX,t.scaleY),e.translate(-t.x,-t.y),i&&(i.scaleX*=t.scaleX,i.scaleY*=t.scaleY)}function H(e,t,i){t.translate&&(t.translateX=t.translateY=t.translate),e.translate(t.translateX,t.translateY),i&&(i.translateX+=t.translateX,i.translateY+=t.translateY)}function G(e){for(;e<0;)e+=2*xe;return e}function M(e,t){return e.x+e.radius*$e(t)}function V(e,t){return e.y+e.radius*ke(t)}function q(e,t,i,n){var r,a,o,s,l;i===n?(o=0,s=0):(o=i.x,s=i.y),n.inDegrees||360!==n.end||(n.end=2*xe),n.start*=i._toRad,n.end*=i._toRad,n.start-=xe/2,n.end-=xe/2,l=xe/180,n.ccw&&(l*=-1),U(0,t,i,n,M(n,n.start+l),V(n,n.start+l),M(n,n.start),V(n,n.start)),t.arc(n.x+o,n.y+s,n.radius,n.start,n.end,n.ccw),r=M(n,n.end+l),a=V(n,n.end+l),K(0,t,i,n,M(n,n.end),V(n,n.end),r,a)}function J(e,t,i,n,r,a,o,s){var l,_,d,u,c,g,m;n.arrowRadius&&!i.closed&&(m=Le(s-a,o-r),m-=xe,c=i.strokeWidth*$e(m),g=i.strokeWidth*ke(m),l=o+n.arrowRadius*$e(m+n.arrowAngle/2),_=s+n.arrowRadius*ke(m+n.arrowAngle/2),d=o+n.arrowRadius*$e(m-n.arrowAngle/2),u=s+n.arrowRadius*ke(m-n.arrowAngle/2),t.moveTo(l-c,_-g),t.lineTo(o-c,s-g),t.lineTo(d-c,u-g),t.moveTo(o-c,s-g),t.lineTo(o+c,s+g),t.moveTo(o,s))}function U(e,t,i,n,r,a,o,s){n._arrowAngleConverted||(n.arrowAngle*=i._toRad,n._arrowAngleConverted=!0),n.startArrow&&J(0,t,i,n,r,a,o,s)}function K(e,t,i,n,r,a,o,s){n._arrowAngleConverted||(n.arrowAngle*=i._toRad,n._arrowAngleConverted=!0),n.endArrow&&J(0,t,i,n,r,a,o,s)}function Z(e,t,i,n){var r,a,o;for(r=2,U(0,t,i,n,n.x2+i.x,n.y2+i.y,n.x1+i.x,n.y1+i.y),void 0!==n.x1&&void 0!==n.y1&&t.moveTo(n.x1+i.x,n.y1+i.y);a=n["x"+r],o=n["y"+r],void 0!==a&&void 0!==o;)t.lineTo(a+i.x,o+i.y),r+=1;K(0,t,i,n,n["x"+((r-=1)-1)]+i.x,n["y"+(r-1)]+i.y,n["x"+r]+i.x,n["y"+r]+i.y)}function ee(e,t,i,n){var r,a,o,s,l;for(r=2,U(0,t,i,n,n.cx1+i.x,n.cy1+i.y,n.x1+i.x,n.y1+i.y),void 0!==n.x1&&void 0!==n.y1&&t.moveTo(n.x1+i.x,n.y1+i.y);a=n["x"+r],o=n["y"+r],s=n["cx"+(r-1)],l=n["cy"+(r-1)],void 0!==a&&void 0!==o&&void 0!==s&&void 0!==l;)t.quadraticCurveTo(s+i.x,l+i.y,a+i.x,o+i.y),r+=1;K(0,t,i,n,n["cx"+((r-=1)-1)]+i.x,n["cy"+(r-1)]+i.y,n["x"+r]+i.x,n["y"+r]+i.y)}function te(e,t,i,n){var r,a,o,s,l,_,d,u;for(r=2,a=1,U(0,t,i,n,n.cx1+i.x,n.cy1+i.y,n.x1+i.x,n.y1+i.y),void 0!==n.x1&&void 0!==n.y1&&t.moveTo(n.x1+i.x,n.y1+i.y);o=n["x"+r],s=n["y"+r],l=n["cx"+a],_=n["cy"+a],d=n["cx"+(a+1)],u=n["cy"+(a+1)],void 0!==o&&void 0!==s&&void 0!==l&&void 0!==_&&void 0!==d&&void 0!==u;)t.bezierCurveTo(l+i.x,_+i.y,d+i.x,u+i.y,o+i.x,s+i.y),r+=1,a+=2;r-=1,K(0,t,i,n,n["cx"+(1+(a-=2))]+i.x,n["cy"+(a+1)]+i.y,n["x"+r]+i.x,n["y"+r]+i.y)}function ie(e,t,i){return t*=e._toRad,i*$e(t-=xe/2)}function ne(e,t,i){return t*=e._toRad,i*ke(t-=xe/2)}function re(e,t,i,n){var r,a,o,s,l,_,d,u,c,g,m;for(i===n?(s=0,l=0):(s=i.x,l=i.y),r=1,_=u=g=n.x+s,d=c=m=n.y+l,U(0,t,i,n,_+ie(i,n.a1,n.l1),d+ne(i,n.a1,n.l1),_,d),void 0!==n.x&&void 0!==n.y&&t.moveTo(_,d);a=n["a"+r],o=n["l"+r],void 0!==a&&void 0!==o;)u=g,c=m,g+=ie(i,a,o),m+=ne(i,a,o),t.lineTo(g,m),r+=1;K(0,t,i,n,u,c,g,m)}function ae(e,t,i){isNaN(me(i.fontSize))||(i.fontSize+="px"),t.font=i.fontStyle+" "+i.fontSize+" "+i.fontFamily}function oe(t,i,n,r){var a,o,s,l=Te.propCache;if(l.text===n.text&&l.fontStyle===n.fontStyle&&l.fontSize===n.fontSize&&l.fontFamily===n.fontFamily&&l.maxWidth===n.maxWidth&&l.lineHeight===n.lineHeight)n.width=l.width,n.height=l.height;else{for(n.width=i.measureText(r[0]).width,s=1;s<r.length;s+=1)(o=i.measureText(r[s]).width)>n.width&&(n.width=o);a=t.style.fontSize,t.style.fontSize=n.fontSize,n.height=he(e.css(t,"fontSize"))*r.length*n.lineHeight,t.style.fontSize=a}}function se(e,t){var i,n,r,a,o,s,l=String(t.text),_=t.maxWidth,d=l.split("\n"),u=[];for(r=0;r<d.length;r+=1){if(i=[],n="",1===(o=(a=d[r]).split(" ")).length||e.measureText(a).width<_)i=[a];else{for(s=0;s<o.length;s+=1)e.measureText(n+o[s]).width>_&&(""!==n&&i.push(n),n=""),n+=o[s],s!==o.length-1&&(n+=" ");i.push(n)}u=u.concat(i.join("\n").replace(/((\n))|($)/gi,"$2").split("\n"))}return u}var le,_e=t.document,de=t.Image,ue=t.Array,ce=t.getComputedStyle,ge=t.Math,me=t.Number,he=t.parseFloat,pe=e.extend,fe=e.inArray,ve=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},ye=e.isPlainObject,xe=ge.PI,be=ge.round,we=ge.abs,ke=ge.sin,$e=ge.cos,Le=ge.atan2,Ce=ue.prototype.slice,Se=e.event.fix,Ee={},Te={dataCache:{},propCache:{},imageCache:{}},je={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},De={},Re=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],Oe={events:{},eventHooks:{},future:{}};n.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:!0,baseline:"middle",bringToFront:!1,ccw:!1,closed:!1,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:!0,crossOrigin:null,cursors:null,disableEvents:!1,draggable:!1,dragGroups:null,groups:null,data:null,dx:null,dy:null,end:360,eventX:null,eventY:null,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:!0,height:null,imageSmoothing:!0,inDegrees:!0,intangible:!1,index:null,letterSpacing:null,lineHeight:1,layer:!1,mask:!1,maxWidth:null,miterLimit:10,name:null,opacity:1,r1:null,r2:null,radius:0,repeat:"repeat",respectAlign:!1,restrictDragToAxis:null,rotate:0,rounded:!1,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:!1,shadowX:0,shadowY:0,sHeight:null,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:null,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:null,sx:null,sy:null,text:"",translate:0,translateX:0,translateY:0,type:null,visible:!0,width:null,x:0,y:0},le=new n,i.prototype=le,Oe.extend=function(t){return t.name&&(t.props&&pe(le,t.props),e.fn[t.name]=function e(n){var r,a,o,l,_=this;for(a=0;a<_.length;a+=1)(o=s(r=_[a]))&&(O(r,l=new i(n),n,e),g(r,o,l),t.fn.call(r,o,l));return _},t.type&&(Ee.drawings[t.type]=t.name)),e.fn[t.name]},e.fn.getEventHooks=function(){var e={};return 0!==this.length&&(e=v(this[0]).eventHooks),e},e.fn.setEventHooks=function(e){var t,i,n=this;for(t=0;t<n.length;t+=1)i=v(n[t]),pe(i.eventHooks,e);return n},e.fn.getLayers=function(e){var t,i,n,r,o=[];if(0!==this.length)if(i=v(t=this[0]).layers,a(e))for(r=0;r<i.length;r+=1)n=i[r],e.call(t,n)&&o.push(n);else o=i;return o},e.fn.getLayer=function(e){var t,i,n,a,o;if(0!==this.length)if(i=(t=v(this[0])).layers,o=ve(e),e&&e.layer)n=e;else if("number"===o)e<0&&(e=i.length+e),n=i[e];else if("regexp"===o){for(a=0;a<i.length;a+=1)if(r(i[a].name)&&i[a].name.match(e)){n=i[a];break}}else n=t.layer.names[e];return n},e.fn.getLayerGroup=function(e){var t,i,n,r,a=ve(e);if(0!==this.length)if(t=this[0],"array"===a)r=e;else if("regexp"===a){for(n in i=v(t).layer.groups)if(n.match(e)){r=i[n];break}}else r=v(t).layer.groups[e];return r},e.fn.getLayerIndex=function(e){var t=this.getLayers(),i=this.getLayer(e);return fe(i,t)},e.fn.setLayer=function(t,i){var n,r,a,s,_,d,u,c=this;for(r=0;r<c.length;r+=1)if(n=e(c[r]),a=v(c[r]),s=e(c[r]).getLayer(t)){for(_ in k(0,a,s,i),$(0,a,s,i),l(i),i)Object.prototype.hasOwnProperty.call(i,_)&&(d=i[_],"object"===(u=ve(d))&&ye(d)?(s[_]=pe({},d),l(s[_])):"array"===u?s[_]=d.slice(0):"string"===u?0===d.indexOf("+=")?s[_]+=he(d.substr(2)):0===d.indexOf("-=")?s[_]-=he(d.substr(2)):!isNaN(d)&&o(d)&&"text"!==_?s[_]=he(d):s[_]=d:s[_]=d);y(n,a,s),w(n,a,s),!1===e.isEmptyObject(i)&&R(n,a,s,"change",i)}return c},e.fn.setLayers=function(t,i){var n,r,a,o,s=this;for(r=0;r<s.length;r+=1)for(a=(n=e(s[r])).getLayers(i),o=0;o<a.length;o+=1)n.setLayer(a[o],t);return s},e.fn.setLayerGroup=function(t,i){var n,r,a,o,s=this;for(r=0;r<s.length;r+=1)if(a=(n=e(s[r])).getLayerGroup(t))for(o=0;o<a.length;o+=1)n.setLayer(a[o],i);return s},e.fn.moveLayer=function(t,i){var n,r,a,o,s,l=this;for(r=0;r<l.length;r+=1)n=e(l[r]),o=(a=v(l[r])).layers,(s=n.getLayer(t))&&(s.index=fe(s,o),o.splice(s.index,1),o.splice(i,0,s),i<0&&(i=o.length+i),s.index=i,R(n,a,s,"move"));return l},e.fn.removeLayer=function(t){var i,n,r,a,o,s=this;for(n=0;n<s.length;n+=1)i=e(s[n]),r=v(s[n]),a=i.getLayers(),(o=i.getLayer(t))&&(o.index=fe(o,a),a.splice(o.index,1),delete o._layer,k(0,r,o,{name:null}),$(0,r,o,{groups:null}),R(i,r,o,"remove"));return s},e.fn.removeLayers=function(t){var i,n,r,a,o,s,l=this;for(n=0;n<l.length;n+=1){for(i=e(l[n]),r=v(l[n]),a=i.getLayers(t).slice(0),s=0;s<a.length;s+=1)o=a[s],i.removeLayer(o);r.layer.names={},r.layer.groups={}}return l},e.fn.removeLayerGroup=function(t){var i,n,r,a,o=this;if(void 0!==t)for(n=0;n<o.length;n+=1)if(r=(i=e(o[n])).getLayerGroup(t))for(r=r.slice(0),a=0;a<r.length;a+=1)i.removeLayer(r[a]);return o},e.fn.addLayerToGroup=function(t,i){var n,r,a,o=this,s=[i];for(r=0;r<o.length;r+=1)(a=(n=e(o[r])).getLayer(t)).groups&&(s=a.groups.slice(0),-1===fe(i,a.groups)&&s.push(i)),n.setLayer(a,{groups:s});return o},e.fn.removeLayerFromGroup=function(t,i){var n,r,a,o,s=this,l=[];for(r=0;r<s.length;r+=1)(a=(n=e(s[r])).getLayer(t)).groups&&-1!==(o=fe(i,a.groups))&&((l=a.groups.slice(0)).splice(o,1),n.setLayer(a,{groups:l}));return s},De.cursors=["grab","grabbing","zoom-in","zoom-out"],De.prefix=function(){var e=ce(_e.documentElement,"");return"-"+(Ce.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1]+"-"}(),e.fn.triggerLayerEvent=function(t,i){var n,r,a,o=this;for(r=0;r<o.length;r+=1)n=e(o[r]),a=v(o[r]),(t=n.getLayer(t))&&R(n,a,t,i);return o},e.fn.drawLayer=function(t){var i,n,r,a=this;for(i=0;i<a.length;i+=1)n=e(a[i]),s(a[i])&&(r=n.getLayer(t),C(n,0,r));return a},e.fn.drawLayers=function(t){var i,n,r,a,o,l,d,u,c,g,m,h,p=this,f=t||{};for((d=f.index)||(d=0),n=0;n<p.length;n+=1)if(i=e(p[n]),s(p[n])){for(c=v(p[n]),!1!==f.clear&&i.clearCanvas(),f.complete&&(c.drawLayersComplete=f.complete),r=c.layers,l=d;l<r.length;l+=1)if((a=r[l]).index=l,f.resetFire&&(a._fired=!1),C(i,0,a,l+1),a._masks=c.transforms.masks.slice(0),a._method===e.fn.drawImage&&a.visible){h=!0;break}if(h)continue;u=l,f.complete&&(f.complete.call(p[n]),delete c.drawLayersComplete),a=L(c),m=(g=c.event).type,c.drag.layer&&S(i,c,m),null===(o=c.lastIntersected)||a===o||!o._hovered||o._fired||c.drag.dragging||(c.lastIntersected=null,o._fired=!0,o._hovered=!1,R(i,c,o,"mouseout"),T(i,c)),a&&(a[m]||(m=Y(m)),a._event&&a.intersects&&(c.lastIntersected=a,(a.mouseover||a.mouseout||a.cursors)&&!c.drag.dragging&&(a._hovered||a._fired||(a._fired=!0,a._hovered=!0,R(i,c,a,"mouseover"))),a._fired||(a._fired=!0,g.type=null,R(i,c,a,m)),!a.draggable||a.disableEvents||"mousedown"!==m&&"touchstart"!==m||(c.drag.layer=a,c.originalRedrawOnMousemove=c.redrawOnMousemove,c.redrawOnMousemove=!0))),null!==a||c.drag.dragging||T(i,c),u===r.length&&(c.intersecting.length=0,c.transforms=_(je),c.savedTransforms.length=0)}return p},e.fn.addLayer=function(e){var t,n,r=this;for(t=0;t<r.length;t+=1)s(r[t])&&((n=new i(e)).layer=!0,O(r[t],n,e));return r},De.props=["width","height","opacity","lineHeight"],De.propsObj={},e.fn.animateLayer=function(){var t,i,n,r,o,l=this,_=Ce.call(arguments,0);for("object"===ve(_[2])?(_.splice(2,0,_[2].duration||null),_.splice(3,0,_[3].easing||null),_.splice(4,0,_[4].complete||null),_.splice(5,0,_[5].step||null)):(void 0===_[2]?(_.splice(2,0,null),_.splice(3,0,null),_.splice(4,0,null)):a(_[2])&&(_.splice(2,0,null),_.splice(3,0,null)),void 0===_[3]?(_[3]=null,_.splice(4,0,null)):a(_[3])&&_.splice(3,0,null)),i=0;i<l.length;i+=1)t=e(l[i]),s(l[i])&&(n=v(l[i]),(r=t.getLayer(_[0]))&&r._method!==e.fn.draw&&(o=pe({},_[1]),z(o=A(l[i],r,o),!0),z(r),r.style=De.propsObj,e(r).animate(o,{duration:_[2],easing:e.easing[_[3]]?_[3]:null,complete:function(e,t,i){return function(){P(i),F(i),t.animating&&t.animated!==i||e.drawLayers(),i._animating=!1,t.animating=!1,t.animated=null,_[4]&&_[4].call(e[0],i),R(e,t,i,"animateend")}}(t,n,r),step:function(e,t,i){return function(n,r){var a,o,s,l=!1;"_"===r.prop[0]&&(l=!0,r.prop=r.prop.replace("_",""),i[r.prop]=i["_"+r.prop]),-1!==r.prop.indexOf(".")&&(o=(a=r.prop.split("."))[0],s=a[1],i[o]&&(i[o][s]=r.now)),i._pos!==r.pos&&(i._pos=r.pos,i._animating||t.animating||(i._animating=!0,t.animating=!0,t.animated=i),t.animating&&t.animated!==i||e.drawLayers()),_[5]&&_[5].call(e[0],n,r,i),R(e,t,i,"animate",r),l&&(r.prop="_"+r.prop)}}(t,n,r)}),R(t,n,r,"animatestart")));return l},e.fn.animateLayerGroup=function(t){var i,n,r,a,o=this,s=Ce.call(arguments,0);for(n=0;n<o.length;n+=1)if(r=(i=e(o[n])).getLayerGroup(t))for(a=0;a<r.length;a+=1)s[0]=r[a],i.animateLayer.apply(i,s);return o},e.fn.delayLayer=function(t,i){var n,r,a,o,s=this;for(i=i||0,r=0;r<s.length;r+=1)n=e(s[r]),a=v(s[r]),(o=n.getLayer(t))&&(e(o).delay(i),R(n,a,o,"delay"));return s},e.fn.delayLayerGroup=function(t,i){var n,r,a,o,s,l=this;for(i=i||0,r=0;r<l.length;r+=1)if(a=(n=e(l[r])).getLayerGroup(t))for(s=0;s<a.length;s+=1)o=a[s],n.delayLayer(o,i);return l},e.fn.stopLayer=function(t,i){var n,r,a,o,s=this;for(r=0;r<s.length;r+=1)n=e(s[r]),a=v(s[r]),(o=n.getLayer(t))&&(e(o).stop(i),R(n,a,o,"stop"));return s},e.fn.stopLayerGroup=function(t,i){var n,r,a,o,s,l=this;for(r=0;r<l.length;r+=1)if(a=(n=e(l[r])).getLayerGroup(t))for(s=0;s<a.length;s+=1)o=a[s],n.stopLayer(o,i);return l},function(t){var i;for(i=0;i<t.length;i+=1)e.fx.step[t[i]]=X}(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),Ee.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},Ee.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},function(e){var t;for(t=0;t<e.length;t+=1)Q(e[t])}(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend","pointerdown","pointermove","pointerup","contextmenu"]),e.event.fix=function(t){var i,n,r;if(n=(t=Se.call(e.event,t)).originalEvent)if(r=n.changedTouches,void 0!==t.pageX&&void 0===t.offsetX)try{(i=e(t.currentTarget).offset())&&(t.offsetX=t.pageX-i.left,t.offsetY=t.pageY-i.top)}catch(e){}else if(r)try{(i=e(t.currentTarget).offset())&&(t.offsetX=r[0].pageX-i.left,t.offsetY=r[0].pageY-i.top)}catch(e){}return t},Ee.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse",function:"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},e.fn.draw=function e(t){var n,r,a=this,o=new i(t);if(Ee.drawings[o.type]&&"function"!==o.type)a[Ee.drawings[o.type]](t);else for(n=0;n<a.length;n+=1)(r=s(a[n]))&&(o=new i(t),O(a[n],o,t,e),o.visible&&o.fn&&o.fn.call(a[n],r,o));return a},e.fn.clearCanvas=function e(t){var n,r,a=this,o=new i(t);for(n=0;n<a.length;n+=1)(r=s(a[n]))&&(null===o.width||null===o.height?(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,a[n].width,a[n].height),r.restore()):(O(a[n],o,t,e),f(a[n],r,o,o.width,o.height),r.clearRect(o.x-o.width/2,o.y-o.height/2,o.width,o.height),h(r,o)));return a},e.fn.saveCanvas=function e(t){var n,r,a,o,l,_=this;for(n=0;n<_.length;n+=1)if(r=s(_[n]))for(o=v(_[n]),a=new i(t),O(_[n],a,t,e),l=0;l<a.count;l+=1)d(r,o);return _},e.fn.restoreCanvas=function e(t){var n,r,a,o,l,_=this;for(n=0;n<_.length;n+=1)if(r=s(_[n]))for(o=v(_[n]),a=new i(t),O(_[n],a,t,e),l=0;l<a.count;l+=1)u(r,o);return _},e.fn.rotateCanvas=function e(t){var n,r,a,o,l=this;for(n=0;n<l.length;n+=1)(r=s(l[n]))&&(o=v(l[n]),a=new i(t),O(l[n],a,t,e),a.autosave&&d(r,o),W(r,a,o.transforms));return l},e.fn.scaleCanvas=function e(t){var n,r,a,o,l=this;for(n=0;n<l.length;n+=1)(r=s(l[n]))&&(o=v(l[n]),a=new i(t),O(l[n],a,t,e),a.autosave&&d(r,o),B(r,a,o.transforms));return l},e.fn.translateCanvas=function e(t){var n,r,a,o,l=this;for(n=0;n<l.length;n+=1)(r=s(l[n]))&&(o=v(l[n]),a=new i(t),O(l[n],a,t,e),a.autosave&&d(r,o),H(r,a,o.transforms));return l},e.fn.drawRect=function e(t){var n,r,a,o,l,_,d,u,c,m=this;for(n=0;n<m.length;n+=1)(r=s(m[n]))&&(a=new i(t),O(m[n],a,t,e),a.visible&&(f(m[n],r,a,a.width,a.height),g(m[n],r,a),r.beginPath(),a.width&&a.height&&(o=a.x-a.width/2,l=a.y-a.height/2,(u=we(a.cornerRadius))?(_=a.x+a.width/2,d=a.y+a.height/2,a.width<0&&(c=o,o=_,_=c),a.height<0&&(c=l,l=d,d=c),_-o-2*u<0&&(u=(_-o)/2),d-l-2*u<0&&(u=(d-l)/2),r.moveTo(o+u,l),r.lineTo(_-u,l),r.arc(_-u,l+u,u,3*xe/2,2*xe,!1),r.lineTo(_,d-u),r.arc(_-u,d-u,u,0,xe/2,!1),r.lineTo(o+u,d),r.arc(o+u,d-u,u,xe/2,xe,!1),r.lineTo(o,l+u),r.arc(o+u,l+u,u,xe,3*xe/2,!1),a.closed=!0):r.rect(o,l,a.width,a.height)),N(m[n],r,a),p(m[n],r,a)));return m},e.fn.drawArc=function e(t){var n,r,a,o=this;for(n=0;n<o.length;n+=1)(r=s(o[n]))&&(a=new i(t),O(o[n],a,t,e),a.visible&&(f(o[n],r,a,2*a.radius),g(o[n],r,a),r.beginPath(),q(o[n],r,a,a),N(o[n],r,a),p(o[n],r,a)));return o},e.fn.drawEllipse=function e(t){var n,r,a,o,l,_=this;for(n=0;n<_.length;n+=1)(r=s(_[n]))&&(a=new i(t),O(_[n],a,t,e),a.visible&&(f(_[n],r,a,a.width,a.height),g(_[n],r,a),o=a.width*(4/3),l=a.height,r.beginPath(),r.moveTo(a.x,a.y-l/2),r.bezierCurveTo(a.x-o/2,a.y-l/2,a.x-o/2,a.y+l/2,a.x,a.y+l/2),r.bezierCurveTo(a.x+o/2,a.y+l/2,a.x+o/2,a.y-l/2,a.x,a.y-l/2),N(_[n],r,a),a.closed=!0,p(_[n],r,a)));return _},e.fn.drawPolygon=function e(t){var n,r,a,o,l,_,d,u,c,m,h=this;for(n=0;n<h.length;n+=1)if((r=s(h[n]))&&(a=new i(t),O(h[n],a,t,e),a.visible)){for(f(h[n],r,a,2*a.radius),g(h[n],r,a),o=(_=(l=2*xe/a.sides)/2)+xe/2,d=a.radius*$e(_),r.beginPath(),m=0;m<a.sides;m+=1)u=a.x+a.radius*$e(o),c=a.y+a.radius*ke(o),r.lineTo(u,c),a.concavity&&(u=a.x+(d+-d*a.concavity)*$e(o+_),c=a.y+(d+-d*a.concavity)*ke(o+_),r.lineTo(u,c)),o+=l;N(h[n],r,a),a.closed=!0,p(h[n],r,a)}return h},e.fn.drawSlice=function e(t){var n,r,a,o,l,_,d=this;for(n=0;n<d.length;n+=1)(r=s(d[n]))&&(a=new i(t),O(d[n],a,t,e),a.visible&&(f(d[n],r,a,2*a.radius),g(d[n],r,a),a.start*=a._toRad,a.end*=a._toRad,a.start-=xe/2,a.end-=xe/2,a.start=G(a.start),a.end=G(a.end),a.end<a.start&&(a.end+=2*xe),o=(a.start+a.end)/2,l=a.radius*a.spread*$e(o),_=a.radius*a.spread*ke(o),a.x+=l,a.y+=_,r.beginPath(),r.arc(a.x,a.y,a.radius,a.start,a.end,a.ccw),r.lineTo(a.x,a.y),N(d[n],r,a),a.closed=!0,p(d[n],r,a)));return d},e.fn.drawLine=function e(t){var n,r,a,o=this;for(n=0;n<o.length;n+=1)(r=s(o[n]))&&(a=new i(t),O(o[n],a,t,e),a.visible&&(f(o[n],r,a),g(o[n],r,a),r.beginPath(),Z(o[n],r,a,a),N(o[n],r,a),p(o[n],r,a)));return o},e.fn.drawQuadratic=function e(t){var n,r,a,o=this;for(n=0;n<o.length;n+=1)(r=s(o[n]))&&(a=new i(t),O(o[n],a,t,e),a.visible&&(f(o[n],r,a),g(o[n],r,a),r.beginPath(),ee(o[n],r,a,a),N(o[n],r,a),p(o[n],r,a)));return o},e.fn.drawBezier=function e(t){var n,r,a,o=this;for(n=0;n<o.length;n+=1)(r=s(o[n]))&&(a=new i(t),O(o[n],a,t,e),a.visible&&(f(o[n],r,a),g(o[n],r,a),r.beginPath(),te(o[n],r,a,a),N(o[n],r,a),p(o[n],r,a)));return o},e.fn.drawVector=function e(t){var n,r,a,o=this;for(n=0;n<o.length;n+=1)(r=s(o[n]))&&(a=new i(t),O(o[n],a,t,e),a.visible&&(f(o[n],r,a),g(o[n],r,a),r.beginPath(),re(o[n],r,a,a),N(o[n],r,a),p(o[n],r,a)));return o},e.fn.drawPath=function e(t){var n,r,a,o,l,_=this;for(n=0;n<_.length;n+=1)if((r=s(_[n]))&&(a=new i(t),O(_[n],a,t,e),a.visible)){for(f(_[n],r,a),g(_[n],r,a),r.beginPath(),o=1;void 0!==(l=a["p"+o]);)"line"===(l=new i(l)).type?Z(_[n],r,a,l):"quadratic"===l.type?ee(_[n],r,a,l):"bezier"===l.type?te(_[n],r,a,l):"vector"===l.type?re(_[n],r,a,l):"arc"===l.type&&q(_[n],r,a,l),o+=1;N(_[n],r,a),p(_[n],r,a)}return _},e.fn.drawText=function e(t){var n,r,a,o,l,_,d,u,c,m,p,v,y,x=this;for(n=0;n<x.length;n+=1)if((r=s(x[n]))&&(a=new i(t),O(x[n],a,t,e),a.visible)){if(r.textBaseline=a.baseline,r.textAlign=a.align,ae(x[n],r,a),o=null!==a.maxWidth?se(r,a):a.text.toString().split("\n"),oe(x[n],r,a,o),f(x[n],r,a,a.width,a.height),g(x[n],r,a),v=a.x,"left"===a.align?a.respectAlign?a.x+=a.width/2:v-=a.width/2:"right"===a.align&&(a.respectAlign?a.x-=a.width/2:v+=a.width/2),a.radius)for(d=he(a.fontSize),null===a.letterSpacing&&(a.letterSpacing=d/500),_=0;_<o.length;_+=1){for(r.save(),r.translate(a.x,a.y),l=o[_],a.flipArcText&&((c=l.split("")).reverse(),l=c.join("")),u=l.length,r.rotate(-xe*a.letterSpacing*(u-1)/2),p=0;p<u;p+=1)m=l[p],0!==p&&r.rotate(xe*a.letterSpacing),r.save(),r.translate(0,-a.radius),a.flipArcText&&r.scale(-1,-1),r.fillText(m,0,0),"transparent"!==a.fillStyle&&(r.shadowColor="transparent"),0!==a.strokeWidth&&r.strokeText(m,0,0),r.restore();a.radius-=d,a.letterSpacing+=d/(1e3*xe),r.restore()}else for(_=0;_<o.length;_+=1)l=o[_],y=a.y+_*a.height/o.length-(o.length-1)*a.height/o.length/2,r.shadowColor=a.shadowColor,r.fillText(l,v,y),"transparent"!==a.fillStyle&&(r.shadowColor="transparent"),0!==a.strokeWidth&&r.strokeText(l,v,y);y=0,"top"===a.baseline?y+=a.height/2:"bottom"===a.baseline&&(y-=a.height/2),a._event&&(r.beginPath(),r.rect(a.x-a.width/2,a.y-a.height/2+y,a.width,a.height),N(x[n],r,a),r.closePath()),h(r,a)}return Te.propCache=a,x},e.fn.measureText=function(e){var t,n,r,a=this;return(!(n=a.getLayer(e))||n&&!n._layer)&&(n=new i(e)),(t=s(a[0]))&&(ae(a[0],t,n),r=null!==n.maxWidth?se(t,n):n.text.split("\n"),oe(a[0],t,n,r)),n},e.fn.drawImage=function t(n){function r(t,i,n,r,a){return function(){var o=e(t);if(function(e,t,i,n,r){null===n.width&&null===n.sWidth&&(n.width=n.sWidth=c.width),null===n.height&&null===n.sHeight&&(n.height=n.sHeight=c.height),r&&(r.width=n.width,r.height=n.height),null!==n.sWidth&&null!==n.sHeight&&null!==n.sx&&null!==n.sy?(null===n.width&&(n.width=n.sWidth),null===n.height&&(n.height=n.sHeight),n.cropFromCenter&&(n.sx+=n.sWidth/2,n.sy+=n.sHeight/2),n.sy-n.sHeight/2<0&&(n.sy=n.sHeight/2),n.sy+n.sHeight/2>c.height&&(n.sy=c.height-n.sHeight/2),n.sx-n.sWidth/2<0&&(n.sx=n.sWidth/2),n.sx+n.sWidth/2>c.width&&(n.sx=c.width-n.sWidth/2),f(0,t,n,n.width,n.height),g(e,t,n),t.drawImage(c,n.sx-n.sWidth/2,n.sy-n.sHeight/2,n.sWidth,n.sHeight,n.x-n.width/2,n.y-n.height/2,n.width,n.height)):(f(0,t,n,n.width,n.height),g(e,t,n),t.drawImage(c,n.x-n.width/2,n.y-n.height/2,n.width,n.height)),t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),N(e,t,n),t.closePath(),h(t,n),m(t,i,n)}(t,i,n,r,a),r.layer?R(o,n,a,"load"):r.load&&r.load.call(o[0],a),r.layer&&(a._masks=n.transforms.masks.slice(0),r._next)){var s=n.drawLayersComplete;delete n.drawLayersComplete,o.drawLayers({clear:!1,resetFire:!0,index:r._next,complete:s})}}}var a,o,l,_,d,u,c,p,y,x=this,b=Te.imageCache;for(o=0;o<x.length;o+=1)a=x[o],(l=s(x[o]))&&(_=v(x[o]),d=new i(n),u=O(x[o],d,n,t),d.visible&&(p=(y=d.source).getContext,y.src||p?c=y:y&&(b[y]&&b[y].complete?c=b[y]:(c=new de,y.match(/^data:/i)||(c.crossOrigin=d.crossOrigin),c.src=y,b[y]=c)),c&&(c.complete||p?r(a,l,_,d,u)():(c.onload=r(a,l,_,d,u),c.src=c.src))));return x},e.fn.createPattern=function(t){function n(){d=r.createPattern(l,o.repeat),o.load&&o.load.call(c[0],d)}var r,o,l,_,d,u,c=this;return(r=s(c[0]))?a(u=(o=new i(t)).source)?((l=e("<canvas />")[0]).width=o.width,l.height=o.height,_=s(l),u.call(l,_),n()):(_=u.getContext,u.src||_?l=u:(l=new de,u.match(/^data:/i)||(l.crossOrigin=o.crossOrigin),l.src=u),l.complete||_?n():(l.onload=n,l.src=l.src)):d=null,d},e.fn.createGradient=function(e){var t,n,r,a,o,l,_,d,u,c,g=[];if(n=new i(e),t=s(this[0])){for(n.x1=n.x1||0,n.y1=n.y1||0,n.x2=n.x2||0,n.y2=n.y2||0,r=null!==n.r1&&null!==n.r2?t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2):t.createLinearGradient(n.x1,n.y1,n.x2,n.y2),_=1;void 0!==n["c"+_];_+=1)void 0!==n["s"+_]?g.push(n["s"+_]):g.push(null);for(a=g.length,null===g[0]&&(g[0]=0),null===g[a-1]&&(g[a-1]=1),_=0;_<a;_+=1){if(null!==g[_]){for(u=1,c=0,o=g[_],d=_+1;d<a;d+=1){if(null!==g[d]){l=g[d];break}u+=1}o>l&&(g[d]=g[_])}else null===g[_]&&(c+=1,g[_]=o+c*((l-o)/u));r.addColorStop(g[_],n["c"+(_+1)])}}else r=null;return r},e.fn.setPixels=function e(t){var n,r,a,o,l,_,d,u,c,g,m=this;for(r=0;r<m.length;r+=1)if(a=s(n=m[r]),o=v(m[r]),a&&(O(n,l=new i(t),t,e),f(m[r],a,l,l.width,l.height),null!==l.width&&null!==l.height||(l.width=n.width,l.height=n.height,l.x=l.width/2,l.y=l.height/2),0!==l.width&&0!==l.height)){if(g=(u=(d=a.getImageData((l.x-l.width/2)*o.pixelRatio,(l.y-l.height/2)*o.pixelRatio,l.width*o.pixelRatio,l.height*o.pixelRatio)).data).length,l.each)for(c=0;c<g;c+=4)_={r:u[c],g:u[c+1],b:u[c+2],a:u[c+3]},l.each.call(n,_,l),u[c]=_.r,u[c+1]=_.g,u[c+2]=_.b,u[c+3]=_.a;a.putImageData(d,(l.x-l.width/2)*o.pixelRatio,(l.y-l.height/2)*o.pixelRatio),a.restore()}return m},e.fn.getCanvasImage=function(e,t){var i,n=null;return 0!==this.length&&(i=this[0]).toDataURL&&(void 0===t&&(t=1),n=i.toDataURL("image/"+e,t)),n},e.fn.detectPixelRatio=function(e){var i,n,r,a,o,l,_,d=this;for(n=0;n<d.length;n+=1)r=s(i=d[n]),(_=v(d[n])).scaled||(1!=(a=(t.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1))&&(o=i.width,l=i.height,i.width=o*a,i.height=l*a,i.style.width=o+"px",i.style.height=l+"px",r.scale(a,a)),_.pixelRatio=a,_.scaled=!0,e&&e.call(i,a));return d},Oe.clearCache=function(){var e;for(e in Te)Object.prototype.hasOwnProperty.call(Te,e)&&(Te[e]={})},e.support.canvas=void 0!==e("<canvas />")[0].getContext,pe(Oe,{defaults:le,setGlobalProps:g,transformShape:f,detectEvents:N,closePath:p,setCanvasFont:ae,measureText:oe}),e.jCanvas=Oe,e.jCanvasObject=i}));var valence1=0,valence2=0,valence3=0,valence4=0,valence5=0,valence6=0,valence7=0,valence8=0,valence1_text=valence1.toFixed(),valence2_text=valence2.toFixed(),valence3_text=valence3.toFixed(),valence4_text=valence4.toFixed(),valence5_text=valence5.toFixed(),valence6_text=valence6.toFixed(),valence7_text=valence7.toFixed(),valence8_text=valence8.toFixed(),total=0,item_num=4,that=this,limit=$('input:hidden[name="Limit"]').val(),item1_number=7,item2_number=5,item3_number=5,item4_number=5,op_item1_point=2,op_item2_point=0,op_item3_point=-1,op_item4_point=1,my_item1_point=2,my_item2_point=1,my_item3_point=0,my_item4_point=-1,startTime=performance.now(),endTime,passed_time_task1;console.log("startTime="+startTime),item1_image=items["${e://Field/participant_preference_1st}"].img_url,item2_image=items["${e://Field/participant_preference_2nd}"].img_url,item3_image=items["${e://Field/participant_preference_3rd}"].img_url,item4_image=items["${e://Field/participant_preference_4th}"].img_url;const position={boxWidth:500,boxHeight:700,modelScale:.15,modelX:0,modelY:500},serverURL="https://a48e-2400-2651-41c2-1500-4405-5e59-5c98-3b57.jp.ngrok.io",debug=!1,modelPath="https://cdn.jsdelivr.net/gh/edu-053/AgentInteractionResources@1d10ea0f2ed48612fe73ef7ad3d46e2b0ec61027/Resources/AModel/AModel/amodel.model3.json",skinInner=document.querySelector(".SkinInner");if(skinInner.classList.add("expand-section1"),!0===debug){skinInner.classList.add("bg-success");const e=document.getElementById("SurveyEngineBody");e.classList.add("bg-success")}this.hideNextButton();const requiredResources=["https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js","https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js","https://cdn.jsdelivr.net/gh/edu-053/AgentInteractionResources@1d10ea0f2ed48612fe73ef7ad3d46e2b0ec61027/js/IndexLibrary_AModel_3Dtable.js"],loadScript=e=>{console.log("Loading ",requiredResources[e]),jQuery.getScript(requiredResources[e],(function(){e+1<requiredResources.length?loadScript(e+1):initExp()}))},initExp=()=>{console.log("ロード"),indexLibrary=new IndexLibrary(debug,modelPath,position),indexLibrary.onload(),indexLibrary.set_limit(limit)};console.log("ロード"),console.log("スクリプト読み込み"),loadScript(0);for(var i=1;i<5;i++)"0"==$('input:hidden[name="slider'+i+'_init"]').val()?eval("var pre_"+i+"value=0;"):"1"==$('input:hidden[name="slider'+i+'_init"]').val()&&eval("var pre_"+i+"value = item"+i+"_number;"),console.log("pre"+i+"value="+eval("pre_"+i+"value"));for(var position_task1_agent_preference_1st=pre_1value+",",position_task1_agent_preference_3rd=pre_2value+",",position_task1_agent_preference_4th=pre_3value+",",position_task1_agent_preference_2nd=pre_4value+",",slider_history_time_task1_agent_preference_1st="",slider_history_time_task1_agent_preference_3rd="",slider_history_time_task1_agent_preference_4th="",slider_history_time_task1_agent_preference_2nd="",i=1;i<5;i++)$("#item"+i+"_value").text(eval("pre_"+i+"value")+"個×？点"),$("#my_item"+i+"_value").text(eval("item"+i+"_number-pre_"+i+"value")+"個×"+eval("my_item"+i+"_point")+"点");var init_total=(item1_number-pre_1value)*my_item1_point+(item2_number-pre_2value)*my_item2_point+(item3_number-pre_3value)*my_item3_point+(item4_number-pre_4value)*my_item4_point;console.log("init_total="+init_total),$("#my_total_point").text(init_total+"点");for(var hsize=$(window).height(),wsize=$(window).width(),slider_div_size=$("#slider_div").width(),center=wsize/2,i=1;i<item_num+1;i++)$("#slider_div").append('<div class="slider_zone" id="slider_zone'+i+'"><div class="item_image item'+i+'_image op_item" id="item'+i+'_image_op"></div><input type="range" class="slider item'+i+'" id="item'+i+'" min="0"><div class="item_image item'+i+'_image my_item" id="item'+i+'_image_my"></div>');for(var i=1;i<item_num+1;i++)$("#item"+i).attr("max",eval("item"+i+"_number")),$("#item"+i).attr("value",eval("item"+i+"_number"));for(var i=1;i<item_num+1;i++)for(var j=1;j<eval("item"+i+"_number")+1;j++)$("#item"+i+"_image_op").append('<img class="item op_item_image" id="op_image'+i+"_"+j+'" src="'+eval("item"+i+"_image")+'" width="25" height="25" >'),$("#op_image"+i+"_"+j).css("margin-left","-10px"),$("#op_image"+i+"_"+j).hide(),$("#item"+i+"_image_my").append('<img class="item my_item_image" id="my_image'+i+"_"+j+'" src="'+eval("item"+i+"_image")+'" width="40" height="40" >'),$("#my_image"+i+"_"+j).css("margin-left","-20px"),$("#my_image"+i+"_"+j).hide();for(var i=1;i<5;i++){for(var j=1;j<eval("pre_"+i+"value+1");j++)$("#op_image"+i+"_"+j).show();for(var j=1;j<eval("item"+i+"_number-pre_"+i+"value+1");j++)$("#my_image"+i+"_"+j).show();$("#item"+i).val(eval("item"+i+"_number-pre_"+i+"value"))}for(var i=1;i<item_num+1;i++)$("#point_table_item"+i).html('<img src="'+eval("item"+i+"_image")+'" width="40" height="40" ">');point_table_update();var table_width=750,table_height=$("#item1").width()+100,table_decrease=150,x1=table_decrease,y1=0,x2=table_width-table_decrease,y2=y1,x3=x2+table_decrease,y3=y2+table_height,x4=x1-table_decrease,y4=y3,up_separate_x=(x2-x1)/(item_num+1),down_separate_x=(x3-x4)/(item_num+1);console.log("x1="+x1),console.log("y1="+y1),console.log("x2="+x2),console.log("y2="+y2),console.log("x3="+x3),console.log("y3="+y3),console.log("x4="+x4),console.log("y4="+y4),$("#table_line").append('<svg  width="'+table_width+'" height="'+table_height+'" id="demo_svg"><polygon points="'+x1+","+y1+" "+x2+","+y2+" "+x3+","+y3+" "+x4+","+y4+'" stroke="black" fill="none"></polygon></svg>');var select_height=$("#select").height();$("#select").css("margin-top",-select_height+"px");var slider_div_position1=$("#slider_zone1").position().left,zone1_h=$("#slider_zone1").height(),slider_div_position2=$("#slider_zone2").position().left,hei=$("#slider_div").height(),rotate1=90,rotate2=90,rotate3=90,rotate4=90,deg,off=$("#table").offset(),offset=$("#table").offset(),table_top_left=offset.left+table_decrease,table_bottom_left=offset.left,table_top_len=table_width-2*table_decrease,slider_top_interval=table_top_len/(item_num+1),slider_bottom_interval=table_width/(item_num+1),slider_top_position=table_top_left+50,slider_bottom_position=table_bottom_left+50,deg,a1=get_slope(x1,y1,x3,y3),b1=get_intercept(x1,y1,x3,y3),a2=get_slope(x2,y2,x4,y4),b2=get_intercept(x2,y2,x4,y4),intercection_x=(b1-b2)/(a2-a1),intercection_y=(a2*b1-a1*b2)/(a2-a1),slider_div_height_half=Number($("#slider_div").height())/2,table_half=table_height/2,slider_table_diff=intercection_y-slider_div_height_half;for($("#slider_div").css("margin-top",slider_table_diff),i=1;i<item_num+1;i++){var x_top=x1+up_separate_x*i,y_top=y1,x_bottom=x4+down_separate_x*i,y_bottom=y4,center_x=get_line_x(x_top,y_top,x_bottom,y_bottom,intercection_y),xpos_rotate=$("#item"+i+"_image_op").width()+(table_width-2*table_decrease)/(table_width-2*table_decrease+table_width)*$(".slider").width(),ypos_rotate=.5*$("#slider_zone"+i).height();$("#slider_zone"+i).css({"transform-origin":xpos_rotate+"px "+ypos_rotate+"px 0px","-webkit-transform-origin":xpos_rotate+"px "+ypos_rotate+"px 0px"}),$("#slider_zone"+i).css("left",center_x-xpos_rotate),$("#slider_zone"+i).css("top",-.5*$("#slider_zone"+i).height())}for(i=1;i<item_num+1;i++)slider_top_position+=slider_top_interval,slider_bottom_position+=slider_bottom_interval,deg=90+get_deg(slider_top_position,slider_bottom_position,table_height),$("#slider_zone"+i).css({transform:"rotate("+deg+"deg)"}),$("#item"+i+"_image_op").css({transform:"rotate("+-deg+"deg) scale(-1,-1)"}),$("#item"+i+"_image_my").css({transform:"rotate("+-deg+"deg)"});function get_slope(e,t,i,n){return(n-t)/(i-e)}function get_intercept(e,t,i,n){return-get_slope(e,t,i,n)*e+t}function get_line_x(e,t,i,n,r){var a=get_slope(e,t,i,n);return(r-get_intercept(e,t,i,n))/a}function get_deg(e,t,i){return Math.atan((e-t)/i)*(180/Math.PI)}$(".op_item_image").css({transform:"rotate(180deg)"}),$("#table").css("width",$("#table_line").width()+"px"),$("#table").css("height",table_height+"px");var table_z=$("#table").css("z-index"),slider_div_z=$("#slider_div").css("z-index"),select_z=$("#select").css("z-index"),f_emo=$('input:hidden[name="F_EMO"]').val(),f_bli=$('input:hidden[name="F_BLI"]').val();console.log("FF: ",f_emo+"//"+f_bli),$.jCanvas.defaults.fromCenter=!1,$.jCanvas.defaults.layer=!0;var elem=document.getElementById("image01");function point_table_update(){for(i=1;i<item_num+1;i++)$("#agent_item"+i+"_point").html(eval("item"+i+"_number")-$("#item"+i).val()+"×？点"),$("#human_item"+i+"_point").html($("#item"+i).val()+"×"+eval("my_item"+i+"_point")+"点");$("#agent_total_point").html("？点"),$("#human_total_point").html(get_participants_total()+"点")}this.hideChoices(),this.disableNextButton(),$("#item1").on("input change",(function(){for(i=0;i<item1_number;i++)$("#my_image1_"+(i+1)).hide();for(i=0;i<item1_number;i++)$("#op_image1_"+(i+1)).hide();for(my_item1_num=$(this).val(),item1_num=item1_number-my_item1_num,i=0;i<my_item1_num;i++)$("#my_image1_"+(i+1)).show();for(i=0;i<item1_num;i++)$("#op_image1_"+(i+1)).show();position_task1_agent_preference_1st=add_history(position_task1_agent_preference_1st,pre_1value,my_item1_num),console.log("history="+position_task1_agent_preference_1st),pre_1value=my_item1_num,slider_history_time_task1_agent_preference_1st=add_time_history(slider_history_time_task1_agent_preference_1st),console.log("time_history="+slider_history_time_task1_agent_preference_1st),valence1=$(this).val(),valence5=item1_number-$(this).val(),total=get_agent_total(),console.log("total="+total),indexLibrary.set_agentpoint(total),indexLibrary.App_set_point(),point_table_update()})),$("#item2").on("input change",(function(){for(i=0;i<item2_number;i++)$("#my_image2_"+(i+1)).hide();for(i=0;i<item2_number;i++)$("#op_image2_"+(i+1)).hide();for(my_item2_num=$(this).val(),item2_num=item2_number-my_item2_num,i=0;i<my_item2_num;i++)$("#my_image2_"+(i+1)).show();for(i=0;i<item2_num;i++)$("#op_image2_"+(i+1)).show();position_task1_agent_preference_3rd=add_history(position_task1_agent_preference_3rd,pre_2value,my_item2_num),console.log("history="+position_task1_agent_preference_3rd),pre_2value=my_item2_num,slider_history_time_task1_agent_preference_2nd=add_time_history(slider_history_time_task1_agent_preference_2nd),console.log("time_history="+slider_history_time_task1_agent_preference_2nd),valence2=$(this).val(),valence6=item2_number-$(this).val(),total=get_agent_total(),console.log("total="+total),indexLibrary.set_agentpoint(total),indexLibrary.App_set_point(),point_table_update()})),$("#item3").on("input change",(function(){for(i=0;i<item3_number;i++)$("#my_image3_"+(i+1)).hide();for(i=0;i<item3_number;i++)$("#op_image3_"+(i+1)).hide();for(my_item3_num=$(this).val(),item3_num=item3_number-my_item3_num,i=0;i<my_item3_num;i++)$("#my_image3_"+(i+1)).show();for(i=0;i<item3_num;i++)$("#op_image3_"+(i+1)).show();position_task1_agent_preference_4th=add_history(position_task1_agent_preference_4th,pre_3value,my_item3_num),console.log("history="+position_task1_agent_preference_4th),pre_3value=my_item3_num,slider_history_time_task1_agent_preference_3rd=add_time_history(slider_history_time_task1_agent_preference_3rd),console.log("time_history="+slider_history_time_task1_agent_preference_3rd),valence3=$(this).val(),valence7=item3_number-$(this).val(),total=get_agent_total(),console.log("total="+total),indexLibrary.set_agentpoint(total),indexLibrary.App_set_point(),point_table_update()})),$("#item4").on("input change",(function(){for(i=0;i<item4_number;i++)$("#my_image4_"+(i+1)).hide();for(i=0;i<item4_number;i++)$("#op_image4_"+(i+1)).hide();for(my_item4_num=$(this).val(),item4_num=item4_number-my_item4_num,i=0;i<my_item4_num;i++)$("#my_image4_"+(i+1)).show();for(i=0;i<item4_num;i++)$("#op_image4_"+(i+1)).show();position_task1_agent_preference_2nd=add_history(position_task1_agent_preference_2nd,pre_4value,my_item4_num),console.log("history="+position_task1_agent_preference_2nd),pre_4value=my_item4_num,slider_history_time_task1_agent_preference_4th=add_time_history(slider_history_time_task1_agent_preference_4th),console.log("time_history="+slider_history_time_task1_agent_preference_4th),valence4=$(this).val(),valence8=item4_number-$(this).val(),total=get_agent_total(),console.log("total="+total),indexLibrary.set_agentpoint(total),indexLibrary.App_set_point(),point_table_update()}));var changeFace=function(){(total=get_agent_total())>limit?faceDraw(total,f_emo,f_bli):faceDraw(0,f_emo,f_bli)};function get_participants_total(){var participants_total_point=0;for(i=1;i<item_num+1;i++)eval("participants_total_point += ($('#item"+i+"').val())*my_item"+i+"_point");return participants_total_point}function get_agent_total(){var agent_total_point=0;for(i=1;i<item_num+1;i++)eval("agent_total_point += (item"+i+"_number-$('#item"+i+"').val())*op_item"+i+"_point");return agent_total_point}function add_history(e,t,i){var n=t-i;return console.log("pre_value="+t),console.log("now_value="+i),console.log("add_history="+n),e+(i+",")}function add_time_history(e){var t=(performance.now()-startTime)/1e3;return console.log("Time="+t),e+(t.toFixed(3)+",")}this.setChoiceValue(1,valence1),this.setChoiceValue(2,valence2),this.setChoiceValue(3,valence3),this.setChoiceValue(4,valence4),this.setChoiceValue(5,valence5),this.setChoiceValue(6,valence6),this.setChoiceValue(7,valence7),this.setChoiceValue(8,valence8);var dialog=document.getElementById("dialog"),yes=document.getElementById("yes"),cancel=document.getElementById("cancel"),suggestion_button_img=["https://rc1userv5pwvgnvtxbwj.au1.qualtrics.com/ControlPanel/Graphic.php?IM=IM_37see1hsKpzpuAK","https://rc1userv5pwvgnvtxbwj.au1.qualtrics.com/ControlPanel/Graphic.php?IM=IM_bln2nk0YWrbZU5E","https://rc1userv5pwvgnvtxbwj.au1.qualtrics.com/ControlPanel/Graphic.php?IM=IM_b28iR0DizQNxbYG"];function end_work(){that.enableNextButton(),that.setChoiceValue(1,valence1_text),that.setChoiceValue(2,valence2_text),that.setChoiceValue(3,valence3_text),that.setChoiceValue(4,valence4_text),that.setChoiceValue(5,valence5_text),that.setChoiceValue(6,valence6_text),that.setChoiceValue(7,valence7_text),that.setChoiceValue(8,valence8_text),$("#slider1").css("visibility","hidden"),$("#slider2").css("visibility","hidden"),$("#slider3").css("visibility","hidden"),$("#slider4").css("visibility","hidden");var e=get_participants_total(),t=get_agent_total();console.log("participant_point_task1="+e),console.log("agent_point_task1="+t),Qualtrics.SurveyEngine.setEmbeddedData("position_task1_agent_preference_1st",position_task1_agent_preference_1st),Qualtrics.SurveyEngine.setEmbeddedData("position_task1_agent_preference_3rd",position_task1_agent_preference_3rd),Qualtrics.SurveyEngine.setEmbeddedData("position_task1_agent_preference_4th",position_task1_agent_preference_4th),Qualtrics.SurveyEngine.setEmbeddedData("position_task1_agent_preference_2nd",position_task1_agent_preference_2nd);var i=position_task1_agent_preference_1st.split(","),n=position_task1_agent_preference_2nd.split(","),r=position_task1_agent_preference_3rd.split(","),a=position_task1_agent_preference_4th.split(",");i.length>3?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_1st",item1_number-Number(i[i.length-2])):"0"==$('input:hidden[name="slider1_init"]').val()?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_1st",Number(0)):"1"==$('input:hidden[name="slider1_init"]').val()&&Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_1st",Number(item1_number)),n.length>3?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_2nd",item2_number-Number(n[n.length-2])):"0"==$('input:hidden[name="slider4_init"]').val()?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_2nd",Number(0)):"1"==$('input:hidden[name="slider4_init"]').val()&&Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_2nd",Number(item2_number)),r.length>3?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_3rd",item3_number-Number(r[r.length-2])):"0"==$('input:hidden[name="slider2_init"]').val()?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_3rd",Number(0)):"1"==$('input:hidden[name="slider2_init"]').val()&&Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_3rd",Number(item3_number)),a.length>3?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_4th",item4_number-Number(a[a.length-2])):"0"==$('input:hidden[name="slider3_init"]').val()?Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_4th",Number(0)):"1"==$('input:hidden[name="slider3_init"]').val()&&Qualtrics.SurveyEngine.setEmbeddedData("offer_task1_agent_preference_4th",Number(item4_number)),Qualtrics.SurveyEngine.setEmbeddedData("slider_history_time_task1_agent_preference_1st",slider_history_time_task1_agent_preference_1st),Qualtrics.SurveyEngine.setEmbeddedData("slider_history_time_task1_agent_preference_3rd",slider_history_time_task1_agent_preference_3rd),Qualtrics.SurveyEngine.setEmbeddedData("slider_history_time_task1_agent_preference_4th",slider_history_time_task1_agent_preference_4th),Qualtrics.SurveyEngine.setEmbeddedData("slider_history_time_task1_agent_preference_2nd",slider_history_time_task1_agent_preference_2nd),Qualtrics.SurveyEngine.setEmbeddedData("participant_point_task1",e),Qualtrics.SurveyEngine.setEmbeddedData("agent_point_task1",t),t>=limit?(Qualtrics.SurveyEngine.setEmbeddedData("agent_decision_task1","accept"),console.log("agent_decision_task1")):(Qualtrics.SurveyEngine.setEmbeddedData("agent_decision_task1","refuse"),console.log("refuse")),endTime=performance.now(),Qualtrics.SurveyEngine.setEmbeddedData("passed_time_task1",(endTime-startTime)/1e3),console.log("passed_time_task1="+performance.now()/1e3),that.clickNextButton()}$("#select").click((function(){dialog.style.display="block"})),$("#suggestion_button").click((function(){dialog.style.display="block",$("#suggestion_button").attr("src",suggestion_button_img[1]),setTimeout((function(){$("#suggestion_button").attr("src",suggestion_button_img[0])}),500)})),$("#yes").click((function(){end_work()})),$("#cancel").click((function(){dialog.style.display="none"}))})),Qualtrics.SurveyEngine.addOnReady((function(){})),Qualtrics.SurveyEngine.addOnUnload((function(){null!=indexLibrary&&indexLibrary.onUnload()}));